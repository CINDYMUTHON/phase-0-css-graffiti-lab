(self.webpackChunk=self.webpackChunk||[]).push([[1634],{64078:(e,t,n)=>{n.d(t,{X:()=>S});var i,o=n(59312),a=n(27378),s=n(57050),r=n(19962),l=n(5114),c=n(44060),d=n(67424),u=n(89894),h=n(32096),m=n(40327),p=n(5739),g=n(98403),f=n(49708),b=n(85985),k=n(41398),I=n(24209),w=n(17343),y=n(38194),_=n(598),C=n(50628),v=n(25781),E=n(83078),M=n(18625);!function(e){var t="scrollaction";e.emit=function(e){return self.dispatchEvent(new CustomEvent(t,{detail:e}))},e.observe=M.P((function(){return f.R(self,t)}))}(i||(i={}));var U=n(42103),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._outOfTarget=function(e){return function(t){return!r.UL.hasPoint(t.getBoundingClientRect(),e)}},t}return(0,o.ZT)(t,e),t.prototype.componentDidMount=function(){this._listenTooltipAppearance()},t.prototype.componentWillUnmount=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[],this.context.hide()},t.prototype.render=function(){return a.createElement(p.F.div,{"data-role":"tooltip"},this.context.state.view(this.props.children))},t.prototype._listenTooltipAppearance=function(){var e=this,t=f.R(document,"keydown").pipe(b.h((function(e){return e.keyCode===v.R.ESC_CODE}))),n=f.R(document,"mousedown").pipe(k.M(this.context.state),b.h((function(t){var n=t[0],i=t[1];return(0,m.pipe)(i,l.map((function(e){return e.target})),l.filter((function(){return r.pK(n.target)})),E.wo(e._outOfTarget({x:n.clientX,y:n.clientY})))}))),o=I.T(t,n,f.R(document,"scroll"),i.observe.pipe(b.h((function(e){return"show"===e.detail})))).pipe(w.h(g.PU),y.B());this._subs=[this.context.hasContent.pipe(b.h(Boolean),_.c(o.pipe(C.P()))).subscribe(this.context.hide),this.context.hasContent.pipe(b.h(Boolean),_.c(I.T(g.gw(!0,500),o.pipe(w.h(!1))).pipe(C.P())),b.h(Boolean)).subscribe(this.context.show)]},t.contextType=U.G.Context,t}(a.Component),S=function(){return a.createElement(x,null,(0,s.ls)(l.map((function(e){return a.createElement(d.t.ByAbsoluteRect,(0,o.pi)({rect:r.UL.fromEl(e.target),className:P.container},d.t.Alignment.toSelector(e.alignment),{withPin:!0}),a.createElement("div",{className:P.content},e.content))})),l.toNullable))},N={position:"fixed",zIndex:h.DY,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},F={padding:"".concat(u.ux.rem(.25)," ").concat(u.ux.rem(1)),borderRadius:u.ux.rem(h.fx),background:c.Il.BackgroundTooltip,color:c.Il.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:u.ux.px(.25),fontSize:u.ux.rem(.75),lineHeight:u.ux.rem(1)},P=u.ux.stylesheet({container:[N],content:[F]})},24588:(e,t,n)=>{n.d(t,{AX:()=>d,BZ:()=>h,FW:()=>s,UE:()=>r,Xd:()=>m,Zn:()=>u,jj:()=>o,kl:()=>c,mb:()=>l,xO:()=>a});var i=n(40456);i.zh;const o=i.jj,a=i.xO,s=i.FW,r=i.UE,l=(i.VR,i.mb),c=i.kl,d=i.AX,u=(i.lh,i.Re,i.Zn),h=i.BZ,m=i.Xd;i.b6,i.Aw},40219:(e,t,n)=>{n.d(t,{DY:()=>d,I3:()=>c,Ig:()=>I,Jr:()=>a,LB:()=>o,Q9:()=>g,VN:()=>l,fx:()=>s,g_:()=>m,mA:()=>r,mJ:()=>k,nt:()=>h,pZ:()=>f,rX:()=>b,v4:()=>w,w$:()=>u,xL:()=>p});var i=n(32096);const o=i.LB,a=i.Jr,s=i.fx,r=i.mA,l=(i.Ax,i.VN),c=(i.FY,i.I3),d=(i.$n,i.DY),u=i.w$,h=i.nt,m=(i.cr,i.g_),p=i.xL,g=i.Q9,f=(i.WW,i.Ih,i.aS,i.pZ),b=(i.Jg,i.MZ,i.h,i.Ee,i.OB,i.Gu,i.Gk,i.Kp,i.rX),k=i.mJ,I=i.Ig,w=(i.FB,i.v4)},47849:(e,t,n)=>{n.d(t,{Cn:()=>i,LH:()=>w,ss:()=>y});var i,o=n(74850),a=n(11407),s=n(62337),r=n(28728),l=n(15555),c=n(13718),d=n(19751),u=n(77176),h=n(85985),m=n(17343),p=n(2834),g=n(24209),f=n(49708),b=n(23063),k=n(38194),I=n(73975);!function(e){e.getEqById=function(){return I.f7(((e,t)=>e&&t?e.annotation.id===t.annotation.id:e===t))}}(i||(i={}));class w{constructor(e,t=o.Y.create(w.name)){this._options=e,this._log=t,this._rawHoveredAnnotation=this._options.mouseData.pipe(c.U(a.S.hz30),d.skipBy(r.Z.eq),u.U((({client:e,offset:t})=>{if(e&&t&&function(e,t){var n;let i=t.ownerDocument.elementFromPoint(e.left,e.top);(null===(n=null==i?void 0:i.shadowRoot)||void 0===n?void 0:n.elementFromPoint)&&(i=i.shadowRoot.elementFromPoint(e.left,e.top));return t.contains(i)}(e,this._options.textNode)){const e=this._options.highlightGeometry.geometry.get();return Array.from(e.keys()).reduce(((n,i)=>{const o=e.get(i);if(o){const e=o.rects&&(null===o.meta.highlightDisplayFormat||l.jk.isInteractable(o.meta.highlightDisplayFormat))&&o.rects.find((e=>s.UL.contains(t,e)));if(e)return{annotation:o.meta.annotation,activeHighlightId:o.meta.highlightId,activeHighlightRect:e,highlightIds:[],highlightRects:[]}}return n}),null)}return null})),u.U((e=>{if(!e)return null;const t=this._options.highlightGeometry.geometry.get(),n=[],i=[];return t.forEach(((t,o)=>{t.meta.annotation.id===e.annotation.id&&(n.push(o),i.push(...t.rects))})),{...e,highlightIds:n,highlightRects:i}})),d.skipBy(i.getEqById()),d.shareReplay({bufferSize:1,refCount:!0})),this._offByUpdatedGeometry=e=>this._options.highlightGeometry.geometry.pipe(u.U((t=>e&&t.has(e.activeHighlightId)?e:null)),h.h((e=>null===e)),m.h(null),p.b((e=>this._log.trace("OffByUpdatedGeometry",e))))}}function y(e,t){return g.T(e.rect.changes.pipe(p.b((()=>t.trace("Text field position, size has been changed")))),e.scroll.changes.pipe(p.b((()=>t.trace("Text field scroll has been changed")))),f.R(self,"scroll").pipe(p.b((()=>t.trace("Window scroll detected"))))).pipe(b.q(1),m.h(null),k.B())}},94158:(e,t,n)=>{n.d(t,{_:()=>x});var i=n(27378),o=n(77176),a=n(66310),s=n(28043),r=n(63919),l=n(62337),c=n(28094),d=n(95981),u=n(25924),h=n(34379),m=n(18505),p=n(2780),g=n(68383),f=n(92783),b=n(90361),k=n(14601),I=n(2844),w=n(98403),y=n(38983),_=n(57356),C=n(51655),v=n(70718),E=n(13822);function M(e,t,n,i=!1,o=!1){const a=(0,C.Me)(e).body,s=(0,C.Jj)(e);let r={left:"0px",top:"0px"};if(t.fieldPaintingPositioning===_.Q.nonPositioned&&t.positionedAncestor===a){const e=s.getComputedStyle(a);r={left:e.marginLeft||"0px",top:e.marginRight||"0px"}}else if(t.positionedAncestor!==a){const e=s.getComputedStyle(t.positionedAncestor);r={left:e.borderLeftWidth&&`-${e.borderLeftWidth}`||"0px",top:e.borderTopWidth&&`-${e.borderTopWidth}`||"0px"}}return a=>{a.style.position="absolute",a.style.top=r.top,a.style.left=i?"auto":r.left,o||(a.style.right=i?r.left:"auto",a.style.pointerEvents="none"),function({subjectElement:e,isPositioned:t,subjectElementStyle:n,integrationRoot:i,positionedAncestor:o}){t?(i.style.zIndex=n.zIndex,e.insertAdjacentElement("afterend",i)):o.insertAdjacentElement("afterbegin",i)}({subjectElement:e,isPositioned:t.fieldPaintingPositioning===_.Q.positioned,subjectElementStyle:n,integrationRoot:a,positionedAncestor:t.positionedAncestor})}}function U(e){return l.Pf.create({...e.client,...e.size})}class x{constructor(e,t=!1,n){this._highlightsSubject=e,this._innerElementsInteractive=t,this._subscriptions=new k.w,this._mouse=y.h.create({offset:null,client:null}),this._fakeMouse=y.h.create(null),this.getFieldPositionRelativeToViewport=()=>{const e=this._highlightsSubject.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}},this._prepareHighlights=(e,t=(0,C.is)(e))=>{const n=(0,C.o)(e),i=(0,v.fL)(e,!1,n,t);return{layout:i,rootInjector:M(e,i,n),enableHighlightsBlendingOnRoot:(0,c.$)(e,n)}},this._prepareInnerElements=(e,t=(0,C.is)(e),n)=>{const i=(0,C.o)(e),o=n||(0,v.fL)(e,!1,i,t);return{layout:o,rootInjector:M(e,o,i,!0,this._innerElementsInteractive)}},this._highlights=this._prepareHighlights(this._highlightsSubject),this._innerElements=this._prepareInnerElements(this._highlightsSubject,void 0,this._highlights.layout),this._win=(0,C.Jj)(this._highlightsSubject),this._createTextNodeRect=e=>({page:r.Cv.fromClient(e.client,{top:this._win.scrollY,left:this._win.scrollX}),offset:e.offset,client:e.client,size:e.size,padding:e.padding}),this.textNode={rect:this._highlights.layout.textField.paddingRect.map(this._createTextNodeRect),visibleRect:this._highlights.layout.textField.visibleRect.map(this._createTextNodeRect),scroll:this._highlights.layout.textField.scroll,scrollSize:this._highlights.layout.textField.scrollSize,scroller:(0,h.iX)(this._highlightsSubject,{rect:this._highlights.layout.textField.paddingRect.map(this._createTextNodeRect),scrollSize:this._highlights.layout.textField.scrollSize})},this.highlightHeightOffset=0,this.mouse=y.h.combine(this._mouse,this._fakeMouse,((e,t)=>t||e)),this._subscriptions.add(I.aj([this._highlights.layout.textField.paddingRect.behavior,this._highlights.layout.textField.scroll.behavior]).pipe((0,o.U)((([e,t])=>({rect:U(e),scroll:t}))),(0,a.w)((({rect:e,scroll:t})=>(0,f.Am)()?(0,u.q7)(this._win,e,t):(0,u.B0)(this._win,e,t))),(0,s.x)(b.fS)).subscribe(w.wW(this._mouse))),n&&this._subscriptions.add(I.aj([this._highlights.layout.textField.paddingRect.behavior,this._highlights.layout.textField.scroll.behavior]).pipe((0,o.U)((([e,t])=>({rect:U(e),scroll:t}))),(0,a.w)((({rect:e,scroll:t})=>n.pipe(o.U((n=>{if(n){const i=r.Ir.create({left:n.clientX,top:n.clientY});return{client:i,offset:l.UL.contains(i,e)?r.p8.fromClientPoint(i,e,t):null}}return null}))))),(0,s.x)(b.fS)).subscribe(w.wW(this._fakeMouse)))}createGeometryLayout(){return new d.D((()=>U(this._highlights.layout.textField.paddingRect.getCurrent())),(()=>this._highlights.layout.textField.scroll.getCurrent()),(()=>U(this._highlights.layout.textField.paddingRect.getApproximate())),(()=>this._highlights.layout.textField.scroll.getApproximate()))}render(e,t){const n={position:"absolute",top:0,left:0},o=(0,C.Me)(this._highlightsSubject),a=e.highlights&&m.VB.get({monitorAs:"highlights"}).inject(p.EM.fromDocument(o,"grammarly-extension"),(e=>{t.highlightsBlendingEnabled&&this._highlights.enableHighlightsBlendingOnRoot(e),this._highlights.rootInjector(e)}),g.G7.showWhenLoaded(i.createElement("div",{"data-grammarly-part":"highlights",style:n},i.createElement(E.V,{layout:this._highlights.layout},i.createElement("div",{style:n},i.createElement(e.highlights,null)))))),s=e.innerElements&&m.VB.get({monitorAs:"inner-elements"}).inject(p.EM.fromDocument(o,"grammarly-extension"),this._innerElements.rootInjector,g.G7.showWhenLoaded(i.createElement("div",{"data-grammarly-part":"inner-elements",style:{position:"absolute",top:0,right:0}},i.createElement(e.innerElements,null)))),r=e.outerElements&&m.VB.get({monitorAs:"outer-elements"}).inject(p.EM.fromDocument(o,"grammarly-extension"),p.zs.appendChild(o.documentElement),g.G7.showWhenLoaded(i.createElement(e.outerElements,null)),{eventPropagationHandler:t.eventPropagationHandler});return{dispose:()=>{null==a||a.dispose(),null==r||r.dispose(),null==s||s.dispose()}}}dispose(){this._subscriptions.unsubscribe()}}},55421:(e,t,n)=>{n.d(t,{_:()=>y});var i,o=n(17771),a=n(57050),s=n(48044),r=n(23923),l=n(19019),c=n(52965),d=n(66319),u=n(75420),h=n(85985),m=n(77176),p=n(93508),g=n(16118),f=n(73975),b=n(71249),k=n(5114),I=n(43675),w=n(92843);function y(e){const t=Date.now();return d.x.create(e,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["contenteditable"]}).pipe(h.h((e=>e.some((e=>"attributes"==e.type&&(0,u.Re)(e.target)?e.target.matches(c.kO):Array.from(e.addedNodes).filter(u.Re).some((e=>e.matches(c.kO)||!!e.querySelector(c.kO)))||Array.from(e.removedNodes).filter(u.Re).some((e=>e.querySelector(c.kO))))))),m.U((t=>Array.from(e.querySelectorAll(c.kO))))).pipe(p.O(Array.from(e.querySelectorAll(c.kO))),m.U((e=>(0,a.zG)(e,b.UI((e=>(0,a.zG)(k.fromNullable(e.closest(c.e8)),k.chain((n=>{var i;return o.Y(k.option)({textField:k.some(e),formEl:k.fromNullable(null===(i=n.closest(c.KC))||void 0===i?void 0:i.querySelector(c.ZA)),buttonEl:k.fromNullable(n.querySelector(c.DM)),messageId:(0,a.zG)(k.fromNullable(e.closest(c.n4)),k.chain(l.Su)),initTime:k.some(t),startTime:k.some(Date.now()-t)})}))))),b.oA,b.u4(new Map,((e,t)=>(0,a.zG)(e,s.ZQ(f.w4)(t.formEl,t))))))),p.O(new Map),g.G(),m.U((([e,t])=>(0,a.zG)(I.yi(i.eq)(e,t),w.v.reduce({forms:new Map(Array.from(t.values()).map((e=>[e.messageId,e]))),added:new Set,updated:new Set,removed:new Set},((e,t)=>({...e,removed:e.removed.add(t.messageId)})),((e,t,n)=>({...e,updated:e.updated.add(n.messageId)})),((e,t)=>({...e,added:e.added.add(t.messageId)})))))))}!function(e){e.eq=f.MW({textField:f.w4,formEl:f.w4,buttonEl:f.w4,messageId:r.eo.eq,initTime:f.lr,startTime:f.lr})}(i||(i={}))},44126:(e,t,n)=>{n.d(t,{c:()=>k});var i=n(57050),o=n(90361),a=n(32952),s=n(71032),r=n(12126),l=n(85321),c=n(77176),d=n(85985),u=n(23063),h=n(17343),m=n(2834),p=n(77150),g=n(78674),f=n(5114),b=n(70631);function k(e,t=0){return n=>{const k=new a.xQ;return(0,i.zG)(n,s.b((e=>r.D(Array.from(e)))),l.zg((t=>e.pipe(c.U((e=>(0,i.zG)(f.fromNullable(e.expandedMessages.get(t)),f.fold(i.jv,b.d6)))),d.h(o.fQ),u.q(1),h.h(t)))),m.b((()=>k.next())),p.R((()=>k.pipe(g.b(t)))),c.U((e=>new Set(e))),d.h((e=>e.size>0)))}}},18477:(e,t,n)=>{n.r(t),n.d(t,{createReaderGmailV1ThreadIntegration:()=>oo});var i=n(57050),o=n(48044),a=n(27378),s=n(29511),r=n(74850),l=n(19751),c=n(66310),d=n(77176),u=n(49708),h=n(41398),m=n(24209),p=n(40151),g=n(17343),f=n(23063),b=n(93508),k=n(76974),I=n(47849);class w extends I.LH{constructor(e,t=r.Y.create(w.name)){var n;super(e,t),this._switchByDisplayedCard=()=>(0,i.ls)(c.w((e=>this._options.cardHovered.pipe(d.U((t=>t?this._options.getCurrentCardAnnotationState():e))))),l.skipBy(I.Cn.getEqById())),this.activeAnnotation=u.R((null===(n=this._options.textNode.ownerDocument)||void 0===n?void 0:n.defaultView)||this._options.textNode,"click").pipe(h.M(this._rawHoveredAnnotation.pipe(this._switchByDisplayedCard())),d.U((([e,t])=>t)),c.w((e=>e?m.T(this._offByUpdatedGeometry(e),this._options.offByTextPositionChange||p.E,this._options.cardDismissed.pipe(g.h(null))).pipe(f.q(1),b.O(e)):k.of(null))),b.O(null),l.skipBy(I.Cn.getEqById()),l.shareReplay({bufferSize:1,refCount:!0})),this.hoveredAnnotation=this._rawHoveredAnnotation}}var y=n(94158),_=n(52513),C=n(41263),v=n(96002),E=n(34311),M=n(41703),U=n(28043),x=n(97565),S=n(22232),N=n(5739),F=n(12187),P=n(41538);const R=({heightOffset:e=0,hoverState:t,annotation:n,rects:i,id:o})=>a.createElement(a.Fragment,null,i.map(((s,r)=>{const l=i.length>1?`${o}-${r}`:o;return a.createElement(N.F.div,{key:l,"data-key":l,"data-grammarly-part":"highlight",style:t.pipe(d.U((t=>function(e,t){return t?L(e,K(e)):e}({...s,height:Math.max(0,s.height+e)},t===E.pc.hovered)))),className:P.highlight},a.createElement(N.F.div,{className:t.pipe(d.U((e=>function(e,t){switch(e.apiKind){case x.j.Kind.readerDebugAnnotation:return(0,F.Sh)(P.background,P.debug).className;case x.j.Kind.readerMainPoint:case x.j.Kind.readerActionItem:return(0,F.Sh)(P.background,t&&P.hovered).className;default:(0,S.vE)(e.apiKind)}}(n,e===E.pc.hovered))))}))})));function K(e){return.1*e.height}function L(e,t){return{top:e.top-t,left:e.left-t,width:e.width+2*t,height:e.height+2*t}}const T=({highlights:e,getHoverState:t})=>a.createElement(M.Y,{key:"reader-highlights",highlightHeightOffset:0,highlights:e.geometry.view((e=>Array.from(e.values()))),getHoverState:t,highlightRenderer:(e,t,n)=>a.createElement(R,{key:e.meta.highlightId,id:e.meta.highlightId,rects:e.rects,heightOffset:n,hoverState:t.pipe(b.O(E.pc.none),U.x()),annotation:e.meta.annotation})});class A{constructor(e,t,n,i,o){this._layout=e,this._highlights=t,this._annotationCards=n,this._getHoveredStateBehavior=i,this._getEnv=o,this.highlights=()=>a.createElement(C.L,{chunkName:"readerGmailV1ThreadIntegration"},a.createElement(N.F.div,{style:this._layout.textNode.scrollSize.behavior.pipe(d.U((e=>({height:e.height,width:e.width}))))},a.createElement(T,{highlights:this._highlights,getHoverState:e=>this._getHoveredStateBehavior(e)}))),this.innerElements=()=>a.createElement(v.y,{env:this._getEnv()},a.createElement(_.L,null),a.createElement(N.F.Fragment,null,this._annotationCards))}}var B,O,G=n(17771),V=n(45614),z=n(23923),H=n(85985);!function(e){let t;!function(e){e.setRecapBarPopup="setRecapBarPopup",e.toggleInlineHighlights="toggleInlineHighlights",e.setItemMenuVisibleFor="setItemMenuVisibleFor",e.setHighlightMenuVisibleFor="setHighlightMenuVisibleFor",e.highlightMenuHovered="highlightMenuHovered",e.toggleRecapBar="toggleRecapBar",e.reply="reply",e.replyResult="replyResult",e.setItemChecked="setItemChecked",e.replyToItem="replyToItem",e.replyToItemResult="replyToItemResult",e.copyItem="copyItem",e.copyItemResult="copyItemResult",e.removeItem="removeItem",e.itemFeedback="itemFeedback",e.toggleItemFeedbackMenu="toggleItemFeedbackMenu",e.showAnyway="showAnyway",e.toggleReplyPanelExpanded="toggleReplyPanelExpanded",e.toggleReplyPanelMode="toggleReplyPanelMode",e.learnMoreLinkVisited="learnMoreLinkVisited",e.optInTryItOutModal="optInTryItOutModal",e.optInTryItOutModalResult="optInTryItOutModalResult",e.optInDismissModal="optInDismissModal",e.optInDismissModalResult="optInDismissModalResult",e.genericFeedbackModal="genericFeedbackModal",e.genericFeedbackModalResult="genericFeedbackModalResult",e.itemFeedbackModalResult="itemFeedbackModalResult",e.recapMenuItemClick="recapMenuItemClick",e.aboutRecapModal="aboutRecapModal",e.aboutRecapModalResult="aboutRecapModalResult",e.turnOffRecapModal="turnOffRecapModal",e.turnOffRecapModalResult="turnOffRecapModalResult",e.dataCollectionPolicyLinkVisited="dataCollectionPolicyLinkVisited",e.termsOfServiceLinkVisited="termsOfServiceLinkVisited",e.privacyPolicyLinkVisited="privacyPolicyLinkVisited",e.highlightHover="highlightHover",e.showNotification="showNotification",e.dismissNotification="dismissNotification",e.onboardingAnchorMounted="onboardingAnchorMounted",e.onboardingAnchorUnmounted="onboardingAnchorUnmounted",e.onboardingSetKind="onboardingSetKind",e.onboardingShown="onboardingShown",e.onboardingNext="onboardingNext",e.onboardingPrev="onboardingPrev",e.onboardingDismiss="onboardingDismiss",e.panelScroll="panelScroll",e.panelOverflow="panelOverflow"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e}}(B||(B={})),(0,S.L0)(void 0),function(e){e.ofType=function(e){return H.h(B.is(e))},e.ofDocId=function(e){return H.h((({docId:t})=>t===e))},e.ofUIMode=function(e){return H.h((({uiMode:t})=>t===e))}}(O||(O={}));var D,Z,j=n(14601),Y=n(83078),q=n(5114),W=n(71249),Q=n(38983);function $(e){return(t,n)=>a=>(0,i.zG)(a,o.cq(e)(t,(0,i.ls)(q.some,n)),q.getOrElse((()=>(0,i.zG)(a,o.ZQ(e)(t,n(q.none))))))}function J(e,t,n,o,a){const s=n||o;return(q.isNone(t.lowQualityInfo)||t.showLowQualityContentRequested)&&(0,i.zG)(X(e,t,s),Y.FX(!1))?(0,i.zG)(t.highlightsEnabled,q.alt((()=>q.some(s))),q.filter((()=>a))):q.none}function X(e,t,n){return(0,i.zG)(t.recapBarToggledByUser,q.map((e=>"compact"===e)),q.alt((()=>e.recapHidden?q.some(!0):q.none)),q.alt((()=>(0,i.zG)(t.goodForAnnotations,q.filter((e=>!e)),q.map(i.W8)))),q.alt((()=>(0,i.zG)(t.lowQualityInfo,q.map(i.W8)))),q.alt((()=>"idle"===t.checkingState?q.some(!n):q.none)))}!function(e){e.empty=function(){return{highlightsEnabled:q.none,recapBarToggledByUser:q.none,showLowQualityContentRequested:!1,lowQualityInfo:q.none,goodForAnnotations:q.none,checkingState:"initial"}}}(D||(D={})),function(e){let t;!function(e){e.empty=function(){return{docs:new Map,thread:{recapHidden:!1}}}}(t=e.State||(e.State={}));e.Impl=class{constructor(e,n,a,s,r){this._actions=e,this._csActions=n,this._readerCSState=a,this._telemetry=r,this._subscriptions=new j.w,this._state=Q.h.create(t.empty()),this.state=this._state.view(),this._subscriptions.add(s.docInfo.subscribe((e=>this._state.lens("docs").modify((t=>(0,i.zG)(Array.from(e.values()),W.u4(t,((e,t)=>$(z.eo.eq)(t.docId,this._updateDocState(t.docId,{lowQualityInfo:t.filtered,goodForAnnotations:q.some(t.goodForAnnotations)}))(e))))))))),this._subscriptions.add(this._readerCSState.view((e=>"optedIn"===e.kind?e.docs:{})).subscribe((e=>this._state.lens("docs").modify((t=>(0,i.zG)(V.qo(e||{}),W.u4(t,((e,[t,n])=>$(z.eo.eq)(t,this._updateDocState(t,{highlightsEnabled:q.fromNullable(n.highlightsEnabled)}))(e)))))))));const l=new Set;this._subscriptions.add(s.pendingUpdates.subscribe((e=>{this._state.lens("docs").modify((t=>{const n=new Set(e.keys());return n.forEach((e=>l.add(e))),(0,i.zG)(Array.from(n),W.u4(t,((e,t)=>$(z.eo.eq)(t,this._updateDocState(t,{checkingState:"inProgress"}))(e))),o.Su(((e,t)=>({...t,checkingState:!n.has(e)&&l.has(e)?"idle":t.checkingState}))))}))}))),this._subscriptions.add(this._handleInlineHighlightsToggle()),this._subscriptions.add(this._handleShowAnyway()),this._subscriptions.add(this._handleToggleRecapBar()),this._subscriptions.add(this._handleHideRecap())}_handleInlineHighlightsToggle(){return this._actions.pipe(O.ofType(B.Kind.toggleInlineHighlights)).subscribe((({docId:e,enabled:t})=>{this._csActions.readerV1ToggleInlineHighlights({docId:e,enabled:t}).catch(this._onHandleReject("CSActions.toggleReaderInlineHighlights"))}))}_handleShowAnyway(){return this._actions.pipe(O.ofType(B.Kind.showAnyway)).subscribe((({docId:e})=>this._state.lens("docs").modify($(z.eo.eq)(e,this._updateDocState(e,{showLowQualityContentRequested:!0})))))}_handleToggleRecapBar(){return this._actions.pipe(O.ofType(B.Kind.toggleRecapBar)).subscribe((({docId:e,isCompact:t})=>this._state.lens("docs").modify($(z.eo.eq)(e,this._updateDocState(e,{recapBarToggledByUser:q.some(t?"compact":"full")})))))}_handleHideRecap(){return this._actions.pipe(O.ofType(B.Kind.turnOffRecapModalResult),H.h((({result:e})=>"hideRecap"===e))).subscribe((()=>this._state.modify((e=>({thread:{recapHidden:!0},docs:(0,i.zG)(e.docs,o.UI((e=>({...e,recapBarToggledByUser:q.none}))))})))))}_emptyDocState(e){var t,n;return{...D.empty(),highlightsEnabled:q.fromNullable(null===(n=null===(t=this._readerCSState.view((e=>"optedIn"===e.kind?e.docs:{})).get())||void 0===t?void 0:t[e])||void 0===n?void 0:n.highlightsEnabled)}}_updateDocState(e,t){return n=>({...this._emptyDocState(e),...(0,i.zG)(n,q.getOrElse((()=>({})))),...t})}_onHandleReject(e){return t=>{const n=`${e} promise rejection: ${String(t)}`;this._telemetry.readerGmail.warning("promiseRejection",n,t)}}dispose(){this._subscriptions.unsubscribe()}}}(Z||(Z={}));var ee=n(2834),te=n(55415),ne=n(16027),ie=n(90361),oe=n(86133),ae=n(90845),se=n(61922),re=n(60797);const le={panelScrollEventThrottleTime:200,enableInlineHighlights:"Show highlights",disableInlineHighlights:"Hide highlights",followUps:{doneNotification:"Done!"},recapBar:{optIn:{content:"Grammarly can now summarize emails, including this one!",tryItOutButton:"Try it out",learnMoreLabel:"Learn more",learnMoreLink:"https://www.grammarly.com/recap",dismissButton:"Dismiss"},logoTooltips:{hide:"Hide recap",show:"Show recap",loading:"",noSummary:"",noSummaryMessageTooShort:"",contentIsLowQuality:""},zeroStates:{contentIsLowQuality:"This recap may not be useful to you.",showAnyway:"Show anyway",noSummary:"We don’t have a summary for this message.",noSummaryMessageTooShort:"We don’t have a summary for this message."},followUps:{buttonTitle:{singular:"follow-up",plural:"follow-ups"}},keyPoints:{buttonTitle:{singular:"key point",plural:"key points"}},all:{buttonTitle:"All"},settingsMenu:{buttonTitle:"Actions",menuTitle:"Actions Menu",hide:"Hide email recap",show:"Show email recap",about:"About email recap",feedback:"Give feedback",disable:"Turn off email recap"},highlightsSwitch:{label:"Highlights"}},hintButton:{title:"What’s this?"},reply:"Reply",itemMenu:{buttonTitle:"Actions",actions:{reply:"Reply to this",copy:"Copy",remove:"Remove"}},itemFeedback:{button:{action:"Give Feedback",good:"This is helpful",bad:"This is not helpful"},popup:{good:"Helpful",bad:"Not helpful"}},highlightMenu:{actions:{reply:"Reply to this",copy:"Copy",remove:"Remove highlight"},logoTooltip:"Highlighted by Grammarly"},replyPanel:{show:"Show",hide:"Hide",expand:"Expand",collapse:"Collapse",compact:{followUps:{singular:"follow-up",plural:"follow-ups",suffix:"to consider."},keyPoints:{content:"Refresh your memory.",action:"Show key points"}},header:{followUps:{singular:"Consider responding to this",plural:"Consider responding to these"},keyPoints:{singular:"key point",plural:"key points"}},content:{followUps:{singular:"follow-up",plural:"follow-ups"},keyPoints:{singular:"key point",plural:"key points"}}},aboutRecapModal:{title:"Spend less time in your inbox with email summarization",closeButton:"Close",takeATourButton:"Take a tour",body:e=>a.createElement(a.Fragment,null,a.createElement("p",null,"Push back on information overload with email recap, a new feature from Grammarly that helps you read more effectively and write sharper replies."),a.createElement("p",null,"Grammarly analyzes emails in seconds, smartly picking out and highlighting the takeaways and action items so you can focus your time and energy where it matters most."," ",a.createElement("a",{href:"https://www.grammarly.com/recap",target:"_blank",rel:"noreferrer",onClick:e.onLearMoreLinkClick},"Learn more")))},turnOffRecapModal:{title:"Turn off email recap?",hideRecapButton:"Hide recap",turnOffRecapButton:"Turn off recap",body:()=>a.createElement(a.Fragment,null,a.createElement("p",null,"This will completely deactivate the feature."),a.createElement("p",null,a.createElement("b",null,"Hide recap")," instead if you would rather not see it for now, but still want the option to expand it later."))},optInDismissModal:{title:"Should we show this message again later?",yesButton:"Yes",noButton:"No"},optInTryItOutModal:{title:"Spend less time in your inbox with email summarization",notNowButton:"Not now",declineButton:"Decline",continueButton:"Continue",body:e=>a.createElement(a.Fragment,null,a.createElement("p",null,"Push back on information overload with Grammarly’s email recap, a feature that helps you read more effectively and write sharper replies."),a.createElement("p",null,"Before we can deliver AI-powered summaries, Grammarly needs permission to collect and process the text, subject line, and metadata of your email threads. We handle that data securely and never sell or rent user data. You can opt out at any time by deactivating the feature within the Grammarly for Chrome extension settings."),a.createElement("p",null,"By continuing, you grant Grammarly permission to collect data according to our"," ",a.createElement("a",{href:"https://www.grammarly.com/recap#sectionGroup_3sdszga28v553MzgysHnCL",target:"_blank",rel:"noreferrer",onClick:e.onDataCollectionPolicyLinkClick},"data collection policy"),". We also provide additional information about Grammarly’s general data policies in our"," ",a.createElement("a",{href:"https://www.grammarly.com/terms",target:"_blank",rel:"noreferrer",onClick:e.onTermsOfServiceLinkClick},"Terms of Service")," ","and"," ",a.createElement("a",{href:"https://www.grammarly.com/privacy-policy",target:"_blank",rel:"noreferrer",onClick:e.onPrivacyPolicyLinkClick},"Privacy Policy"),"."))},genericFeedbackModal:{title:"Is Grammarly Recap helpful?",textBoxPlaceholder:"How can we improve?",textBoxAriaLabel:"Feedback text",requiredLabel:"Required",cancel:"Cancel",sendFeedback:"Send feedback",ratings:["It’s not helpful","It could be better","It’s okay","It’s pretty helpful","It’s great"]},itemFeedbackModal:{title:"Thank you for rating!",description:"We’d love to hear what you liked or disliked so we can improve this feature.",textBoxHeader:"Feedback",textBoxPlaceholder:"Share your thoughts",textBoxAriaLabel:"Feedback text",requiredLabel:"Required",skip:"Skip",sendFeedback:"Send feedback"},toastNotifications:{textCopiedSuccess:"Copied",feedbackSubmittedSuccess:"Thank you for your feedback!"},lastingNotifications:{optInDismissShowLaterYes:{title:"We’ll show the message about recap later.",body:"You can try email recaps at any time through the Grammarly for Chrome extension settings.",closeButton:"Close"},optInDismissShowLaterNo:{title:"Ok, we’ll stop showing these messages for a while.",body:"You can try email recaps at any time through the Grammarly for Chrome extension settings.",closeButton:"Close"},turnOffRecap:{title:"Email recap is now off",body:"You can turn it back on at any time through the Grammarly for Chrome extension settings.",closeButton:"Close"}},onboarding:{buttons:{prev:"Back",next:"Next",close:"Close"},firstHighlight:{header:"Never miss the point",content:"The most important sentences have been highlighted for you."},highlightMenu:{header:"Put highlights to use",content:"Click to open actions like copying and replying."},recapBar:{header:"View the full recap",content:"Expand the panel to access email summaries, handy follow-up checklists, and more."},recapBarMenu:{header:"Hide email recaps",content:"You can collapse recap content when you don’t need it or turn the feature off completely."},followUps:{header:"Tackle action items",content:"Review any questions and tasks raised by the email."},draftReply:{header:"Ready to write back?",content:"Open the reply field and start drafting away."},keyPoints:{header:"Short on time?",content:"Stay up to date with 1–5 of the email’s top takeaways."},checkItem:{header:"Mark completed tasks",content:"While drafting a reply, use the checklist to keep track of what’s left to address."},itemMenu:{header:"Quote the source",content:"Reference a specific detail or sentence by pasting it directly into your reply."}}};var ce,de=n(25262);!function(e){e.Reply=({className:e,width:t=24})=>a.createElement(se.a1,{className:e,width:t,viewBox:"0 0 24 24"},a.createElement("path",{d:"M14 17.5C13.7239 17.5 13.5 17.2761 13.5 17C13.5 16.7239 13.7239 16.5 14 16.5V17.5ZM5.5 11.5C5.5 11.7761 5.27614 12 5 12C4.72386 12 4.5 11.7761 4.5 11.5H5.5ZM10 16.5C10.2761 16.5 10.5 16.7239 10.5 17C10.5 17.2761 10.2761 17.5 10 17.5V16.5ZM3 17L2.64645 17.3536L2.29289 17L2.64645 16.6464L3 17ZM5.64645 13.6464C5.84171 13.4512 6.15829 13.4512 6.35355 13.6464C6.54882 13.8417 6.54882 14.1583 6.35355 14.3536L5.64645 13.6464ZM6.35355 19.6464C6.54882 19.8417 6.54882 20.1583 6.35355 20.3536C6.15829 20.5488 5.84171 20.5488 5.64645 20.3536L6.35355 19.6464ZM12.7071 12.2929L12.3536 11.9393L12.7071 12.2929ZM18.2909 6.00195C18.4862 5.80668 18.8028 5.80668 18.9981 6.00195C19.1933 6.19721 19.1933 6.51379 18.9981 6.70905L18.2909 6.00195ZM5.00195 6.70905C4.80668 6.51379 4.80668 6.19721 5.00195 6.00195C5.19721 5.80668 5.51379 5.80668 5.70905 6.00195L5.00195 6.70905ZM11.2929 12.2929L11.6464 11.9393L11.2929 12.2929ZM18 6.5H6V5.5H18V6.5ZM18.5 16V7H19.5V16H18.5ZM14 16.5H18V17.5H14V16.5ZM5.5 7V11.5H4.5V7H5.5ZM19.5 16C19.5 16.8284 18.8284 17.5 18 17.5V16.5C18.2761 16.5 18.5 16.2761 18.5 16H19.5ZM6 6.5C5.72386 6.5 5.5 6.72386 5.5 7H4.5C4.5 6.17157 5.17157 5.5 6 5.5V6.5ZM18 5.5C18.8284 5.5 19.5 6.17157 19.5 7H18.5C18.5 6.72386 18.2761 6.5 18 6.5V5.5ZM10 17.5H3V16.5H10V17.5ZM2.64645 16.6464L5.64645 13.6464L6.35355 14.3536L3.35355 17.3536L2.64645 16.6464ZM3.35355 16.6464L6.35355 19.6464L5.64645 20.3536L2.64645 17.3536L3.35355 16.6464ZM12.3536 11.9393L18.2909 6.00195L18.9981 6.70905L13.0607 12.6464L12.3536 11.9393ZM5.70905 6.00195L11.6464 11.9393L10.9393 12.6464L5.00195 6.70905L5.70905 6.00195ZM13.0607 12.6464C12.4749 13.2322 11.5251 13.2322 10.9393 12.6464L11.6464 11.9393C11.8417 12.1346 12.1583 12.1346 12.3536 11.9393L13.0607 12.6464Z",fill:"inherit",stroke:"none"})),e.Feedback=({className:e,width:t=24})=>a.createElement(se.a1,{className:e,width:t,viewBox:"0 0 24 24"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 8C3.5 6.61929 4.61929 5.5 6 5.5H18C19.3807 5.5 20.5 6.61929 20.5 8V14.3429C20.5 15.7236 19.3807 16.8429 18 16.8429H10.3884L6.16667 19.9979V16.8429H6C4.61929 16.8429 3.5 15.7236 3.5 14.3429V8ZM6 6.5C5.17157 6.5 4.5 7.17157 4.5 8V14.3429C4.5 15.1713 5.17157 15.8429 6 15.8429H7.16667V18.0021L10.056 15.8429H18C18.8284 15.8429 19.5 15.1713 19.5 14.3429V8C19.5 7.17157 18.8284 6.5 18 6.5H6ZM17 10H7V9H17V10ZM17 13H7V12H17V13Z",fill:"inherit",stroke:"none"})),e.ThumbsDown=({className:e,width:t=18})=>a.createElement(se.a1,{className:e,width:t,viewBox:"-1 -1 22 20"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.94506 1.49087L3.94129 1.49999L1.22638 7.89292C1.06797 8.31105 1.03966 8.85929 1.01631 9.57841L1.01618 9.58249C1.01167 9.72126 1.00697 9.8662 1.00031 10.0091C1.00591 10.1675 1.08822 10.3603 1.28344 10.5353C1.48809 10.7188 1.74942 10.8182 1.97538 10.8182H8.88923L7.78363 16.1831C7.74404 16.3671 7.78727 16.6111 7.90957 16.807C7.92806 16.8367 7.94592 16.8618 7.96283 16.883C7.97026 16.8765 7.97776 16.87 7.98532 16.8633C8.08412 16.7763 8.18009 16.6875 8.25236 16.6196C8.28819 16.5859 8.31747 16.558 8.33751 16.5387L8.36015 16.5169L8.36114 16.516L13.3603 11.4772C13.5028 11.3373 13.5926 11.1398 13.5926 10.9091V1.81818C13.5926 1.57101 13.483 1.34726 13.3061 1.1944C13.1632 1.07085 12.9836 1 12.7901 1H4.67906C4.66798 1 4.6565 1.00023 4.64528 1.00068M9.06411 17.2273C9.06411 17.2273 8.27026 18 8.10374 18C7.25484 18 6.60509 16.9062 6.80597 15.9727L7.66214 11.8182H1.97538C0.984023 11.8182 0 10.9917 0 9.9917C0.0070643 9.84692 0.0119094 9.6977 0.0168363 9.54596C0.039042 8.86205 0.0629075 8.12702 0.299089 7.51818L3.0208 1.10909C3.03813 1.06714 3.05698 1.02601 3.07728 0.985763C3.28437 0.575142 3.64235 0.257042 4.07809 0.102666C4.2438 0.0439576 4.42076 0.00892764 4.60495 0.00149288C4.62942 0.000509854 4.65435 0 4.67906 0H12.7901C13.2356 0 13.6447 0.165198 13.9601 0.437858C14.3466 0.771997 14.5926 1.26752 14.5926 1.81818V10.9091C14.5926 11.4091 14.3943 11.8636 14.0609 12.1909L9.06411 17.2273ZM4.64528 1.00068C4.56232 1.00405 4.48416 1.01971 4.41203 1.04526C4.22152 1.11276 4.06246 1.25304 3.97014 1.43608C3.96113 1.45395 3.95276 1.47222 3.94506 1.49087M17.3951 1V9.90909H19V1H17.3951ZM16.3951 0.75C16.3951 0.335787 16.7308 0 17.1451 0H19.25C19.6642 0 20 0.335786 20 0.75V10.1591C20 10.5733 19.6642 10.9091 19.25 10.9091H17.1451C16.7308 10.9091 16.3951 10.5733 16.3951 10.1591V0.75Z",fill:"inherit",stroke:"none"})),e.ThumbsUp=({className:e,width:t=18})=>a.createElement(se.a1,{className:e,width:t,viewBox:"-1 -1 22 20"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.0549 16.5091L16.0587 16.5L18.7736 10.1071C18.932 9.68895 18.9603 9.14071 18.9837 8.42159L18.9838 8.41751C18.9883 8.27874 18.993 8.1338 18.9997 7.99095C18.9941 7.83251 18.9118 7.63967 18.7166 7.46467C18.5119 7.28121 18.2506 7.18182 18.0246 7.18182L11.1108 7.18182L12.2164 1.8169C12.256 1.63292 12.2127 1.38894 12.0904 1.19295C12.0719 1.16332 12.0541 1.13822 12.0372 1.11697C12.0297 1.12346 12.0222 1.13004 12.0147 1.13671C11.9159 1.22375 11.8199 1.31246 11.7476 1.38043C11.7118 1.41412 11.6825 1.44205 11.6625 1.46127L11.6399 1.48305L11.6389 1.48402L6.63965 6.52285C6.49717 6.66269 6.40741 6.86024 6.40741 7.09091L6.40741 16.1818C6.40741 16.429 6.51702 16.6527 6.69386 16.8056C6.83679 16.9291 7.01641 17 7.20987 17L15.3209 17C15.332 17 15.3435 16.9998 15.3547 16.9993M10.9359 0.772727C10.9359 0.772727 11.7297 -7.23009e-07 11.8963 -7.08451e-07C12.7452 -6.34238e-07 13.3949 1.09375 13.194 2.02727L12.3379 6.18182L18.0246 6.18182C19.016 6.18182 20 7.0083 20 8.0083C19.9929 8.15308 19.9881 8.3023 19.9832 8.45404C19.961 9.13795 19.9371 9.87298 19.7009 10.4818L16.9792 16.8909C16.9619 16.9329 16.943 16.974 16.9227 17.0142C16.7156 17.4249 16.3577 17.743 15.9219 17.8973C15.7562 17.956 15.5792 17.9911 15.395 17.9985C15.3706 17.9995 15.3456 18 15.3209 18L7.20987 18C6.76441 18 6.35535 17.8348 6.03991 17.5621C5.65335 17.228 5.40741 16.7325 5.40741 16.1818L5.40741 7.09091C5.40741 6.59091 5.60568 6.13636 5.93913 5.80909L10.9359 0.772727ZM15.3547 16.9993C15.4377 16.996 15.5158 16.9803 15.588 16.9547C15.7785 16.8872 15.9375 16.747 16.0299 16.5639C16.0389 16.5461 16.0472 16.5278 16.0549 16.5091M2.60495 17L2.60495 8.09091L1.00003 8.09091L1.00003 17L2.60495 17ZM3.60495 17.25C3.60495 17.6642 3.26916 18 2.85495 18L0.750031 18C0.335817 18 3.05469e-05 17.6642 3.05831e-05 17.25L3.14057e-05 7.84091C3.14419e-05 7.4267 0.335818 7.09091 0.750031 7.09091L2.85495 7.09091C3.26916 7.09091 3.60495 7.4267 3.60495 7.84091L3.60495 17.25Z",fill:"inherit",stroke:"none"})),e.ThumbsDownFilled=({className:e,width:t=18})=>a.createElement(se.a1,{className:e,width:t,viewBox:"-1 -1 22 20"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.0208 1.10909C3.03813 1.06714 3.05698 1.02601 3.07728 0.985763C3.28437 0.575142 3.64235 0.257042 4.07809 0.102666C4.2438 0.0439576 4.42076 0.00892764 4.60495 0.00149288C4.62942 0.000509854 4.65435 0 4.67906 0H12.7901C13.2356 0 13.6447 0.165198 13.9601 0.437858C14.3466 0.771997 14.5926 1.26752 14.5926 1.81818V10.9091C14.5926 11.4091 14.3943 11.8636 14.0609 12.1909L9.06411 17.2273C9.06411 17.2273 8.27026 18 8.10374 18C7.25484 18 6.60509 16.9062 6.80597 15.9727L7.66214 11.8182H1.97538C0.984023 11.8182 0 10.9917 0 9.9917C0.0070643 9.84692 0.0119094 9.6977 0.0168363 9.54596C0.039042 8.86205 0.0629075 8.12702 0.299089 7.51818L3.0208 1.10909Z",fill:"inherit",stroke:"none"}),a.createElement("path",{d:"M17.1451 0C16.7308 0 16.3951 0.335787 16.3951 0.75V10.1591C16.3951 10.5733 16.7308 10.9091 17.1451 10.9091H19.25C19.6642 10.9091 20 10.5733 20 10.1591V0.75C20 0.335786 19.6642 0 19.25 0H17.1451Z",fill:"inherit",stroke:"none"})),e.ThumbsUpFilled=({className:e,width:t=18})=>a.createElement(se.a1,{className:e,width:t,viewBox:"-1 -1 22 20"},a.createElement("path",{d:"M16.9792 16.8909C16.9618 16.9329 16.943 16.974 16.9227 17.0142C16.7156 17.4249 16.3576 17.743 15.9219 17.8973C15.7562 17.956 15.5792 17.9911 15.395 17.9985C15.3706 17.9995 15.3456 18 15.3209 18L7.20984 18C6.76438 18 6.35532 17.8348 6.03988 17.5621C5.65332 17.228 5.40738 16.7325 5.40738 16.1818L5.40738 7.09091C5.40738 6.59091 5.60565 6.13636 5.9391 5.80909L10.9359 0.772727C10.9359 0.772727 11.7297 0 11.8962 0C12.7451 0 13.3949 1.09375 13.194 2.02727L12.3378 6.18182L18.0246 6.18182C19.0159 6.18182 20 7.0083 20 8.0083C19.9929 8.15308 19.9881 8.3023 19.9831 8.45404C19.9609 9.13795 19.9371 9.87298 19.7009 10.4818L16.9792 16.8909Z",fill:"inherit",stroke:"none"}),a.createElement("path",{d:"M2.85492 18C3.26913 18 3.60492 17.6642 3.60492 17.25L3.60492 7.84091C3.60492 7.4267 3.26913 7.09091 2.85492 7.09091L0.750001 7.09091C0.335788 7.09091 0 7.42669 0 7.84091V17.25C0 17.6642 0.335787 18 0.75 18H2.85492Z",fill:"inherit",stroke:"none"})),e.Hide=({className:e,width:t=24})=>a.createElement(se.a1,{className:e,width:t,viewBox:"0 0 24 24"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.49205 10.5522C4.73941 10.4295 5.03944 10.5305 5.16218 10.7779C7.91042 16.3166 16.0896 16.3166 18.8378 10.7779C18.9606 10.5305 19.2606 10.4295 19.508 10.5522C19.7553 10.675 19.8563 10.975 19.7336 11.2223C16.6178 17.5018 7.38215 17.5018 4.26639 11.2223C4.14365 10.975 4.24468 10.675 4.49205 10.5522ZM5.06784 13.8847C5.2631 14.0799 5.2631 14.3965 5.06784 14.5918L3.85355 15.806C3.65829 16.0013 3.34171 16.0013 3.14645 15.806C2.95118 15.6108 2.95118 15.2942 3.14645 15.0989L4.36073 13.8847C4.55599 13.6894 4.87258 13.6894 5.06784 13.8847ZM18.9322 13.8847C19.1274 13.6894 19.444 13.6894 19.6393 13.8847L20.8536 15.0989C21.0488 15.2942 21.0488 15.6108 20.8536 15.806C20.6583 16.0013 20.3417 16.0013 20.1464 15.806L18.9322 14.5918C18.7369 14.3965 18.7369 14.0799 18.9322 13.8847ZM8.17599 16.2196C8.42298 16.3431 8.52309 16.6434 8.39959 16.8904L7.59007 18.5094C7.46658 18.7564 7.16624 18.8565 6.91925 18.733C6.67226 18.6095 6.57215 18.3092 6.69564 18.0622L7.50517 16.4432C7.62866 16.1962 7.929 16.0961 8.17599 16.2196ZM15.824 16.2196C16.071 16.0961 16.3713 16.1962 16.4948 16.4432L17.3044 18.0622C17.4279 18.3092 17.3277 18.6095 17.0807 18.733C16.8338 18.8565 16.5334 18.7564 16.4099 18.5094L15.6004 16.8904C15.4769 16.6434 15.577 16.3431 15.824 16.2196ZM12 16.9763C12.2762 16.9763 12.5 17.2001 12.5 17.4763V19.0953C12.5 19.3715 12.2762 19.5953 12 19.5953C11.7239 19.5953 11.5 19.3715 11.5 19.0953V17.4763C11.5 17.2001 11.7239 16.9763 12 16.9763Z",fill:"inherit",stroke:"none"})),e.Show=({className:e,width:t=24})=>a.createElement(se.a1,{className:e,width:t,viewBox:"0 0 24 24"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.333 11.1961C16.1813 5.6013 7.81872 5.6013 4.66699 11.1961C4.60002 11.315 4.60002 11.4628 4.66699 11.5817C7.81872 17.1765 16.1813 17.1765 19.333 11.5817C19.4 11.4628 19.4 11.315 19.333 11.1961ZM3.79573 10.7053C7.32991 4.43157 16.6701 4.43158 20.2043 10.7053C20.4429 11.1289 20.4429 11.6489 20.2043 12.0725C16.6701 18.3462 7.32991 18.3462 3.79572 12.0725C3.5571 11.6489 3.55711 11.1289 3.79573 10.7053Z",fill:"inherit",stroke:"none"}),a.createElement("path",{d:"M14.6667 11.3889C14.6667 12.8616 13.4728 14.0556 12 14.0556C10.5272 14.0556 9.33333 12.8616 9.33333 11.3889C9.33333 9.91613 10.5272 8.72222 12 8.72222C13.4728 8.72222 14.6667 9.91613 14.6667 11.3889Z",fill:"inherit",stroke:"none"})),e.Info=({className:e,width:t=24})=>a.createElement(se.a1,{className:e,width:t,viewBox:"0 0 24 24"},a.createElement("path",{d:"M12.5,11.273C12.5,10.997 12.276,10.773 12,10.773C11.724,10.773 11.5,10.997 11.5,11.273L11.5,15.636C11.5,15.913 11.724,16.136 12,16.136C12.276,16.136 12.5,15.913 12.5,15.636L12.5,11.273ZM12.5,8.349C12.5,8.073 12.276,7.849 12,7.849C11.724,7.849 11.5,8.073 11.5,8.349L11.5,8.364C11.5,8.64 11.724,8.864 12,8.864C12.276,8.864 12.5,8.64 12.5,8.364L12.5,8.349ZM20,12C20,7.582 16.418,4 12,4C7.582,4 4,7.582 4,12C4,16.418 7.582,20 12,20C16.418,20 20,16.418 20,12ZM19,12C19,15.866 15.866,19 12,19C8.134,19 5,15.866 5,12C5,8.134 8.134,5 12,5C15.866,5 19,8.134 19,12Z",fill:"inherit",stroke:"none",fillRule:"evenodd"})),e.Disable=({className:e,width:t=24})=>a.createElement(se.a1,{className:e,width:t,viewBox:"0 0 24 24"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4.30078C12.2761 4.30078 12.5 4.52464 12.5 4.80078V11.9085C12.5 12.1846 12.2761 12.4085 12 12.4085C11.7239 12.4085 11.5 12.1846 11.5 11.9085V4.80078C11.5 4.52464 11.7239 4.30078 12 4.30078ZM9.43113 6.37798C9.57099 6.61608 9.49134 6.92248 9.25323 7.06234C7.60863 8.02833 6.5 9.83543 6.5 11.9085C6.5 15.0042 8.9696 17.5008 12 17.5008C15.0304 17.5008 17.5 15.0042 17.5 11.9085C17.5 9.83543 16.3914 8.02833 14.7468 7.06234C14.5087 6.92248 14.429 6.61608 14.5689 6.37798C14.7087 6.13987 15.0151 6.06022 15.2532 6.20008C17.1954 7.34087 18.5 9.47149 18.5 11.9085C18.5 15.5421 15.597 18.5008 12 18.5008C8.40298 18.5008 5.5 15.5421 5.5 11.9085C5.5 9.47149 6.80456 7.34087 8.74677 6.20008C8.98487 6.06022 9.29127 6.13987 9.43113 6.37798Z",fill:"inherit",stroke:"none"})),e.InlineHighlightsDisabled=({className:e,width:t=24})=>a.createElement(se.a1,{className:e,width:t,viewBox:"0 0 24 24"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.9392 4.35352C15.525 3.76774 16.4747 3.76774 17.0605 4.35352L20.596 7.88906C21.1818 8.47484 21.1818 9.42459 20.596 10.0104L20.193 10.4134C19.8413 10.2753 19.4734 10.1693 19.0929 10.0993L19.8889 9.30327C20.0842 9.10801 20.0842 8.79143 19.8889 8.59617L16.3534 5.06063C16.1581 4.86537 15.8416 4.86537 15.6463 5.06063L8.92878 11.7781L12.0928 14.9422C12.0317 15.2856 11.9999 15.6391 11.9999 16C11.9999 16.0903 12.0019 16.1801 12.0058 16.2694L8.22168 12.4853L7.29669 13.4102L7.1417 16.355L8.59455 17.8079L11.5393 17.6529L12.0992 17.093C12.1692 17.4735 12.2751 17.8414 12.4133 18.1931L12.1108 18.4957C12.0234 18.583 11.9068 18.6349 11.7835 18.6414L8.61634 18.8081L7.69134 19.7331C7.59757 19.8269 7.47039 19.8796 7.33778 19.8796L3.80226 19.8795C3.60003 19.8795 3.41771 19.7577 3.34032 19.5709C3.26293 19.384 3.30571 19.169 3.44871 19.026L6.14146 16.3332L6.30816 13.1661C6.31465 13.0427 6.36657 12.9261 6.45391 12.8388L14.9392 4.35352Z",stroke:"none"}),a.createElement("path",{d:"M23 16C23 18.7614 20.7614 21 18 21C15.2386 21 13 18.7614 13 16C13 13.2386 15.2386 11 18 11C20.7614 11 23 13.2386 23 16Z",fill:"none"}),a.createElement("line",{x1:"15.9571",y1:"13.8",x2:"20.25",y2:"18.0929",fill:"none",strokeLinecap:"round"}),a.createElement("line",{x1:"0.5",y1:"-0.5",x2:"6.57107",y2:"-0.5",transform:"matrix(-0.707107 0.707107 0.707107 0.707107 20.75 13.8)",fill:"none",strokeLinecap:"round"})),e.WarningBadge=({className:e,width:t=14})=>a.createElement(se.a1,{className:e,width:t,viewBox:"0 0 14 14"},a.createElement("line",{x1:"7",y1:"2",x2:"7",y2:"12",stroke:de.Z.gold80,fill:"none",strokeWidth:"2"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 7C13 10.3137 10.3137 13 7 13C3.68629 13 1 10.3137 1 7C1 3.68629 3.68629 1 7 1C10.3137 1 13 3.68629 13 7ZM6.25 3.625C6.25 3.21079 6.58579 2.875 7 2.875C7.41421 2.875 7.75 3.21079 7.75 3.625V7.375C7.75 7.78921 7.41421 8.125 7 8.125C6.58579 8.125 6.25 7.78921 6.25 7.375V3.625ZM7 11.125C7.51777 11.125 7.9375 10.7053 7.9375 10.1875C7.9375 9.66973 7.51777 9.25 7 9.25C6.48223 9.25 6.0625 9.66973 6.0625 10.1875C6.0625 10.7053 6.48223 11.125 7 11.125Z",fill:de.Z.gold0,stroke:"none"}),a.createElement("rect",{x:"0.5",y:"0.5",width:"13",height:"13",rx:"6.5",stroke:de.Z.gold80,fill:"none"})),e.ChevronDown=({className:e,width:t=24})=>a.createElement(se.a1,{className:e,width:t,viewBox:"0 0 24 24"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.14645 9.14645C6.34171 8.95118 6.65829 8.95118 6.85355 9.14645L12 14.2929L17.1464 9.14645C17.3417 8.95118 17.6583 8.95118 17.8536 9.14645C18.0488 9.34171 18.0488 9.65829 17.8536 9.85355L12 15.7071L6.14645 9.85355C5.95118 9.65829 5.95118 9.34171 6.14645 9.14645Z",fill:"inherit",stroke:"none"})),e.Expand=({className:e,width:t=32})=>a.createElement(se.a1,{className:e,width:t,viewBox:"0 0 32 32"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 7.29297L20.8536 12.1465C21.0488 12.3418 21.0488 12.6584 20.8536 12.8536C20.6583 13.0489 20.3417 13.0489 20.1464 12.8536L16 8.70718L11.8536 12.8536C11.6583 13.0489 11.3417 13.0489 11.1464 12.8536C10.9512 12.6584 10.9512 12.3418 11.1464 12.1465L16 7.29297ZM11.1464 19.1465C11.3417 18.9513 11.6583 18.9513 11.8536 19.1465L16 23.293L20.1464 19.1465C20.3417 18.9513 20.6583 18.9513 20.8536 19.1465C21.0488 19.3418 21.0488 19.6584 20.8536 19.8536L16 24.7072L11.1464 19.8536C10.9512 19.6584 10.9512 19.3418 11.1464 19.1465Z",fill:"inherit",stroke:"none"})),e.Collapse=({className:e,width:t=32})=>a.createElement(se.a1,{className:e,width:t,viewBox:"0 0 32 32"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.1464 7.14645C11.3417 6.95118 11.6583 6.95118 11.8536 7.14645L16 11.2929L20.1464 7.14645C20.3417 6.95118 20.6583 6.95118 20.8536 7.14645C21.0488 7.34171 21.0488 7.65829 20.8536 7.85355L16 12.7071L11.1464 7.85355C10.9512 7.65829 10.9512 7.34171 11.1464 7.14645ZM16 19.2929L20.8536 24.1464C21.0488 24.3417 21.0488 24.6583 20.8536 24.8536C20.6583 25.0488 20.3417 25.0488 20.1464 24.8536L16 20.7071L11.8536 24.8536C11.6583 25.0488 11.3417 25.0488 11.1464 24.8536C10.9512 24.6583 10.9512 24.3417 11.1464 24.1464L16 19.2929Z",fill:"inherit",stroke:"none"})),e.NotificationInfo=({className:e,width:t=24})=>a.createElement(se.a1,{className:e,width:t,viewBox:"0 0 24 24"},a.createElement("g",{fillRule:"evenodd"},a.createElement("circle",{cx:"12",cy:"12",r:"11.5",fill:"inherit"}),a.createElement("path",{stroke:"inherit",strokeWidth:"2",d:"M7.54 12.81l3.343 3.5 6.657-7.78",strokeLinecap:"round"}))),e.OnboardingHeader=({className:e,width:t=75,height:n=60})=>a.createElement(se.a1,{className:e,width:t,height:n,viewBox:"0 0 75 60"},a.createElement("g",null,a.createElement("rect",{x:"9",y:"9",width:"44",height:"48",rx:"4",fill:"#F9FAFF",stroke:"#0E101A"}),a.createElement("path",{d:"M17 25H50",stroke:"#0E101A",strokeLinecap:"round"}),a.createElement("path",{d:"M17 43H50",stroke:"#0E101A",strokeLinecap:"round"}),a.createElement("path",{d:"M17 34H50",stroke:"#0E101A",strokeLinecap:"round"}),a.createElement("g",{style:{mixBlendMode:"multiply"}},a.createElement("path",{d:"M15 32C15 30.8954 15.8954 30 17 30H51C52.1046 30 53 30.8954 53 32V36C53 37.1046 52.1046 38 51 38H17C15.8954 38 15 37.1046 15 36V32Z",fill:"#E1B3FF",fillOpacity:"0.8"})),a.createElement("rect",{x:"1",y:"1",width:"23",height:"16.4773",rx:"3",fill:"#FCE4EE",stroke:"#0E101A",strokeMiterlimit:"10"}),a.createElement("path",{d:"M1.49109 16.6091L8.59259 8.97734M23.5589 16.6091L16.3304 8.84091",stroke:"#0E101A",strokeMiterlimit:"10"}),a.createElement("path",{d:"M1.58459 1.83272L11.234 11.5454C11.9427 12.1834 13.0331 12.1834 13.6872 11.5454L23.3367 1.83272",stroke:"#0E101A",strokeMiterlimit:"10"}),a.createElement("g",{opacity:"0.15"},a.createElement("rect",{width:"6",height:"18",rx:"3",transform:"matrix(0.707107 -0.707107 -0.707107 -0.707107 67.3938 58.2764)",fill:"#0E101A",stroke:"#0E101A",strokeLinejoin:"round"}),a.createElement("circle",{r:"17.1092",transform:"matrix(-1 0 0 1 46.473 34.5272)",fill:"#0E101A",stroke:"#0E101A",strokeLinejoin:"round"})),a.createElement("mask",{id:"mask0_2641_61692",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"37",y:"18",width:"27",height:"27"},a.createElement("circle",{r:"12.6387",transform:"matrix(-1 0 0 1 50.6014 31.6072)",fill:"#DBEBFF",stroke:"#0E101A",strokeLinejoin:"round"})),a.createElement("g",{mask:"url(#mask0_2641_61692)"},a.createElement("rect",{x:"-0.199951",y:"-4.56667",width:"65.3333",height:"83.3",rx:"6.53333",fill:"white",stroke:"#0E101A",strokeWidth:"1.63333"}),a.createElement("path",{d:"M12.8666 31.3666H66.7666",stroke:"#0E101A",strokeLinecap:"round"}),a.createElement("g",{style:{mixBlendMode:"multiply"}},a.createElement("path",{d:"M9.59998 28.1C9.59998 26.2959 11.0625 24.8333 12.8666 24.8333H84.7333C86.5374 24.8333 88 26.2959 88 28.1V34.6333C88 36.4375 86.5374 37.9 84.7333 37.9H12.8666C11.0625 37.9 9.59998 36.4375 9.59998 34.6333V28.1Z",fill:"#E1B3FF"}))),a.createElement("rect",{width:"6",height:"18",rx:"3",transform:"matrix(0.707107 -0.707107 -0.707107 -0.707107 71.3938 55.2764)",fill:"#15C39A",stroke:"#0E101A",strokeLinejoin:"round"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M50.4729 48.6363C41.0238 48.6363 33.3638 40.9763 33.3638 31.5271C33.3638 22.078 41.0238 14.418 50.4729 14.418C59.9221 14.418 67.5821 22.078 67.5821 31.5271C67.5821 40.9763 59.9221 48.6363 50.4729 48.6363ZM50.5984 44.2492C43.6182 44.2492 37.9597 38.5907 37.9597 31.6105C37.9597 24.6303 43.6182 18.9718 50.5984 18.9718C57.5786 18.9718 63.2371 24.6303 63.2371 31.6105C63.2371 38.5907 57.5786 44.2492 50.5984 44.2492Z",fill:"#15C39A"}),a.createElement("path",{d:"M32.8638 31.5271C32.8638 41.2524 40.7477 49.1363 50.4729 49.1363V48.1363C41.3 48.1363 33.8638 40.7001 33.8638 31.5271H32.8638ZM50.4729 13.918C40.7477 13.918 32.8638 21.8019 32.8638 31.5271H33.8638C33.8638 22.3542 41.3 14.918 50.4729 14.918V13.918ZM68.0821 31.5271C68.0821 21.8019 60.1982 13.918 50.4729 13.918V14.918C59.6459 14.918 67.0821 22.3542 67.0821 31.5271H68.0821ZM50.4729 49.1363C60.1982 49.1363 68.0821 41.2524 68.0821 31.5271H67.0821C67.0821 40.7001 59.6459 48.1363 50.4729 48.1363V49.1363ZM37.4597 31.6105C37.4597 38.8668 43.3421 44.7492 50.5984 44.7492V43.7492C43.8944 43.7492 38.4597 38.3146 38.4597 31.6105H37.4597ZM50.5984 18.4718C43.3421 18.4718 37.4597 24.3542 37.4597 31.6105H38.4597C38.4597 24.9065 43.8944 19.4718 50.5984 19.4718V18.4718ZM63.7371 31.6105C63.7371 24.3542 57.8547 18.4718 50.5984 18.4718V19.4718C57.3024 19.4718 62.7371 24.9065 62.7371 31.6105H63.7371ZM50.5984 44.7492C57.8547 44.7492 63.7371 38.8668 63.7371 31.6105H62.7371C62.7371 38.3146 57.3024 43.7492 50.5984 43.7492V44.7492Z",fill:"#0E101A"})))}(ce||(ce={}));var ue,he=n(64757),me=n(86390);!function(e){e.Primary=({className:e,theme:t,compact:n,children:i,...o})=>a.createElement(he.zx.Primary,{...(0,F.Sh)(me.button,e,"dark"===t?me.dark:void 0,n?me.noPadding:void 0),...o},i),e.Secondary=({className:e,theme:t,compact:n,children:i,...o})=>a.createElement(he.zx.Ghost,{...(0,F.Sh)(me.button,me.secondary,e,"dark"===t?me.dark:void 0,n?me.noPadding:void 0),...o},i),e.Tertiary=({className:e,theme:t,compact:n,children:i,...o})=>a.createElement(he.zx.Tertiary,{...(0,F.Sh)(me.button,me.tertiary,e,"dark"===t?me.dark:void 0,n?me.noPadding:void 0),...o},i)}(ue||(ue={}));var pe,ge=n(77587);!function(e){let t;!function(e){const t=ne.UI.Node.make((({state:e,notify:t})=>{const{ref:n,onMount:i}=ae.P.useElWatcher();return ae.P.useSubscriptionTo(n.pipe(re.oA,h.M(e),ee.b((([e,{onboardingKind:n,stepName:i}])=>t({kind:"shown",onboardingKind:n,stepName:i})())))),a.createElement(N.F.Fragment,null,e.pipe(d.U((({stepName:e,stepsCount:n,currentStep:o})=>a.createElement("div",{className:ge.onboarding,key:e,ref:i},"firstHighlight"===e?a.createElement(ce.OnboardingHeader,{className:ge.onboardingIcon}):null,a.createElement("h1",{className:ge.onboardingHeader},le.onboarding[e].header),a.createElement("div",{className:ge.onboardingContent},le.onboarding[e].content),a.createElement("div",{className:ge.onboardingFooter},o>0?a.createElement(ue.Tertiary,{name:"prev",theme:"dark","aria-title":le.onboarding.buttons.prev,onClick:t({kind:"prev",stepName:e}),className:ge.onboardingFooterLeft},a.createElement(se.JO.Arrow,{direction:se.n4.left,width:12}),le.onboarding.buttons.prev):null,n>1?a.createElement("div",{className:ge.onboardingFooterCenter},o+1," of ",n):null,a.createElement(ue.Primary,{name:"next",theme:"dark","aria-title":le.onboarding.buttons.next,onClick:t({kind:o===n-1?"close":"next",stepName:e}),className:ge.onboardingFooterRight},o===n-1?le.onboarding.buttons.close:le.onboarding.buttons.next)),a.createElement(ue.Tertiary,{className:ge.onboardingClose,name:"close",theme:"dark",compact:!0,onClick:t({kind:"close",stepName:e})},a.createElement(se.JO.Close,null)))))))}));function n(e){return ne.Z.fromSideEffect((t=>{switch(t.kind){case"shown":e.actions.next({kind:B.Kind.onboardingShown,stepName:t.stepName,onboardingKind:t.onboardingKind,docId:e.state.get().docId});break;case"next":e.actions.next({kind:B.Kind.onboardingNext,stepName:t.stepName,docId:e.state.get().docId});break;case"prev":e.actions.next({kind:B.Kind.onboardingPrev,stepName:t.stepName,docId:e.state.get().docId});break;case"close":e.actions.next({kind:B.Kind.onboardingDismiss,stepName:t.stepName,docId:e.state.get().docId});break;default:(0,ie.vE)(t)}}),e.state.view((({currentStepName:e,currentStep:t,steps:n})=>(0,i.zG)(G.Y(q.option)({currentStepName:e,currentStep:t,steps:n}),q.map((({currentStep:e,steps:t,currentStepName:n})=>({currentStep:e,stepsCount:t.length,stepName:n,onboardingKind:t[e].kind})))))).pipe(re.oA))}e.UIPart=ne.UI.Union.make("_tag",{None:ne.UI.Node.empty,Some:t}),e.createFlow=function(e){return ne.Z.composeUnion({None:()=>k.of(null),Some:n(e)},(()=>e.state.view((({currentStep:e,steps:t,currentStepName:n})=>G.Y(q.option)({currentStep:e,steps:t,currentStepName:n})))))}}(t=e.Content||(e.Content={}));const n=ne.UI.Grid.make((({slots:e,state:t})=>a.createElement(N.F.Fragment,null,t.pipe(d.U((({anchorNode:t,placement:n,distance:i})=>a.createElement(oe.J2,{key:"onboarding",mainContent:a.createElement(N.F.Fragment,null,e.content),isOutsideReferenceElement:!0,outsideReferenceElement:t,distanceFromReferenceElement:i?i+8:6,theme:"dark",placement:n||"top",includeMainContentPadding:!1,style:{zIndex:1e4,width:240},show:!0}))))))),o=ne.UI.Knot.make(n,{content:t.UIPart});e.UIPart=ne.UI.Union.make("_tag",{Some:o,None:ne.UI.Node.empty}),e.createFlow=function(e){return ne.Z.composeUnion({Some:ne.Z.composeKnot({root:()=>e.state.view((({anchorNode:e,placement:t,distance:n})=>(0,i.zG)(G.Y(q.option)({anchorNode:e,placement:t,distance:n}),q.map((({anchorNode:e,placement:t,distance:n})=>({anchorNode:e,placement:t,distance:n})))))).pipe(re.oA),content:t.createFlow(e)}),None:()=>k.of(null)},(()=>e.state.view(te.ei("anchorNode"))))}}(pe||(pe={}));var fe,be=n(75420),ke=n(80900),Ie=n(71032),we=n(32952);!function(e){e.empty=e=>({currentStep:q.none,currentStepName:q.none,steps:q.none,anchorNode:q.none,placement:q.none,distance:q.none,docId:e})}(fe||(fe={}));const ye='[aria-controls="actions-menu"]',_e="li",Ce='[data-name="menu"]';class ve{constructor(e,t,n,i,o,a,s=(()=>{this._tryToOpenSettingsMenu()}),r=(()=>{this._tryToCloseSettingsMenu()}),l=(()=>this._tryToOpenHighlightPopup()),c=(()=>this._tryToCloseHighlightPopup()),d=(()=>this._tryToOpenFirstItemMenu()),u=(()=>this._tryToCloseFirstItemMenu()),h=Me){this._docId=e,this.actions=t,this.fakeMouse=n,this._isAvailable=i,this._csState=o,this._csActions=a,this._openSettingsMenu=s,this._closeSettingsMenu=r,this._openHighlightPopup=l,this._closeHighlightPopup=c,this._showFirstItemMenu=d,this._hideFirstItemMenu=u,this._stepsSetup=h,this._subscriptions=new j.w,this._cancelableSubscription=Q.h.create(new j.w),this._state=Q.h.create(fe.empty(this._docId)),this._anchors=new Map,this._unmountPostponed=new Map,this.state=this._state.view(),this._subscriptions.add(this._performSideEffectMaybe()),this._subscriptions.add(this._handleAnchorNode()),this._subscriptions.add(this._handleAnchorNodeUnmount()),this._subscriptions.add(this._handleSetKind()),this._subscriptions.add(this._handleNext()),this._subscriptions.add(this._handlePrev()),this._subscriptions.add(this._handleDismiss()),this._subscriptions.add(this._handleShown())}_setCancelable(e){this._cancelableSubscription.get().add(e.subscribe())}_clearCancelables(){this._cancelableSubscription.modify((e=>(e.unsubscribe(),new j.w)))}_tryToOpenSettingsMenu(){(0,i.zG)(q.fromNullable(this._anchors.get("recapBar")),q.filter((e=>"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement)),q.chain((e=>q.fromNullable(e.getRootNode()))),q.filter((e=>"querySelector"in e)),q.chain((e=>q.fromNullable(e.querySelector(ye)))),q.filter(be.Re),q.map((e=>e.click())))}_tryToCloseSettingsMenu(){(0,i.zG)(q.fromNullable(this._anchors.get("recapBarMenu")),q.filter((e=>"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement)),q.chain((e=>q.fromNullable(e.getRootNode()))),q.filter((e=>"querySelector"in e)),q.chain((e=>q.fromNullable(e.querySelector(ye)))),q.filter(be.Re),q.map((e=>e.click())))}_tryToOpenHighlightPopup(){(0,i.zG)(this._state.get(),(({currentStepName:e})=>G.Y(q.option)({anchorNode:q.fromNullable(this._anchors.get("firstHighlight")),currentStepName:e})),q.filter((({currentStepName:e})=>"highlightMenu"===e)),q.map((({anchorNode:e})=>e.getBoundingClientRect())),q.chain((({left:e,top:t})=>G.Y(q.option)({x:q.some(e),y:q.some(t),el:(0,i.zG)(q.fromNullable(document.elementFromPoint(e+4,t+4)),q.filter(be.Re))}))),q.map((({x:e,y:t,el:n})=>{this.fakeMouse.set({clientX:e,clientY:t+8}),this._clearCancelables(),this._setCancelable(ke.H(1e3/15).pipe(ee.b((()=>n.dispatchEvent(new MouseEvent("click",{bubbles:!0,clientX:e,clientY:t+8})))))),this._setCancelable(ke.H(5e3).pipe(ee.b((()=>{this.fakeMouse.set(null)}))))})))}_tryToCloseHighlightPopup(){(0,i.zG)(q.fromNullable(this._anchors.get("firstHighlight")),q.map((e=>e.getBoundingClientRect())),q.chain((({left:e,top:t})=>G.Y(q.option)({x:q.some(e),y:q.some(t),el:(0,i.zG)(q.fromNullable(document.elementFromPoint(e+4,t+4)),q.filter(be.Re))}))),q.map((({el:e})=>{this.fakeMouse.set({clientX:0,clientY:0}),this._clearCancelables(),this._setCancelable(ke.H(1e3/15).pipe(ee.b((()=>{e.dispatchEvent(new MouseEvent("click",{bubbles:!0,clientX:0,clientY:0})),this.fakeMouse.set(null)}))))})))}_tryToOpenFirstItemMenu(){(0,i.zG)(q.fromNullable(this._anchors.get("checkItem")),q.filter((e=>"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement)),q.chain((e=>q.fromNullable(e.closest(_e)))),q.filter(be.Re),q.chain((e=>q.fromNullable(e.querySelector(Ce)))),q.filter(be.Re),Y.bw((e=>e.click())))}_tryToCloseFirstItemMenu(){(0,i.zG)(q.fromNullable(this._anchors.get("itemMenu")),q.filter((e=>"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement)),q.chain((e=>q.fromNullable(e.closest(_e)))),q.filter(be.Re),q.chain((e=>q.fromNullable(e.querySelector(Ce)))),q.filter(be.Re),Y.bw((e=>e.click())))}_performSideEffectMaybe(){return this._state.view("currentStepName").pipe(ee.b(Y.bw((e=>{switch(e){case"highlightMenu":this._openHighlightPopup();break;case"recapBarMenu":this._openSettingsMenu();break;case"itemMenu":this._showFirstItemMenu()}})))).subscribe()}_cleanUpSideEffectMaybe(e){switch(e){case"highlightMenu":this._closeHighlightPopup();break;case"recapBarMenu":this._closeSettingsMenu();break;case"itemMenu":this._hideFirstItemMenu()}}_getAnchorNode(e){return(0,i.zG)(q.fromNullable(this._anchors.get(e)),q.filter((e=>!("nodeType"in e)||!!e.parentElement)),Y.ew((()=>this._anchors.delete(e))))}_handleAnchorNode(){return this.actions.pipe(O.ofType(B.Kind.onboardingAnchorMounted),O.ofDocId(this._docId),ee.b((({stepName:e,anchorNode:t})=>{this._anchors.set(e,t),(0,i.zG)(this._state.view("currentStepName").get(),q.filter((t=>t===e)),Y.bw((()=>{this._state.lens("anchorNode").set(q.some(t))})))})),h.M(this._csState),ee.b((([e,t])=>{(0,i.zG)(this._state.get(),(({steps:e,currentStep:t,currentStepName:n})=>G.Y(q.option)({steps:e,currentStep:t,currentStepName:n})),Y.ew((()=>{(0,i.zG)(q.fromPredicate((()=>this._isAvailable.get()))(null),q.chain((()=>q.fromNullable(Object.keys(this._stepsSetup).find((e=>{var n;return!(null===(n=t.seenOnboardingKinds)||void 0===n?void 0:n[e])}))))),q.map((e=>this._stepsSetup[e])),q.map((e=>({steps:e,currentStep:0,stepName:e[0].name,placement:e[0].placement,distance:e[0].distance}))),Y.bw((({steps:e,currentStep:t,stepName:n,placement:i,distance:o})=>{this._state.modify((a=>({...a,steps:q.some(e),currentStep:q.some(t),currentStepName:q.some(n),placement:q.some(i),anchorNode:this._getAnchorNode(n),distance:q.some(o)})))})))})))}))).subscribe()}_handleAnchorNodeUnmount(){return this._subscriptions.add(this.actions.pipe(O.ofType(B.Kind.onboardingAnchorUnmounted),O.ofDocId(this._docId),Ie.b((({stepNames:e})=>k.of(...e))),ee.b((e=>{(0,i.zG)(q.fromNullable(this._unmountPostponed.get(e)),Y.bw((t=>{t.unsubscribe(),this._unmountPostponed.delete(e)})))}))).subscribe()),this.actions.pipe(O.ofType(B.Kind.onboardingAnchorUnmounted),O.ofDocId(this._docId),Ie.b((({stepNames:e})=>k.of(...e))),ee.b((e=>{this._anchors.delete(e),(0,i.zG)(q.fromNullable(this._unmountPostponed.get(e)),Y.bw((t=>{t.unsubscribe(),this._unmountPostponed.delete(e)}))),this._unmountPostponed.set(e,ke.H(150).pipe(ee.b((()=>this._state.modify((t=>({...t,...(0,i.zG)(t.currentStepName,q.filter((t=>t===e)),q.fold((()=>null),(()=>({anchorNode:q.none,currentStep:q.none,currentStepName:q.none,steps:q.none,placement:q.none,distance:q.none}))))})))))).subscribe())}))).subscribe()}_handleSetKind(){return this.actions.pipe(O.ofType(B.Kind.onboardingSetKind),ee.b((({onboardingKind:e})=>{this._state.modify((t=>(0,i.zG)(e,q.filter((()=>this._isAvailable.get())),q.chain((e=>q.fromNullable(this._stepsSetup[e]))),q.map((e=>({steps:e,currentStep:0,stepName:e[0].name,placement:e[0].placement,distance:e[0].distance,docId:t.docId}))),q.fold((()=>fe.empty(t.docId)),(({steps:e,currentStep:n,stepName:i,placement:o,distance:a})=>({steps:q.some(e),currentStep:q.some(n),currentStepName:q.some(i),placement:q.some(o),anchorNode:this._getAnchorNode(i),distance:q.some(a),docId:t.docId}))))))}))).subscribe()}_handleNext(){return this.actions.pipe(O.ofType(B.Kind.onboardingNext),ee.b((({stepName:e})=>this._cleanUpSideEffectMaybe(e))),ee.b((()=>{this._state.modify((e=>({...e,...(0,i.zG)(G.Y(q.option)({currentStep:e.currentStep,steps:e.steps}),q.chain((({currentStep:t,steps:n})=>(0,i.zG)(q.fromNullable(n[t+1]),q.chain((n=>G.Y(q.option)({currentStep:q.some(t+1),steps:e.steps,stepName:q.some(n.name),placement:q.some(n.placement),distance:q.some(n.distance)})))))),Y.ew((()=>this._checkIfAllSeen())),q.fold((()=>fe.empty(e.docId)),(({currentStep:e,steps:t,stepName:n,placement:i,distance:o})=>({currentStep:q.some(e),steps:q.some(t),currentStepName:q.some(n),placement:q.some(i),anchorNode:this._getAnchorNode(n),distance:q.some(o)}))))})))}))).subscribe()}_handlePrev(){return this.actions.pipe(O.ofType(B.Kind.onboardingPrev),ee.b((({stepName:e})=>this._cleanUpSideEffectMaybe(e))),ee.b((()=>{this._state.modify((e=>({...e,...(0,i.zG)(G.Y(q.option)({currentStep:e.currentStep,steps:e.steps}),q.chain((({currentStep:t,steps:n})=>(0,i.zG)(q.fromNullable(n[t-1]),q.chain((n=>G.Y(q.option)({currentStep:q.some(t-1),steps:e.steps,stepName:q.some(n.name),placement:q.some(n.placement),distance:q.some(n.distance)})))))),q.fold((()=>fe.empty(e.docId)),(({currentStep:e,steps:t,stepName:n,placement:i,distance:o})=>({currentStep:q.some(e),steps:q.some(t),currentStepName:q.some(n),placement:q.some(i),anchorNode:this._getAnchorNode(n),distance:q.some(o)}))))})))}))).subscribe()}_checkIfAllSeen(){this._csState.view("seenOnboardingKinds").view((e=>(0,i.zG)(q.fromNullable(e),q.map((e=>Object.values(e).every((e=>e)))),q.getOrElse(i.jv)))).view((e=>e&&this._csActions.readerV1UpdateSeenOnboarding())).get()}_handleDismiss(){return this.actions.pipe(O.ofType(B.Kind.onboardingDismiss),ee.b((({stepName:e})=>this._cleanUpSideEffectMaybe(e))),ee.b((()=>{this._state.set(fe.empty(this._docId)),this._checkIfAllSeen()}))).subscribe()}_handleShown(){return this.actions.pipe(O.ofType(B.Kind.onboardingShown),ee.b((({onboardingKind:e})=>{this._csActions.readerV1UpdateSeenOnboardingKind({onboardingKind:e})}))).subscribe()}dispose(){Array.from(this._unmountPostponed.values()).forEach((e=>e.unsubscribe())),this._cancelableSubscription.get().unsubscribe(),this._subscriptions.unsubscribe()}}var Ee;!function(e){e.Mock=class{constructor(e=fe.empty(z.eo.create("some-doc"))){this._state=Q.h.create(fe.empty(z.eo.create("some-doc"))),this.state=this._state.view(),this.actions=new we.xQ,this._state.modify((()=>e))}dispose(){}}}(Ee||(Ee={}));const Me={general:[{kind:"general",name:"firstHighlight"},{kind:"general",name:"highlightMenu"},{kind:"general",name:"recapBar"},{kind:"general",name:"recapBarMenu",placement:"left"}],followUps:[{kind:"followUps",name:"followUps",placement:"right",distance:16},{kind:"followUps",name:"draftReply",placement:"right"}],keyPoints:[{kind:"keyPoints",name:"keyPoints",placement:"right",distance:16}],replyPanel:[{kind:"replyPanel",name:"checkItem",distance:42},{kind:"replyPanel",name:"itemMenu"}]};class Ue{constructor(e,t,n,o,a,s,r){this._threadContext=e,this._docsStateManager=t,this._itemsManager=n,this._viewModel=Q.h.create(null),this._activeStep=Q.h.create(q.none),this._viewModelSubscription=Q.h.create(new j.w),this.state=Q.h.combine(e.view((e=>(0,i.zG)(q.fromNullable(e.messageIndexToIdMap.get(e.messageCount-1)),q.fold((()=>null),(e=>{var t;null===(t=this._viewModel.get())||void 0===t||t.dispose(),this._viewModelSubscription.get().unsubscribe();const n=new ve(e,s,r,this.availableFor(Q.h.create(q.some(e))),o.view(te.H6("seenOnboarding","seenOnboardingKinds")),a);return this._viewModel.set(n),this._viewModelSubscription.set(new j.w),this._viewModelSubscription.get().add(n.state.pipe(ee.b((({currentStep:e,currentStepName:t,steps:n,anchorNode:o})=>this._activeStep.set((0,i.zG)(G.Y(q.option)({currentStep:e,currentStepName:t,steps:n,anchorNode:o}),q.chain((({steps:e,currentStep:t,currentStepName:n})=>G.Y(q.option)({step:q.fromNullable(e[t]),currentStepName:q.some(n)}))),q.fold((()=>q.none),(({step:e,currentStepName:t})=>q.some({stepName:t,onboardingKind:e.kind})))))))).subscribe()),ne.UI.mount(pe.UIPart,pe.createFlow(n))}))))),this._activeStep,((e,t)=>({ui:e,activeStep:t})))}availableFor(e){return Q.h.combine(e,this._threadContext,this._docsStateManager.state,this._itemsManager.followUps,this._itemsManager.keyPoints,this._itemsManager.highlights,((e,t,{thread:n,docs:o},a,s,r)=>(0,i.zG)(G.Y(q.option)({docId:e,lastDocId:q.fromNullable(t.messageIndexToIdMap.get(t.messageCount-1))}),q.filter((({docId:e,lastDocId:t})=>t===e)),q.map(te.ei("lastDocId")),q.chain((e=>G.Y(q.option)({docState:q.fromNullable(o.get(e)),followUps:q.fromNullable(a.get(e)),keyPoints:q.fromNullable(s.get(e)),highlights:q.fromNullable(r.get(e))}))),q.map((({docState:e})=>!(0,i.zG)(X(n,e,!0),q.getOrElse(i.W8)))),q.getOrElse(i.jv))))}dispose(){var e;null===(e=this._viewModel.get())||void 0===e||e.dispose(),this._viewModelSubscription.get().unsubscribe()}}var xe,Se,Ne,Fe,Pe,Re=n(30625),Ke=n(16118),Le=n(8125),Te=n(98037);!function(e){e.fold=function(e){return t=>{switch(t){case"followUps":return e.followUps();case"keyPoints":return e.keyPoints();case"all":return e.all();default:(0,S.L0)(t)}}}}(xe||(xe={})),function(e){e.isMoreDataPopupKind=function(e){return"followUps"===e||"keyPoints"===e||"all"===e},e.isFollowUpsOrKeyPoints=function(e){return"followUps"===e||"keyPoints"===e}}(Se||(Se={})),function(e){e.none="none",e.optInIndeterminate="optInIndeterminate",e.optIn="optIn",e.indeterminate="indeterminate",e.compact="compact",e.expanded="expanded"}(Ne||(Ne={})),function(e){e.is=function(e){return t=>t===e}}(Ne||(Ne={})),function(e){e.mock=()=>({kind:Ne.expanded,docId:"message-100500",popupKind:q.none,followUps:q.none,keyPoints:q.none,itemMenuVisibleFor:q.none,checkingState:"idle",highlightsSwitchState:q.some(!0),goodForAnnotations:q.some(!0),lowQualityInfo:q.none,showLowQualityContent:!1,browser:"chrome",isLastMessage:!1,onboardingAvailable:!1})}(Fe||(Fe={})),function(e){e.empty=function(e,t){return{docId:e,browser:t,popupKind:q.none,itemMenuVisibleFor:q.none}}}(Pe||(Pe={}));class Ae{constructor(e,t,n,a,s,r,l,c,d,u,h){this.actions=e,this._docId=t,this._browser=n,this._itemsManager=a,this._docsStateManager=s,this._optInStatus=r,this._isLastMessage=l,this._onboardingAvailable=c,this._gnar=d,this._sessionUuid=u,this._threadId=h,this._subscriptions=new j.w,this._state=Q.h.create(Pe.empty(this._docId,this._browser)),this.state=Q.h.combine(this._state,this._optInStatus,Q.h.combine(this._isLastMessage,this._onboardingAvailable,((e,t)=>({isLastMessage:e,onboardingAvailable:t}))),this._docsStateManager.state.view((({thread:e,docs:t})=>({threadState:e,docState:q.fromNullable(t.get(this._docId))}))),this._itemsManager.followUps.view(o.P5(z.eo.eq)(this._docId)),this._itemsManager.keyPoints.view(o.P5(z.eo.eq)(this._docId)),this._itemsManager.highlights.view(o.fP(z.eo.eq)(this._docId)),((e,t,{isLastMessage:n,onboardingAvailable:o},{threadState:a,docState:s},r,l,c)=>({...e,isLastMessage:n,onboardingAvailable:o,followUps:r,keyPoints:l,highlightsSwitchState:(0,i.zG)(s,q.chain((e=>J(a,e,q.isSome(r),q.isSome(l),c)))),kind:(0,i.zG)(t,Te.t.fold({indeterminate:()=>n?Ne.optInIndeterminate:Ne.none,notOptedInYet:()=>n?Ne.optIn:Ne.none,optedIn:()=>(0,i.zG)(s,q.chain((e=>X(a,e,q.isSome(r)||q.isSome(l)))),q.map((e=>e?Ne.compact:Ne.expanded)),q.getOrElse((()=>Ne.indeterminate))),optedOut:()=>Ne.none})),showLowQualityContent:(0,i.zG)(s,q.fold(i.jv,te.ei("showLowQualityContentRequested"))),lowQualityInfo:(0,i.zG)(s,q.chain(te.ei("lowQualityInfo"))),goodForAnnotations:(0,i.zG)(s,q.chain(te.ei("goodForAnnotations"))),checkingState:(0,i.zG)(s,q.fold((()=>"initial"),te.ei("checkingState")))}))),this._subscriptions.add(this._handleSetRecapBarPopup()),this._subscriptions.add(this._handleItemMenuVisibleFor()),this._subscriptions.add(this._handleToggleItemFeedbackMenu()),this._subscriptions.add(this._handleItemMenuActionClick()),this._subscriptions.add(this._handleReply()),this._subscriptions.add(this._handleReplyToItem()),this._subscriptions.add(this._handleKind()),this._subscriptions.add(this._trackShowOptIn()),this._subscriptions.add(this._trackShow()),this._subscriptions.add(this._trackLoaded()),this._subscriptions.add(this._trackPopupShowHide())}dispose(){this._subscriptions.unsubscribe()}_trackShowOptIn(){this.state.view("kind").pipe(H.h((e=>e===Ne.optIn)),f.q(1),ee.b((()=>{this._gnar.readerV1OptInHeaderShow(this._docId,this._sessionUuid,this._threadId())}))).subscribe()}_trackShow(){this.state.view("kind").pipe(H.h((e=>e===Ne.indeterminate)),f.q(1),ee.b((()=>{this._gnar.readerV1RecapBarShow(this._docId,this._sessionUuid,this._threadId())}))).subscribe()}_trackLoaded(){this.state.view("kind").pipe(H.h((e=>e===Ne.compact||e===Ne.expanded)),f.q(1),ee.b((()=>{this._gnar.readerV1RecapBarLoaded((0,Re.Hg)(this.state.get().followUps),(0,i.zG)(this._itemsManager.highlights.get(),o.P5(z.eo.eq)(this._docId),Re.Hg),(0,Re.Hg)(this.state.get().keyPoints),this._docId,(0,i.zG)(this.state.get().goodForAnnotations,Y.FX(!0)),q.isSome(this.state.get().lowQualityInfo),this._sessionUuid,this._threadId())}))).subscribe()}_trackPopupShowHide(){return this.state.view("popupKind").pipe(Ke.G(),ee.b((([e,t])=>{(0,i.zG)(e,Y.bw((e=>this._trackHidePopup(e)))),(0,i.zG)(t,Y.bw((e=>this._trackShowPopup(e))))}))).subscribe()}_handleKind(){return this.state.view("kind").pipe(H.h((e=>e!==Ne.expanded)),ee.b((()=>{this.actions.next({kind:B.Kind.onboardingAnchorUnmounted,stepNames:["recapBar","recapBarMenu","followUps","draftReply","keyPoints"],docId:this._docId})}))).subscribe()}_handleSetRecapBarPopup(){return this.actions.pipe(O.ofType(B.Kind.setRecapBarPopup),d.U((e=>(0,i.zG)(e.docId===this._docId?q.some(e):q.none,q.chain((e=>e.popupKind))))),ee.b((e=>{(0,i.zG)(e,Y.ew((()=>{(0,i.zG)(this.state.view("popupKind").get(),Y.bw((e=>{switch(e){case"settingsMenu":this.actions.next({kind:B.Kind.onboardingAnchorUnmounted,stepNames:["recapBarMenu"],docId:this._docId});break;case"followUps":this.actions.next({kind:B.Kind.onboardingAnchorUnmounted,stepNames:["followUps","draftReply"],docId:this._docId});break;case"keyPoints":this.actions.next({kind:B.Kind.onboardingAnchorUnmounted,stepNames:["keyPoints"],docId:this._docId})}})))}))),this._state.modify((t=>({...t,popupKind:e,itemMenuVisibleFor:q.none})))}))).subscribe()}_handleItemMenuVisibleFor(){return this.actions.pipe(O.ofType(B.Kind.setItemMenuVisibleFor),d.U((({item:e,docId:t,uiMode:n})=>(0,i.zG)(e,q.filter((()=>t===this._docId&&"recapBar"===n))))),ee.b((e=>this._state.lens("itemMenuVisibleFor").set((0,i.zG)(e,q.map((e=>({id:e.id,kind:e.kind,feedbackMenuActive:!1})))))))).subscribe()}_handleToggleItemFeedbackMenu(){return this.actions.pipe(O.ofType(B.Kind.toggleItemFeedbackMenu),O.ofDocId(this._docId),O.ofUIMode("recapBar"),ee.b((({menuOpen:e})=>this._state.lens("itemMenuVisibleFor").modify(q.map((t=>({...t,feedbackMenuActive:e}))))))).subscribe()}_handleItemMenuActionClick(){return this.actions.pipe(H.h((0,Le.Kg)(B.is(B.Kind.copyItem),B.is(B.Kind.replyToItem),B.is(B.Kind.removeItem),B.is(B.Kind.itemFeedback),B.is(B.Kind.setItemChecked))),O.ofDocId(this._docId),O.ofUIMode("recapBar"),ee.b((()=>this._state.lens("itemMenuVisibleFor").set(q.none)))).subscribe()}_handleReply(){return this.actions.pipe(O.ofType(B.Kind.reply),O.ofDocId(this._docId),ee.b((()=>this._state.lens("popupKind").set(q.none)))).subscribe()}_handleReplyToItem(){return this.actions.pipe(O.ofType(B.Kind.replyToItem),O.ofDocId(this._docId),O.ofUIMode("recapBar"),ee.b((()=>this._state.lens("popupKind").set(q.none)))).subscribe()}_trackShowPopup(e){switch(e){case"settingsMenu":this._gnar.readerV1RecapBarOptionsMenuOpen(this._docId,this._sessionUuid,this._threadId());break;case"followUps":this._gnar.readerV1FollowUpsPanelShow(this._docId,this._sessionUuid,this._threadId());break;case"keyPoints":this._gnar.readerV1KeyPointsPanelShow(this._docId,this._sessionUuid);break;case"all":this._gnar.readerV1AllDataPanelShow(this._docId,this._sessionUuid,this._threadId());break;default:(0,S.L0)(e)}}_trackHidePopup(e){switch(e){case"settingsMenu":this._gnar.readerV1RecapBarOptionsMenuClose(this._docId,this._sessionUuid,this._threadId());break;case"followUps":this._gnar.readerV1FollowUpsPanelHide(this._docId,this._sessionUuid,this._threadId());break;case"keyPoints":this._gnar.readerV1KeyPointsPanelHide(this._docId,this._sessionUuid,this._threadId());break;case"all":this._gnar.readerV1AllDataPanelHide(this._docId,this._sessionUuid,this._threadId());break;default:(0,S.L0)(e)}}}var Be=n(22667),Oe=n(86705),Ge=n(65223),Ve=n(98499);const ze=({onChange:e,labelId:t,className:n,switchClassName:o,labelClassName:s,checked:r,children:l,disabled:c,dataGrammarlyPart:d="ui-kit-switch",tabIndex:u=0,labelPlacement:h="before"})=>{const[m,p]=a.useState(null!=r&&r);a.useEffect((()=>{p(Boolean(r))}),[r]);const g=t=>{t.preventDefault(),t.stopPropagation(),p(!m),null==e||e(!m)};return a.createElement("div",{"data-grammarly-part":d,...(0,F.Sh)(Ve.switchContainer,n,"after"===h?Ve.switchContainerCompact:null)},a.createElement("div",{...(0,F.Sh)(Ve.switch,o,m?Ve.switchChecked:null,c?Ve.switchDisabled:null,"before"===h?Ve.switchAfter:null),role:"checkbox","aria-checked":m,tabIndex:u,"aria-labelledby":t,onKeyDown:e=>{c||" "!==e.key||g(e)},onClick:c?i.Q1:g},m?"ON":"OFF"),a.createElement("label",{id:t,onClick:c?i.Q1:g,className:s},l))};var He,De=n(86826);!function(e){e.UIPart=ne.UI.Node.make((({state:e,notify:t})=>a.createElement(N.F.Fragment,null,e.pipe(d.U((({checked:e})=>a.createElement(ze,{key:"inline-highlights-switch",labelId:"inline-highlights-switch-label",labelPlacement:"before",labelClassName:De.label,className:De.switch,checked:e,onChange:e=>{t({kind:"toggleInlineHighlights",enabled:e})()}},le.recapBar.highlightsSwitch.label))))))),e.createFlow=function(e){return ne.Z.fromSideEffect((t=>{e.actions.next({kind:B.Kind.toggleInlineHighlights,enabled:t.enabled,docId:e.state.get().docId})}),e.state.view(te.ei("highlightsSwitchState")).pipe(re.oA,d.U((e=>({checked:e})))))}}(He||(He={}));var Ze=n(12019);const je=({className:e,size:t=22})=>a.createElement("svg",{width:t,height:t,...(0,F.Sh)(e,Ze.logoIconSpinning),viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("circle",{cx:"12",cy:"12",r:"12",fill:de.Z.green50,stroke:"none"}),a.createElement("path",{d:"M19.9476 11.0858C19.7424 9.30177 18.9429 7.63865 17.6778 6.36412C16.4126 5.08959 14.7555 4.2778 12.973 4.05939C11.1905 3.84098 9.38634 4.22866 7.85092 5.16003C6.31551 6.09141 5.13811 7.5123 4.50823 9.19403C3.87836 10.8758 3.83264 12.7205 4.37843 14.4314C4.92422 16.1423 6.02978 17.6197 7.51718 18.626C9.00457 19.6323 10.7873 20.1089 12.5784 19.9791C14.3695 19.8492 16.0649 19.1205 17.3916 17.9102L16.4176 16.8425C15.3305 17.8342 13.9415 18.4312 12.4739 18.5376C11.0064 18.644 9.54571 18.2535 8.32701 17.429C7.10832 16.6045 6.20248 15.3939 5.75529 13.9922C5.3081 12.5904 5.34556 11.0789 5.86165 9.70094C6.37773 8.32302 7.34243 7.15881 8.60047 6.39569C9.85851 5.63257 11.3367 5.31493 12.7972 5.49388C14.2577 5.67284 15.6155 6.33798 16.652 7.38226C17.6886 8.42654 18.3437 9.78922 18.5118 11.251L19.9476 11.0858Z",fill:"white",stroke:"none"}));var Ye=n(18208),qe=n(55721),We=n(69338);ne.UI.Grid.make((({slots:e,state:t})=>a.createElement(N.F.Fragment,null,t.pipe(d.U((({width:t="auto",height:n="320px"})=>a.createElement("div",{key:"contentUIGrid",className:We.container,style:{width:t,height:n}},a.createElement("nav",{className:We.menu},a.createElement("section",{className:We.menuContent},e.sidebarContent),a.createElement("footer",{className:We.menuFooter},e.sidebarFooter)),a.createElement("section",{className:We.main},a.createElement("header",{className:We.mainHeader},e.mainHeader),a.createElement("section",{className:We.mainContent},e.mainContent),a.createElement("footer",{className:We.mainFooter},e.mainFooter)))))))));const Qe=ne.UI.Grid.make((({slots:e,state:t})=>a.createElement(N.F.Fragment,null,t.pipe(d.U((({width:t="auto",height:n="320px"})=>a.createElement("div",{key:"contentUIGrid",className:We.container,style:{width:t,height:n}},a.createElement("section",{...(0,F.Sh)(We.main,We.mainNoSidebar)},a.createElement("header",{className:We.mainHeader},e.mainHeader),a.createElement("section",{className:We.mainContent},e.mainContent),a.createElement("footer",{className:We.mainFooter},e.mainFooter))))))))),$e=ne.UI.Grid.make((({slots:e,state:t})=>a.createElement(N.F.Fragment,null,t.pipe(d.U((({width:t="auto",height:n="320px"})=>a.createElement("div",{key:"contentUIGrid",className:We.container,style:{width:t,height:n}},a.createElement("nav",{className:We.menu},a.createElement("section",{className:We.menuContent},e.sidebarContent),a.createElement("footer",{className:We.menuFooter},e.sidebarFooter)),a.createElement("section",{className:We.main},a.createElement("header",{className:We.mainHeader},e.mainHeader),a.createElement("section",{...(0,F.Sh)(We.mainContent,We.mainContentNoFooter)},e.mainContent)))))))));var Je=n(64015),Xe=n(14700),et=n(31944),tt=n(55073),nt=n(2844),it=n(60078),ot=n(57192);const at=ne.UI.Grid.make((({slots:e})=>a.createElement("li",{className:ot.item},a.createElement("div",{className:ot.itemWrapper},a.createElement("article",{className:ot.itemContent},e.item),a.createElement("aside",{className:ot.itemMenu},e.menu)))));var st=n(95195),rt=n(34432);const lt=({children:e,className:t})=>a.createElement("div",{...(0,F.Sh)(rt.container,t)},e);var ct=n(41627),dt=n(50223);const ut=({feedback:e,className:t,placement:n,disablePositionUpdates:o,onFeedback:s,onOpen:r,onClose:l})=>(0,i.zG)(e,st.g_((c=>(0,i.zG)(n,q.fold((()=>a.createElement(ue.Tertiary,{name:"feedback-button",onClick:()=>c?l():r(),active:c,title:le.itemFeedback.button.action,ariaLabel:le.itemFeedback.button.action,compact:!0},a.createElement(se.JO.AssistantFeedback,null))),(n=>a.createElement(oe.J2,{mainContent:a.createElement("div",{...(0,F.Sh)(dt.feedbackPopup,t)},a.createElement(ue.Tertiary,{name:"feedback-good-button",ariaLabel:le.itemFeedback.popup.good,onClick:()=>s(Te.h2.good)},a.createElement(ce.ThumbsUp,null)," ",a.createElement("span",{className:dt.buttonText},le.itemFeedback.popup.good)),a.createElement(ue.Tertiary,{name:"feedback-bad-button",ariaLabel:le.itemFeedback.popup.bad,onClick:()=>s(Te.h2.bad)},a.createElement(ce.ThumbsDown,null)," ",a.createElement("span",{className:dt.buttonText},le.itemFeedback.popup.bad))),isOutsideReferenceElement:!1,placement:n,show:st.nM(e)&&!0===e.left,includeMainContentPadding:!1,style:{zIndex:1e3,width:"auto",background:"none",borderRadius:"0",boxShadow:"none"},showArrow:!1,distanceFromReferenceElement:8,disablePositionUpdates:o},a.createElement(ue.Tertiary,{name:"feedback-button",onClick:()=>c?l():r(),active:c,title:le.itemFeedback.button.action,ariaLabel:le.itemFeedback.button.action,compact:!0},a.createElement(se.JO.AssistantFeedback,null))))))),(e=>e===Te.h2.good?a.createElement(Ge.u,{title:le.itemFeedback.button.good},a.createElement(ce.ThumbsUpFilled,{className:dt.inactiveThumbsUp})):e===Te.h2.bad?a.createElement(Ge.u,{title:le.itemFeedback.button.bad},a.createElement(ce.ThumbsDownFilled,{className:dt.inactiveThumbsDown})):(0,S.vE)(e))));var ht=n(40756);const mt=()=>a.createElement("div",{className:ht.separator});var pt;!function(e){e.getUIPart=function(e,t=se.JO.Ignore,n){return ne.UI.Node.make((({state:i,notify:o})=>a.createElement(N.F.Fragment,null,i.pipe(d.U((({uiMode:i,feedback:s,item:r,docId:l,feedbackMenuPlacement:c,disablePositionUpdates:d})=>a.createElement(a.Fragment,null,a.createElement("span",{ref:e=>"replyPanel"===i&&o(e?{kind:"replyButtonMounted",el:e,docId:l}:{kind:"replyButtonUnmounted",docId:l})()},a.createElement(ue.Tertiary,{name:"reply-button",compact:!0,title:e.reply,ariaLabel:e.reply,onClick:o({kind:"reply",item:r,docId:l})},a.createElement(ce.Reply,null))),a.createElement(mt,null),(0,ct.x)()&&a.createElement(ue.Tertiary,{name:"copy-button",compact:!0,title:e.copy,ariaLabel:e.copy,onClick:o({kind:"copy",item:r,docId:l})},a.createElement(se.JO.Copy,null)),a.createElement(ue.Tertiary,{name:"remove-button",compact:!0,title:e.remove,ariaLabel:e.remove,onClick:o({kind:"remove",item:r,docId:l})},a.createElement(t,null)),a.createElement(ut,{className:n,onOpen:o({kind:"openFeedback",item:r,docId:l}),onClose:o({kind:"closeFeedback",item:r,docId:l}),onFeedback:e=>o({kind:"feedback",feedback:e,item:r,docId:l})(),feedback:s,placement:c,disablePositionUpdates:d}))))))))},e.toReaderAction=function(e){return t=>{switch(t.kind){case"reply":return{kind:B.Kind.replyToItem,item:t.item,docId:t.docId,uiMode:e};case"copy":return{kind:B.Kind.copyItem,item:t.item,docId:t.docId,uiMode:e};case"remove":return{kind:B.Kind.removeItem,item:t.item,docId:t.docId,uiMode:e};case"feedback":return{kind:B.Kind.itemFeedback,item:t.item,feedback:t.feedback,docId:t.docId,uiMode:e};case"openFeedback":case"closeFeedback":return{kind:B.Kind.toggleItemFeedbackMenu,item:t.item,menuOpen:"openFeedback"===t.kind,docId:t.docId,uiMode:e};case"replyButtonMounted":return{kind:B.Kind.onboardingAnchorMounted,anchorNode:t.el,stepName:"itemMenu",docId:t.docId};case"replyButtonUnmounted":return{kind:B.Kind.onboardingAnchorUnmounted,stepNames:["itemMenu"],docId:t.docId};default:(0,S.L0)(t)}}}}(pt||(pt={}));var gt,ft,bt=n(62171);!function(e){let t,n;!function(e){const t=ne.UI.Grid.make((({slots:e})=>a.createElement(lt,{className:bt.popup},a.createElement(N.F.Fragment,null,e.menu))));e.UIPart=ne.UI.Knot.make(t,{menu:pt.getUIPart(le.itemMenu.actions,se.JO.Ignore,bt.feedbackPopup)}),e.createFlow=function(e,t,n,o,a){return ne.Z.composeKnot({menu:ne.Z.fromSideEffect((0,i.ls)(pt.toReaderAction(a),(e=>t.next(e))),nt.aj([o,n]).pipe(d.U((([t,n])=>({item:t,docId:e,feedback:st.Yo((()=>(0,i.zG)(n,q.exists((e=>e.feedbackMenuActive)))))(t.feedback),feedbackMenuPlacement:q.some("top-end"),disablePositionUpdates:!1,uiMode:a})))))})}}(t=e.Popup||(e.Popup={})),function(t){const n=ne.UI.Grid.make((({slots:e,state:t,notify:n})=>a.createElement(N.F.Fragment,null,t.pipe(d.U((({show:t,item:i})=>a.createElement(oe.J2,{key:i.id,mainContent:e.popup,isOutsideReferenceElement:!1,placement:"top-end",show:t,includeMainContentPadding:!1,style:{zIndex:1e3,width:"auto",background:"none",borderRadius:"0",boxShadow:"none"},showArrow:!1,distanceFromReferenceElement:1,clickAwayOptions:{onClickAway:n({kind:"clickAway"})}},a.createElement(ue.Tertiary,{compact:!0,name:"menu",title:le.itemMenu.buttonTitle,ariaLabel:le.itemMenu.buttonTitle,onClick:n(t?{kind:"hide"}:{kind:"show",item:i}),active:t},a.createElement(se.JO.Ellipsis,{className:bt.ellipsis,width:15})))))))));t.UIPart=ne.UI.Knot.make(n,{popup:e.Popup.UIPart}),t.createFlow=function(t,n,o,a,s,r,l){const c=s.pipe(d.U(Je.Ew((e=>e.id==a))),re.oA);return ne.Z.composeKnot({root:ne.Z.fromSideEffect((e=>{switch(e.kind){case"show":n.next({kind:B.Kind.setItemMenuVisibleFor,item:q.some(e.item),docId:t,uiMode:l,source:"user"});break;case"hide":case"clickAway":n.next({kind:B.Kind.setItemMenuVisibleFor,item:q.none,docId:t,uiMode:l,source:"hide"===e.kind?"user":"clickAway"});break;default:(0,ie.vE)(e)}}),o.pipe(h.M(c),d.U((([e,t])=>({item:t,show:(0,i.zG)(e,q.fold((()=>!1),(e=>e.kind===r&&e.id===a)))}))))),popup:e.Popup.createFlow(t,n,o,c,l)})}}(n=e.Button||(e.Button={}))}(gt||(gt={})),function(e){const t=ne.UI.Node.make((({state:e,notify:t})=>{const{ref:n,onMount:o}=ae.P.useElWatcher(),s=a.useRef(Q.h.create(q.none)),r=a.useRef(Q.h.create(!1));return a.createElement(N.F.Fragment,null,e.pipe(d.U((e=>a.createElement(et.J,{labelId:e.id,...(0,F.Sh)(it.checkboxWrapper,e.checked&&it.textChecked),labelClassName:it.label,checkboxClassName:it.checkbox,checked:e.checked,onChange:n=>{r.current.set(n),t({kind:"check",checked:n,item:e})()},useDS:!0,onMount:e=>{s.current.set(q.some(e)),t({kind:"mount",el:e})()}},(0,tt.l)(e.delta,""))))),nt.aj([s.current,n,r.current]).pipe(d.U((([e,t,n])=>(0,i.zG)(e,q.filter((()=>n)),q.fold(i.gn,(e=>{const n=e.getBoundingClientRect(),s=(0,i.zG)(t,q.chain((e=>q.fromNullable(e.offsetParent))),q.fold((()=>({top:0,left:0})),(e=>e.getBoundingClientRect())));return a.createElement("div",{ref:o,className:it.checkboxDoneNotification,style:{top:n.top-s.top-6,left:n.left-s.left+.5*n.width},onAnimationEnd:()=>r.current.set(!1),role:"presentation"},le.followUps.doneNotification,a.createElement("div",{className:it.arrow}))})))))))})),n=ne.UI.Knot.make(at,{item:t,menu:gt.Button.UIPart}),o=ne.UI.List.make(Je.Bk,n);e.UIPart=ne.UI.Composite.make(ne.UI.Grid.make((({slots:e})=>a.createElement(N.F.ul,{className:it.followUps},e.list))),o),e.createFlow=function(e,t,n,i,o){return(0,Xe.d)(((a,s)=>function(e,t,n,i,o,a,s){return ne.Z.composeKnot({item:ne.Z.fromSideEffect((t=>{switch(t.kind){case"check":i.next({kind:B.Kind.setItemChecked,checked:t.checked,item:t.item,docId:n,uiMode:s});break;case"mount":"replyPanel"==s&&0===e&&i.next({kind:B.Kind.onboardingAnchorMounted,anchorNode:t.el,stepName:"checkItem",docId:n});break;default:(0,S.L0)(t)}}),o.pipe(d.U(q.chain(Je.Ew((e=>e.id==t)))),re.oA)),menu:gt.Button.createFlow(n,i,a,t,o.pipe(re.oA,b.O([])),Te.YB.followUp,s)})}(s,a,e,t,n,i,o)),(()=>n.pipe(re.oA,b.O([]),d.U(Je.UI(te.ei("id"))))),Je.Bk)}}(ft||(ft={}));var kt,It,wt,yt=n(70088);!function(e){const t=ne.UI.Knot.make(at,{item:ne.UI.Node.make((({state:e})=>a.createElement(N.F.Fragment,null,e.pipe(d.U((({delta:e})=>a.createElement(a.Fragment,null,(0,tt.l)(e,"")))))))),menu:gt.Button.UIPart}),n=ne.UI.List.make(Je.Bk,t);e.UIPart=ne.UI.Composite.make(ne.UI.Grid.make((({slots:e})=>a.createElement(N.F.ul,{className:yt.keyPoints},e.list))),n),e.createFlow=function(e,t,n,i,o){return(0,Xe.d)(((a,s)=>function(e,t,n,i,o,a){return ne.Z.composeKnot({item:()=>i.pipe(d.U(q.chain(Je.Ew((t=>t.id==e)))),re.oA),menu:gt.Button.createFlow(t,n,o,e,i.pipe(re.oA,b.O([])),Te.YB.keyPoint,a)})}(a,e,t,n,i,o)),(()=>n.pipe(re.oA,b.O([]),d.U(Je.UI(te.ei("id"))))),Je.Bk)}}(kt||(kt={})),function(e){e.UIPart=ne.UI.Node.make((({notify:e})=>a.createElement(ue.Tertiary,{name:"hint",title:le.hintButton.title,ariaLabel:le.hintButton.title,compact:!0,onClick:e("showOnboarding")},a.createElement(se.JO.QuestionMark,{width:12})))),e.createFlow=function(e,t,n){const i="moreDataFollowUps"===(o=t)?"followUps":"moreDataKeyPoints"===o?"keyPoints":"replyPanel";var o;return ne.Z.fromSideEffect((t=>{e.next({kind:B.Kind.onboardingSetKind,onboardingKind:q.some(i),docId:n})}),k.of(null))}}(It||(It={})),function(e){e.UIPart=ne.UI.Node.make((({state:e})=>a.createElement(N.F.Fragment,null,e.pipe(d.U((({count:e,singular:t,plural:n})=>a.createElement(a.Fragment,null,e," ",Ye._6(e,t,n))))))))}(wt||(wt={}));var _t,Ct=n(24011);!function(e){let t,n,o;!function(e){const t=ne.UI.Grid.make((({state:e,slots:t,notify:n})=>{const{ref:i,onMount:o}=ae.P.useElWatcher();return a.useEffect((()=>{const t=i.pipe(re.oA,h.M(e),ee.b((([e,{popupKind:t}])=>n({kind:"mount",el:e,popupKind:t})()))).subscribe();return()=>t.unsubscribe()}),[]),a.createElement(N.F.Fragment,null,e.pipe(d.U((({popupKind:e})=>a.createElement("div",{className:Ct.footer,key:`footer-${e}`},t.hintButton,a.createElement("div",{ref:o,className:Ct.replyButton},a.createElement(ue.Primary,{name:"replyButton",onClick:n({kind:"reply",popupKind:e})},a.createElement(ce.Reply,null),le.reply)))))))})),n=ne.UI.Union.make("popupKind",{none:ne.UI.Node.empty,followUps:It.UIPart,keyPoints:It.UIPart});e.UIPart=ne.UI.Knot.make(t,{hintButton:n}),e.createFlow=function(e){return ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>{switch(t.kind){case"reply":e.actions.next({kind:B.Kind.reply,docId:e.state.get().docId,popupKind:t.popupKind});break;case"mount":"followUps"===t.popupKind&&e.actions.next({kind:B.Kind.onboardingAnchorMounted,anchorNode:t.el,stepName:"draftReply",docId:e.state.get().docId});break;default:(0,S.L0)(t)}}),e.state.view((({popupKind:e})=>(0,i.zG)(e,q.filter(Se.isMoreDataPopupKind),q.fold((()=>({popupKind:"all"})),(e=>({popupKind:e}))))))),hintButton:ne.Z.composeUnion({none:()=>k.of(null),followUps:It.createFlow(e.actions,"moreDataFollowUps",e.state.get().docId),keyPoints:It.createFlow(e.actions,"moreDataKeyPoints",e.state.get().docId)},(()=>e.state.view((({popupKind:e,onboardingAvailable:t})=>(0,i.zG)(e,q.filter(Se.isFollowUpsOrKeyPoints),q.filter((()=>t)),q.getOrElse((()=>"none")),(e=>({popupKind:e})))))))})}}(t=e.Footer||(e.Footer={})),function(e){const t=ne.UI.Union.make("popupKind",{followUps:wt.UIPart,keyPoints:wt.UIPart,all:()=>a.createElement(a.Fragment,null,"All")}),n=ne.UI.Grid.make((({state:e,slots:t,notify:n})=>{const{ref:i,onMount:o}=ae.P.useElWatcher();return a.useEffect((()=>{const t=i.pipe(re.oA,h.M(e),ee.b((([e,{popupKind:t}])=>n({kind:"mount",el:e,popupKind:t})()))).subscribe();return()=>t.unsubscribe()}),[]),a.createElement(N.F.Fragment,null,e.pipe(d.U((({popupKind:e})=>a.createElement("div",{className:Ct.header,key:`header-${e}`},a.createElement("div",{className:Ct.headerCounts,ref:o},t.counts),a.createElement(ue.Tertiary,{name:"close",compact:!0,onClick:n({kind:"close"})},a.createElement(se.JO.Close,null)))))))}));e.UIPart=ne.UI.Knot.make(n,{counts:t}),e.createFlow=function(e){return ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>{switch(t.kind){case"close":e.actions.next({kind:B.Kind.setRecapBarPopup,popupKind:q.none,docId:e.state.get().docId,source:"user"});break;case"mount":"all"!==t.popupKind&&e.actions.next({kind:B.Kind.onboardingAnchorMounted,anchorNode:t.el,stepName:t.popupKind,docId:e.state.get().docId});break;default:(0,S.L0)(t)}}),e.state.view((({popupKind:e})=>(0,i.zG)(e,q.filter(Se.isMoreDataPopupKind),q.fold((()=>({popupKind:"all"})),(e=>({popupKind:e}))))))),counts:()=>e.state.view((({popupKind:e,followUps:t,keyPoints:n})=>(0,i.zG)(G.Y(q.option)({popupKind:e,followUpsCount:q.some((0,Re.Hg)(t)),keyPointsCount:q.some((0,Re.Hg)(n))}),q.map((({popupKind:e,followUpsCount:t,keyPointsCount:n})=>"followUps"===e?{popupKind:"followUps",count:t,plural:le.recapBar.followUps.buttonTitle.plural,singular:le.recapBar.followUps.buttonTitle.singular}:"keyPoints"===e?{popupKind:"keyPoints",count:n,plural:le.recapBar.keyPoints.buttonTitle.plural,singular:le.recapBar.keyPoints.buttonTitle.singular}:{popupKind:"all"})),q.getOrElse((()=>({popupKind:"all"}))))))})}}(n=e.Header||(e.Header={})),function(e){const t=ne.UI.Union.make("dataKind",{followUps:wt.UIPart,keyPoints:wt.UIPart});function n(e,t){return ne.Z.composeUnion({followUps:()=>e.state.view((0,i.ls)((({followUps:e})=>(0,Re.Hg)(e)),(e=>({count:e,plural:le.recapBar.followUps.buttonTitle.plural,singular:le.recapBar.followUps.buttonTitle.singular})))),keyPoints:()=>e.state.view((0,i.ls)((({keyPoints:e})=>(0,Re.Hg)(e)),(e=>({count:e,plural:le.recapBar.keyPoints.buttonTitle.plural,singular:le.recapBar.keyPoints.buttonTitle.singular}))))},(()=>k.of({dataKind:t})))}const o=({children:e,onScroll:t})=>{const[n,i]=a.useState(0),[o,s]=a.useState(0),[r,l]=a.useState(0),c=a.useRef(null),d=a.useRef(new we.xQ);return a.useEffect((()=>{var e,t;s((null===(e=null==c?void 0:c.current)||void 0===e?void 0:e.scrollHeight)||0),l((null===(t=null==c?void 0:c.current)||void 0===t?void 0:t.clientHeight)||0)})),a.useEffect((()=>{const e=d.current.pipe(qe.p(le.panelScrollEventThrottleTime),ee.b(t)).subscribe();return()=>e.unsubscribe()}),[]),a.createElement("div",{...(0,F.Sh)(Ct.content,n>0?Ct.contentOverflowTop:void 0,o-r-n>0?Ct.contentOverflowBottom:void 0)},a.createElement("div",{className:Ct.contentContent,ref:c,onScroll:e=>{i(e.currentTarget.scrollTop),d.current.next()}},e))},s=ne.UI.Knot.make(ne.UI.Grid.make((({slots:e,notify:t})=>a.createElement(o,{onScroll:t("scroll")},e.content))),{content:ft.UIPart}),r=ne.UI.Knot.make(ne.UI.Grid.make((({slots:e,notify:t})=>a.createElement(o,{onScroll:t("scroll")},e.content))),{content:kt.UIPart}),l=ne.UI.Grid.make((({slots:e})=>a.createElement(a.Fragment,null,a.createElement("h2",{className:Ct.contentCounts},e.counts),e.content))),c=ne.UI.Knot.make(l,{content:ft.UIPart,counts:t}),d=ne.UI.Knot.make(l,{content:kt.UIPart,counts:t}),u=ne.UI.Knot.make(ne.UI.Grid.make((({slots:e,notify:t})=>a.createElement(o,{onScroll:t("scroll")},e.followUps,e.keyPoints))),{followUps:c,keyPoints:d});e.UIPart=ne.UI.Union.make("popupKind",{followUps:s,keyPoints:r,all:u}),e.createFlow=function(e){return ne.Z.composeUnion({followUps:ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>e.actions.next({kind:B.Kind.panelScroll,source:"recapBar",docId:e.state.get().docId})),k.of(null)),content:ft.createFlow(e.state.view("docId").get(),e.actions,e.state.view("followUps"),e.state.view("itemMenuVisibleFor"),"recapBar")}),keyPoints:ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>e.actions.next({kind:B.Kind.panelScroll,source:"recapBar",docId:e.state.get().docId})),k.of(null)),content:kt.createFlow(e.state.view("docId").get(),e.actions,e.state.view("keyPoints"),e.state.view("itemMenuVisibleFor"),"recapBar")}),all:ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>e.actions.next({kind:B.Kind.panelScroll,source:"recapBar",docId:e.state.get().docId})),k.of(null)),followUps:ne.Z.composeKnot({content:ft.createFlow(e.state.view("docId").get(),e.actions,e.state.view("followUps"),e.state.view("itemMenuVisibleFor"),"recapBar"),counts:n(e,"followUps")}),keyPoints:ne.Z.composeKnot({content:kt.createFlow(e.state.view("docId").get(),e.actions,e.state.view("keyPoints"),e.state.view("itemMenuVisibleFor"),"recapBar"),counts:n(e,"keyPoints")})})},(()=>e.state.view((({popupKind:e})=>(0,i.zG)(e,q.filter(Se.isMoreDataPopupKind),q.fold((()=>({popupKind:"all"})),(e=>({popupKind:e}))))))))}}(o=e.Content||(e.Content={})),e.UIPart=ne.UI.Knot.make(Qe,{mainHeader:n.UIPart,mainContent:o.UIPart,mainFooter:t.UIPart}),e.createFlow=function(e){return ne.Z.composeKnot({root:()=>k.of({width:"432px",height:"auto"}),mainHeader:n.createFlow(e),mainContent:o.createFlow(e),mainFooter:t.createFlow(e)})}}(_t||(_t={}));var vt,Et=n(45903);!function(e){const t=ne.UI.Grid.make((({state:e,slots:t,notify:n})=>{const{ref:i,onMount:o}=ae.P.useElWatcher();return a.useEffect((()=>{const e=i.pipe(re.oA,ee.b((e=>{n({kind:"mount",el:e})()}))).subscribe();return()=>e.unsubscribe()}),[]),a.createElement(N.F.Fragment,null,e.pipe(d.U((({followUpsCount:e,keyPointsCount:i,popupState:{showFollowups:s,showKeyPoints:r,showAll:l},onboardingActive:c})=>a.createElement("div",{key:"moreDataEntryPoint",...(0,F.Sh)(Et.moreDataEntryPoint,c?Et.moreDataEntryPointWithOnboarding:void 0),ref:o},e?a.createElement(oe.J2,{mainContent:t.popup,isOutsideReferenceElement:!1,theme:"lightDS",placement:"bottom",show:s,style:{zIndex:1e3,width:"auto"},includeMainContentPadding:!1,boundaryAreaPadding:8,clickAwayOptions:{onClickAway:n({kind:"clickAway"})}},a.createElement(ue.Tertiary,{name:"follow-ups",active:s,onClick:n({kind:"buttonClicked",popupKind:s?q.none:q.some("followUps")})},e," ",Ye._6(e,le.recapBar.followUps.buttonTitle.singular,le.recapBar.followUps.buttonTitle.plural))):null,i?a.createElement(oe.J2,{mainContent:t.popup,isOutsideReferenceElement:!1,theme:"lightDS",placement:"bottom",show:r,style:{zIndex:1e3,width:"auto"},includeMainContentPadding:!1,boundaryAreaPadding:8,clickAwayOptions:{onClickAway:n({kind:"clickAway"})}},a.createElement(ue.Tertiary,{name:"key-points",active:r,onClick:n({kind:"buttonClicked",popupKind:r?q.none:q.some("keyPoints")})},i," ",Ye._6(i,le.recapBar.keyPoints.buttonTitle.singular,le.recapBar.keyPoints.buttonTitle.plural))):null,e&&i?a.createElement(oe.J2,{mainContent:t.popup,isOutsideReferenceElement:!1,theme:"lightDS",placement:"bottom",show:l,style:{zIndex:1e3,width:"auto"},includeMainContentPadding:!1,boundaryAreaPadding:8,clickAwayOptions:{onClickAway:n({kind:"clickAway"})}},a.createElement(ue.Tertiary,{name:"all",active:l,onClick:n({kind:"buttonClicked",popupKind:l?q.none:q.some("all")})},le.recapBar.all.buttonTitle)):null)))))}));e.UIPart=ne.UI.Knot.make(t,{popup:_t.UIPart}),e.createFlow=function(e,t){return ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>{switch(t.kind){case"buttonClicked":e.actions.next({kind:B.Kind.setRecapBarPopup,popupKind:t.popupKind,docId:e.state.get().docId,source:"user"});break;case"clickAway":e.actions.next({kind:B.Kind.setRecapBarPopup,popupKind:q.none,docId:e.state.get().docId,source:"clickAway"});break;case"mount":e.actions.next({kind:B.Kind.onboardingAnchorMounted,anchorNode:t.el,docId:e.state.get().docId,stepName:"recapBar"});break;default:(0,S.vE)(t)}}),Q.h.combine(e.state.view((({followUps:e,keyPoints:t,popupKind:n,isLastMessage:o})=>({followUpsCount:(0,Re.Hg)(e),keyPointsCount:(0,Re.Hg)(t),popupState:(0,i.zG)(n,q.fold((()=>({showFollowups:!1,showKeyPoints:!1,showAll:!1})),(e=>({showFollowups:"followUps"===e,showKeyPoints:"keyPoints"===e,showAll:"all"===e})))),isLastMessage:o}))),t.view((e=>(0,i.zG)(e,q.fold(i.jv,(({stepName:e,onboardingKind:t})=>"general"===t&&"recapBar"===e))))),((e,t)=>({...e,onboardingActive:!!e.isLastMessage&&t})))),popup:_t.createFlow(e)})}}(vt||(vt={}));var Mt,Ut=n(16178),xt=n(64229);!function(e){e.UIPart=ne.UI.Node.make((({state:e,notify:t})=>{const n=a.useRef(Q.h.create(q.none));return a.useEffect((()=>{const e=n.current.pipe(re.oA,d.U((e=>{t({kind:"itemMount",el:e})()}))).subscribe();return()=>e.unsubscribe()}),[]),a.createElement(N.F.Fragment,null,e.pipe(d.U((({show:e,kind:i})=>a.createElement(xt.m,{ariaMenuId:"actions-menu",ariaMenuLabel:le.recapBar.settingsMenu.menuTitle,sections:[{items:[{icon:a.createElement(Be.K,{size:22}),label:le.recapBar.settingsMenu.about,onClick:t({kind:"aboutRecap"})},{icon:a.createElement(ce.Feedback,null),label:le.recapBar.settingsMenu.feedback,onClick:t({kind:"feedback"})}]},{items:[{id:"recap-bar-highlights-switch",icon:i===Ne.compact?a.createElement(ce.Show,null):a.createElement(ce.Hide,null),label:i===Ne.compact?le.recapBar.settingsMenu.show:le.recapBar.settingsMenu.hide,onClick:i===Ne.compact?t({kind:"toggleRecapBar",isCompact:!1}):t({kind:"toggleRecapBar",isCompact:!0}),disabled:(0,Le.ff)((0,Le.Kg)(Ne.is(Ne.compact),Ne.is(Ne.expanded)))(i)}]},{items:[{icon:a.createElement(ce.Disable,null),label:le.recapBar.settingsMenu.disable,onClick:t({kind:"turnOffRecap"})}]}],trigger:{action:"click"},placement:"bottom-end",size:"medium",theme:"lightDS",distanceFromReferenceElement:0,style:{zIndex:1e3,width:240},onToggle:n=>{n!==e&&t({kind:"toggleMenu",show:n})()},onItemMount:(e,t)=>{"recap-bar-highlights-switch"===e&&n.current.set(q.some(t))}},a.createElement(ue.Tertiary,{title:le.recapBar.settingsMenu.buttonTitle,ariaLabel:le.recapBar.settingsMenu.buttonTitle,name:"menu-button",active:e,compact:!0},a.createElement(se.JO.Gear,{width:15})))))))})),e.createFlow=function(e){return ne.Z.fromSideEffect((t=>{switch(t.kind){case"aboutRecap":e.actions.next({kind:B.Kind.recapMenuItemClick,item:"about",docId:e.state.get().docId});break;case"feedback":e.actions.next({kind:B.Kind.recapMenuItemClick,item:"feedback",docId:e.state.get().docId});break;case"turnOffRecap":e.actions.next({kind:B.Kind.recapMenuItemClick,item:"turnOff",docId:e.state.get().docId});break;case"toggleMenu":e.actions.next({kind:B.Kind.setRecapBarPopup,popupKind:t.show?q.some("settingsMenu"):q.none,docId:e.state.get().docId,source:"user"});break;case"toggleRecapBar":e.actions.next({kind:B.Kind.recapMenuItemClick,item:t.isCompact?"hide":"show",docId:e.state.get().docId}),e.actions.next({kind:B.Kind.toggleRecapBar,isCompact:t.isCompact,docId:e.state.get().docId,source:"settingsMenu"});break;case"itemMount":e.actions.next({kind:B.Kind.onboardingAnchorMounted,anchorNode:t.el,stepName:"recapBarMenu",docId:e.state.get().docId});break;default:(0,S.L0)(t)}}),e.state.view((({popupKind:e,kind:t})=>({show:(0,i.zG)(e,q.fold((()=>!1),(e=>"settingsMenu"===e))),kind:t}))))}}(Mt||(Mt={}));const St=({title:e,children:t})=>e?a.createElement(Ge.u,{title:e,align:"right"},t):a.createElement(a.Fragment,null,t),Nt=({title:e,warning:t,loading:n})=>a.createElement(St,{title:e},a.createElement("div",{className:Ut.logoContainer},n?a.createElement(je,{size:22}):a.createElement(Be.K,{size:22}),t?a.createElement(ce.WarningBadge,{className:Ut.warningBadge}):null)),Ft=({browser:e})=>a.createElement(Oe.v,{browser:e,className:Ut.betaBadge}),Pt=ne.UI.Grid.make((({slots:e,view:t})=>a.createElement(N.F.div,{key:"compact-panel",...(0,F.Sh)(Ut.recapPanel,t("hasBackground").pipe(d.U((0,Le.RN)(Ut.panelBackground,null))))},a.createElement(N.F.Fragment,null,e.logo),a.createElement(N.F.main,{className:Ut.mainPart},e.content),a.createElement(N.F.aside,{className:Ut.asidePart},e.aside))));var Rt,Kt,Lt;!function(e){const t=ne.UI.Node.make((({state:e})=>a.createElement(N.F.Fragment,null,e.pipe(d.U((({loading:e,browser:t})=>a.createElement("div",{className:Ut.logoAndBadge},a.createElement(Nt,{loading:e}),a.createElement(Ft,{browser:t})))))))),n=ne.UI.Node.make((({notify:e})=>a.createElement(a.Fragment,null,a.createElement("span",{className:Ut.optInContent},le.recapBar.optIn.content),a.createElement(ue.Primary,{name:"try-it-out",onClick:e("tryItOut"),className:Ut.tryItOutButton},le.recapBar.optIn.tryItOutButton),a.createElement("a",{href:le.recapBar.optIn.learnMoreLink,target:"_blank",rel:"noreferrer",className:Ut.learnMoreLink,onClick:e("learnMore")},le.recapBar.optIn.learnMoreLabel)))),o=ne.UI.Node.make((({notify:e})=>a.createElement(ue.Tertiary,{name:"dismiss",onClick:e("dismiss"),className:Ut.ghostButton},le.recapBar.optIn.dismissButton))),s=ne.UI.Union.asOption(n),r=ne.UI.Union.asOption(o);e.UIPart=ne.UI.Knot.make(Pt,{logo:t,content:s,aside:r}),e.createFlow=function(e){return ne.Z.composeKnot({root:()=>e.state.view((0,i.ls)(te.ei("kind"),(e=>({hasBackground:e===Ne.optIn})))),logo:()=>e.state.view((e=>({browser:e.browser,loading:e.kind===Ne.optInIndeterminate}))),content:ne.Z.composeUnion({Some:ne.Z.composeKnot({value:ne.Z.fromSideEffect((t=>{switch(t){case"tryItOut":e.actions.next({kind:B.Kind.optInTryItOutModal,docId:e.state.view("docId").get()});break;case"learnMore":e.actions.next({kind:B.Kind.learnMoreLinkVisited,source:"optInRecapBar",docId:e.state.view("docId").get()});break;default:(0,S.L0)(t)}}),k.of(null))}),None:()=>k.of(null)},(()=>e.state.view((0,i.ls)(te.ei("kind"),q.some,q.filter(Ne.is(Ne.optIn)))))),aside:ne.Z.composeUnion({Some:ne.Z.composeKnot({value:ne.Z.fromSideEffect((t=>{if("dismiss"===t)e.actions.next({kind:B.Kind.optInDismissModal,docId:e.state.view("docId").get()});else(0,S.L0)(t)}),k.of(null))}),None:()=>k.of(null)},(()=>e.state.view((0,i.ls)(te.ei("kind"),q.some,q.filter(Ne.is(Ne.optIn))))))})}}(Rt||(Rt={})),function(e){const t=ne.UI.Node.make((({state:e,notify:t})=>a.createElement(N.F.Fragment,null,e.pipe(d.U((({kind:e,checkingState:n,logoTooltip:i,logoWarning:o,browser:s})=>a.createElement("div",{onClick:e===Ne.compact?t({kind:"toggleRecapBar",isCompact:!1}):e===Ne.expanded?t({kind:"toggleRecapBar",isCompact:!0}):void 0,className:Ut.logoAndBadge,...e===Ne.compact||e===Ne.expanded?{role:"button"}:{}},a.createElement(Nt,{loading:"idle"!==n,warning:o,title:i}),a.createElement(Ft,{browser:s}))))))));function n(e){return ne.Z.fromSideEffect((t=>e.actions.next({kind:B.Kind.toggleRecapBar,isCompact:t.isCompact,docId:e.state.get().docId,source:"logoButton"})),e.state.view((e=>{const t=q.isNone(e.followUps)&&q.isNone(e.keyPoints),n=q.isSome(e.lowQualityInfo)&&!t,o=e.kind===Ne.compact,a=o?t&&"idle"===e.checkingState?(0,i.zG)(e.goodForAnnotations,Y.FX(!0))?le.recapBar.logoTooltips.noSummary:le.recapBar.logoTooltips.noSummaryMessageTooShort:n?le.recapBar.logoTooltips.contentIsLowQuality:"":"",s=e.kind===Ne.indeterminate?le.recapBar.logoTooltips.loading:`${o?le.recapBar.logoTooltips.show:le.recapBar.logoTooltips.hide}${a?" | ":""}${a}`;return{kind:e.kind,checkingState:e.checkingState,logoTooltip:s,logoWarning:n&&e.kind===Ne.expanded,browser:e.browser}})))}let o;!function(e){const t=ne.UI.Node.make((()=>a.createElement("span",{className:Ut.contentLabel},le.recapBar.zeroStates.noSummary))),n=ne.UI.Node.make((()=>a.createElement("span",{className:Ut.contentLabel},le.recapBar.zeroStates.noSummaryMessageTooShort))),o=ne.UI.Node.make((({notify:e})=>a.createElement("span",{className:Ut.contentLabel},le.recapBar.zeroStates.contentIsLowQuality,a.createElement(ue.Tertiary,{name:"show-anyway",onClick:e("showAnyway"),className:Ut.ghostButton},le.recapBar.zeroStates.showAnyway))));function s(e){const t=q.isSome(e.followUps)&&q.isSome(e.keyPoints),n=q.isSome(e.followUps)||q.isSome(e.keyPoints),o="idle"===e.checkingState&&n||t,a=o&&(q.isNone(e.lowQualityInfo)||e.showLowQualityContent),s=q.isSome(e.lowQualityInfo)&&!e.showLowQualityContent&&o;return e.kind!==Ne.expanded?"none":a?"moreDataEntryPoint":s?"lowQualityEntryPoint":(0,i.zG)(e.goodForAnnotations,Y.FX(!0))?"noSummary":"noSummaryMessageTooShort"}e.UIPart=ne.UI.Union.make("kind",{none:ne.UI.Node.empty,moreDataEntryPoint:vt.UIPart,lowQualityEntryPoint:o,noSummary:t,noSummaryMessageTooShort:n}),e.createFlow=function(e,t){return ne.Z.composeUnion({none:()=>k.of(null),moreDataEntryPoint:vt.createFlow(e,t),lowQualityEntryPoint:ne.Z.fromSideEffect((t=>e.actions.next({kind:B.Kind.showAnyway,docId:e.state.get().docId})),k.of(null)),noSummary:()=>k.of(null),noSummaryMessageTooShort:()=>k.of(null)},(()=>e.state.view((0,i.ls)(s,(e=>({kind:e}))))))}}(o||(o={}));const s=ne.UI.Union.asOption(He.UIPart),r=ne.UI.Knot.make(ne.UI.Grid.make((({slots:e})=>a.createElement(N.F.Fragment,null,e.highlightsSwitch,e.settingsMenu))),{highlightsSwitch:s,settingsMenu:Mt.UIPart});e.UIPart=ne.UI.Knot.make(Pt,{logo:t,content:o.UIPart,aside:r}),e.createFlow=function(e,t){return ne.Z.composeKnot({root:()=>k.of({hasBackground:!1}),logo:n(e),content:o.createFlow(e,t),aside:ne.Z.composeKnot({highlightsSwitch:ne.Z.composeUnion({Some:ne.Z.composeKnot({value:He.createFlow(e)}),None:()=>k.of(null)},(()=>e.state.view((e=>(0,i.zG)(e.kind===Ne.compact?q.none:e.highlightsSwitchState))))),settingsMenu:Mt.createFlow(e)})})}}(Kt||(Kt={})),function(e){e.UIPart=ne.UI.Union.make("kind",{none:ne.UI.Node.empty,optedIn:Kt.UIPart,notOptedIn:Rt.UIPart}),e.createFlow=function(e,t){return ne.Z.composeUnion({none:()=>k.of(null),optedIn:Kt.createFlow(e,t),notOptedIn:Rt.createFlow(e)},(()=>e.state.view((0,i.ls)(te.ei("kind"),(e=>{switch(e){case Ne.none:return{kind:"none"};case Ne.optInIndeterminate:case Ne.optIn:return{kind:"notOptedIn"};default:return{kind:"optedIn"}}})))))}}(Lt||(Lt={}));var Tt,At=n(77637);!function(e){let t;!function(e){let t,n;!function(e){const t=ne.UI.Grid.make((({notify:e,slots:t})=>a.createElement(a.Fragment,null,a.createElement("strong",null,t.count)," ",le.replyPanel.compact.followUps.suffix," ",a.createElement("a",{onClick:e("show"),role:"button",tabIndex:0},le.replyPanel.show))));e.UIPart=ne.UI.Knot.make(t,{count:wt.UIPart}),e.createFlow=e=>ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>{e.actions.next({kind:B.Kind.toggleReplyPanelMode,docId:e.state.get().docId,trigger:"followUps",mode:"full"})}),k.of(null)),count:()=>e.state.view((({followUps:e})=>({count:(0,i.zG)(e,q.fold((()=>0),(e=>e.length))),plural:le.replyPanel.compact.followUps.plural,singular:le.replyPanel.compact.followUps.singular})))})}(t||(t={})),function(e){e.UIPart=ne.UI.Node.make((({notify:e})=>a.createElement(a.Fragment,null,le.replyPanel.compact.keyPoints.content," ",a.createElement("a",{onClick:e("show"),role:"button",tabIndex:0},le.replyPanel.compact.keyPoints.action)))),e.createFlow=e=>ne.Z.fromSideEffect((t=>{e.actions.next({kind:B.Kind.toggleReplyPanelMode,docId:e.state.get().docId,trigger:"keyPoints",mode:"full"})}),k.of(null))}(n||(n={})),e.UIPart=ne.UI.Union.make("kind",{none:ne.UI.Node.empty,followUps:t.UIPart,keyPoints:n.UIPart}),e.createFlow=e=>ne.Z.composeUnion({none:()=>k.of(null),followUps:t.createFlow(e),keyPoints:n.createFlow(e)},(()=>e.state.view((({followUps:e,keyPoints:t})=>({kind:q.isSome(e)?"followUps":q.isSome(t)?"keyPoints":"none"})))))}(t||(t={}));const n=ne.UI.Grid.make((({state:e,notify:t,slots:n})=>a.createElement(N.F.Fragment,null,e.pipe(d.U((({messageId:e})=>a.createElement("div",{key:e,className:At.compactReplyPanel},a.createElement(Be.K,{className:At.compactReplyPanelLogo,size:22}),a.createElement("div",{className:At.compactReplyPanelContent},n.content),a.createElement(ue.Tertiary,{name:"show",title:le.replyPanel.show,onClick:t("show"),compact:!0},a.createElement(ce.ChevronDown,null)))))))));e.UIPart=ne.UI.Knot.make(n,{content:t.UIPart}),e.createFlow=e=>ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>{e.actions.next({kind:B.Kind.toggleReplyPanelMode,docId:e.state.get().docId,trigger:"arrowButton",mode:"full"})}),e.state.view((({docId:e})=>({messageId:e})))),content:t.createFlow(e)})}(Tt||(Tt={}));var Bt,Ot=n(35426);!function(e){const t=ne.UI.Union.make("dataKind",{followUps:wt.UIPart,keyPoints:wt.UIPart});function n(e,t){return ne.Z.composeUnion({followUps:()=>e.state.view((0,i.ls)((({followUps:e})=>(0,Re.Hg)(e)),(e=>({count:e,plural:le.replyPanel.content.followUps.plural,singular:le.replyPanel.content.followUps.singular})))),keyPoints:()=>e.state.view((0,i.ls)((({keyPoints:e})=>(0,Re.Hg)(e)),(e=>({count:e,plural:le.replyPanel.content.keyPoints.plural,singular:le.replyPanel.content.keyPoints.singular}))))},(()=>k.of({dataKind:t})))}const o=({children:e,expanded:t,onScroll:n,onOverflow:o})=>{const[s,r]=a.useState(0),l=a.useRef(new we.xQ),{ref:c,onMount:u}=ae.P.useElWatcher();return a.useEffect((()=>{const e=l.current.pipe(qe.p(le.panelScrollEventThrottleTime),ee.b(n)).subscribe(),t=c.pipe(d.U(q.fold(i.jv,(e=>e.clientHeight<e.scrollHeight))),U.x(),ee.b(o)).subscribe();return()=>{e.unsubscribe(),t.unsubscribe()}}),[]),a.createElement("div",{...(0,F.Sh)(s>0?Ot.contentOverflowTop:void 0)},a.createElement("div",{...(0,F.Sh)(Ot.content,t?Ot.contentExpanded:void 0),ref:u,onScroll:e=>{r(e.currentTarget.scrollTop),l.current.next()}},e))},s=ne.UI.Grid.make((({slots:e})=>a.createElement(a.Fragment,null,a.createElement("h2",{className:Ot.contentCounts},e.counts),e.content))),r=ne.UI.Knot.make(s,{content:ft.UIPart,counts:t}),l=ne.UI.Knot.make(s,{content:kt.UIPart,counts:t}),c=ne.UI.Knot.make(ne.UI.Grid.make((({slots:e,state:t,notify:n})=>a.createElement(N.F.Fragment,null,t.pipe(d.U((({expanded:t})=>a.createElement(o,{key:"followUpsContent",expanded:t,onScroll:n({kind:"scroll"}),onOverflow:e=>n({kind:"overflow",hasOverflow:e})()},e.content))))))),{content:r}),u=ne.UI.Knot.make(ne.UI.Grid.make((({slots:e,state:t,notify:n})=>a.createElement(N.F.Fragment,null,t.pipe(d.U((({expanded:t})=>a.createElement(o,{key:"keyPointsContent",expanded:t,onScroll:n({kind:"scroll"}),onOverflow:e=>n({kind:"overflow",hasOverflow:e})()},e.content))))))),{content:kt.UIPart});function h(e){return ne.Z.fromSideEffect((t=>{switch(t.kind){case"scroll":e.actions.next({kind:B.Kind.panelScroll,source:"replyPanel",docId:e.state.get().docId});break;case"overflow":e.actions.next({kind:B.Kind.panelOverflow,source:"replyPanel",docId:e.state.get().docId,hasOverflow:t.hasOverflow});break;default:(0,S.L0)(t)}}),e.state.view((e=>({expanded:e.expanded}))))}e.AllContent=ne.UI.Knot.make(ne.UI.Grid.make((({slots:e,state:t,notify:n})=>a.createElement(N.F.Fragment,null,t.pipe(d.U((({expanded:t})=>a.createElement(o,{key:"allContent",expanded:t,onScroll:n({kind:"scroll"}),onOverflow:e=>n({kind:"overflow",hasOverflow:e})()},e.followUps,e.keyPoints))))))),{followUps:r,keyPoints:l}),e.UIPart=ne.UI.Union.make("kind",{none:ne.UI.Node.empty,followUps:c,keyPoints:u,all:e.AllContent}),e.createFlow=function(e){return ne.Z.composeUnion({none:()=>k.of(null),followUps:ne.Z.composeKnot({root:h(e),content:ne.Z.composeKnot({content:ft.createFlow(e.state.view("docId").get(),e.actions,e.state.view("followUps"),e.state.view("itemMenuVisibleFor"),"replyPanel"),counts:n(e,"followUps")})}),keyPoints:ne.Z.composeKnot({root:h(e),content:kt.createFlow(e.state.view("docId").get(),e.actions,e.state.view("keyPoints"),e.state.view("itemMenuVisibleFor"),"replyPanel")}),all:ne.Z.composeKnot({root:h(e),followUps:ne.Z.composeKnot({content:ft.createFlow(e.state.view("docId").get(),e.actions,e.state.view("followUps"),e.state.view("itemMenuVisibleFor"),"replyPanel"),counts:n(e,"followUps")}),keyPoints:ne.Z.composeKnot({content:kt.createFlow(e.state.view("docId").get(),e.actions,e.state.view("keyPoints"),e.state.view("itemMenuVisibleFor"),"replyPanel"),counts:n(e,"keyPoints")})})},(()=>e.state.view((({followUps:e,keyPoints:t})=>({kind:q.isSome(e)&&q.isSome(t)?"all":q.isSome(e)?"followUps":q.isSome(t)?"keyPoints":"none"})))))}}(Bt||(Bt={}));var Gt,Vt=n(78545),zt=n(21867);!function(e){let t,n;!function(e){e.UIPart=ne.UI.Node.make((({notify:e})=>a.createElement(ue.Tertiary,{className:zt.headerButton,name:"hide",title:le.replyPanel.hide,onClick:e("hide"),compact:!0},a.createElement(ce.ChevronDown,null)))),e.createFlow=e=>ne.Z.fromSideEffect((t=>{e.actions.next({kind:B.Kind.toggleReplyPanelMode,docId:e.state.get().docId,trigger:"arrowButton",mode:"compact"})}),k.of(null))}(t||(t={})),function(e){let t,n;!function(e){e.UIPart=ne.UI.Node.make((({state:e})=>a.createElement(N.F.Fragment,null,e.pipe(d.U((({count:e})=>a.createElement(a.Fragment,null,Ye._6(e,le.replyPanel.header.followUps.singular,le.replyPanel.header.followUps.plural)))))))),e.createFlow=e=>()=>e.state.view((({followUps:e})=>(0,i.zG)(e,Re.Hg,(e=>({count:e})))))}(t||(t={})),function(e){const t=ne.UI.Grid.make((({slots:e})=>a.createElement(a.Fragment,null,e.count)));e.UIPart=ne.UI.Knot.make(t,{count:wt.UIPart}),e.createFlow=e=>ne.Z.composeKnot({count:()=>e.state.view((({keyPoints:e})=>({count:(0,Re.Hg)(e),plural:le.replyPanel.header.keyPoints.plural,singular:le.replyPanel.header.keyPoints.singular})))})}(n||(n={})),e.UIPart=ne.UI.Union.make("kind",{none:ne.UI.Node.empty,followUps:t.UIPart,keyPoints:n.UIPart}),e.createFlow=e=>ne.Z.composeUnion({none:()=>k.of(null),followUps:t.createFlow(e),keyPoints:n.createFlow(e)},(()=>e.state.view((({followUps:e,keyPoints:t})=>({kind:q.isSome(e)?"followUps":q.isSome(t)?"keyPoints":"none"})))))}(n||(n={}));const o=ne.UI.Grid.make((({slots:e})=>a.createElement("div",{className:zt.header},a.createElement("div",{className:zt.headerContent},e.content),e.button)));e.UIPart=ne.UI.Knot.make(o,{content:n.UIPart,button:t.UIPart}),e.createFlow=e=>ne.Z.composeKnot({content:n.createFlow(e),button:t.createFlow(e)})}(Gt||(Gt={}));var Ht,Dt,Zt,jt=n(88890);!function(e){let t,n;!function(e){e.UIPart=ne.UI.Node.make((()=>a.createElement("div",{className:jt.sidebarLogo},a.createElement(Be.K,{size:22}))))}(t=e.Header||(e.Header={})),function(e){const t=ne.UI.Grid.make((({state:e,notify:t,slots:n})=>a.createElement(N.F.Fragment,null,e.pipe(d.U((({expanded:e,canShowToggleExpandButton:i,onboardingAvailable:o})=>a.createElement("div",{className:jt.sidebarFooter,key:"footer"},o?n.hint:null,i?a.createElement(ue.Tertiary,{name:"expand",title:e?le.replyPanel.collapse:le.replyPanel.expand,onClick:t({kind:"toggleExpanded",expanded:!e}),compact:!0},e?a.createElement(ce.Collapse,null):a.createElement(ce.Expand,null)):null)))))));e.UIPart=ne.UI.Knot.make(t,{hint:It.UIPart}),e.createFlow=e=>ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>{e.actions.next({kind:B.Kind.toggleReplyPanelExpanded,expanded:t.expanded,docId:e.state.get().docId})}),e.state.view((e=>({expanded:e.expanded,canShowToggleExpandButton:e.hasOverflow,onboardingAvailable:e.onboardingAvailable})))),hint:It.createFlow(e.actions,"replyPanelFooter",e.state.get().docId)})}(n=e.Footer||(e.Footer={}))}(Ht||(Ht={})),function(e){const t=ne.UI.Knot.make($e,{sidebarContent:Ht.Header.UIPart,sidebarFooter:Ht.Footer.UIPart,mainHeader:Gt.UIPart,mainContent:Bt.UIPart});e.UIPart=ne.UI.Composite.make(ne.UI.Grid.make((({slots:e})=>a.createElement("div",{className:Vt.fullReplyPanel},e.content))),t),e.createFlow=e=>ne.Z.composeKnot({root:()=>k.of({width:"auto",height:"auto"}),sidebarContent:()=>k.of(null),sidebarFooter:Ht.Footer.createFlow(e),mainHeader:Gt.createFlow(e),mainContent:Bt.createFlow(e)})}(Dt||(Dt={})),function(e){e.UIPart=ne.UI.Union.make("kind",{hidden:ne.UI.Node.empty,compact:Tt.UIPart,full:Dt.UIPart}),e.createFlow=e=>ne.Z.composeUnion({hidden:()=>k.of(null),compact:Tt.createFlow(e),full:Dt.createFlow(e)},(()=>e.state.view((e=>({kind:e.kind})))))}(Zt||(Zt={}));var Yt,qt=n(51382);!function(e){e.UIPart=ne.UI.Node.make((({notify:e,view:t})=>a.createElement("div",{className:qt.notification},a.createElement("div",{className:qt.iconAndText},a.createElement(ce.NotificationInfo,{width:24,className:qt.icon}),a.createElement(N.F.Fragment,null,t("kind").pipe(d.U((e=>a.createElement("span",null,le.toastNotifications[e])))))),a.createElement(N.F.Fragment,null,t("id").pipe(d.U((t=>a.createElement(ue.Tertiary,{name:"close-notification",onClick:e({kind:"dismiss",id:t}),className:qt.button,theme:"dark",compact:!0},a.createElement(se.JO.Close,null)))))))))}(Yt||(Yt={}));var Wt,Qt=n(88892);!function(e){const t=ne.UI.Grid.make((({slots:e})=>a.createElement(N.F.div,{className:Qt.notificationsContainer},e.notification)));e.UIPart=ne.UI.Composite.make(t,ne.UI.List.make(Je.Bk,Yt.UIPart)),e.createFlow=function(e){return ne.Z.fromSideEffect((t=>{if("dismiss"===t.action.kind)e.actions.next({kind:B.Kind.dismissNotification,notificationId:t.action.id});else(0,S.L0)(t.action.kind)}),e.state)}}(Wt||(Wt={}));var $t,Jt=n(92781);!function(e){e.UIPart=ne.UI.Node.make((({notify:e,state:t,view:n})=>a.createElement("div",{className:Jt.notification},a.createElement(N.F.div,{className:Jt.content},t.pipe(d.U((({kind:t,id:n})=>a.createElement(a.Fragment,null,a.createElement("h1",{className:Jt.header},le.lastingNotifications[t].title),a.createElement("p",{className:Jt.body},le.lastingNotifications[t].body),a.createElement(ue.Primary,{name:"close-button",onClick:e({kind:"dismiss",id:n}),className:Jt.closeButton},le.lastingNotifications[t].closeButton)))))),a.createElement(Be.K,{size:56,className:Jt.logo}),a.createElement(N.F.Fragment,null,n("id").pipe(d.U((t=>a.createElement(ue.Tertiary,{name:"close-notification",onClick:e({kind:"dismiss",id:t}),className:Jt.iconCloseButton,compact:!0},a.createElement(se.JO.Close,{width:13})))))))))}($t||($t={}));var Xt,en=n(88204);!function(e){const t=ne.UI.Grid.make((({slots:e})=>a.createElement(N.F.div,{className:en.notificationsContainer},e.notification)));e.UIPart=ne.UI.Composite.make(t,ne.UI.List.make(Je.Bk,$t.UIPart)),e.createFlow=function(e){return ne.Z.fromSideEffect((t=>{if("dismiss"===t.action.kind)e.actions.next({kind:B.Kind.dismissNotification,notificationId:t.action.id});else(0,S.L0)(t.action.kind)}),e.state)}}(Xt||(Xt={}));var tn,nn,on=n(32243),an=n(73975);function sn(e){return te.CE(e,"updateContextInfoId","kind")}!function(e){e.eqByDocId=an.Uz((e=>e.docId))(z.eo.eq)}(tn||(tn={})),function(e){e.isActionItem=function(e){return e.kind===x.j.Kind.readerActionItem},e.fromMessage=function(e){return te.CE(e,"updateContextInfoId")}}(nn||(nn={}));var rn,ln=n(26328);!function(e){e.Impl=class{constructor(e,t,n,a,s){this._actions=e,this._csActions=a,this._followUps=Q.h.create(new Map),this._keyPoints=Q.h.create(new Map),this._highlights=Q.h.create(new Map),this._subscriptions=new j.w,this._feedbacks=new Map,this._checks=new Map,this._dismissed=new Map,this.followUps=this._followUps.view(),this.keyPoints=this._keyPoints.view(),this.highlights=this._highlights.view(),(0,i.zG)(q.fromNullable("optedIn"===(null==s?void 0:s.kind)?null==s?void 0:s.docs:{}),Y.bw(on.Su(((e,t)=>{var n,o,a;return this._checks.set(e,(0,i.zG)(q.fromNullable(null===(n=null==t?void 0:t.itemStates)||void 0===n?void 0:n.followUps),q.fold((()=>new Set),on.To(new Set,((e,t,n)=>(0,i.zG)(Te.Jr.FollowUp.codec.decode(n),st.g_((()=>t),(n=>n.checked?t.add(e):t)))))))),this._feedbacks.set(e,(0,i.zG)(q.fromNullable(null===(o=null==t?void 0:t.itemStates)||void 0===o?void 0:o.followUps),q.fold((()=>new Map),on.To(new Map,((e,t,n)=>(0,i.zG)(Te.Jr.FollowUp.codec.decode(n),st.g_((()=>t),(n=>n.feedback?t.set(`${e}|${Te.YB.followUp}`,n.feedback):t)))))),(e=>{var n;return(0,i.zG)(q.fromNullable(null===(n=null==t?void 0:t.itemStates)||void 0===n?void 0:n.keyPoints),q.fold((()=>e),on.To(e,((e,t,n)=>(0,i.zG)(Te.Jr.KeyPoint.codec.decode(n),st.g_((()=>t),(n=>n.feedback?t.set(`${e}|${Te.YB.keyPoint}`,n.feedback):t)))))))}),(e=>{var n;return(0,i.zG)(q.fromNullable(null===(n=null==t?void 0:t.itemStates)||void 0===n?void 0:n.highlights),q.fold((()=>e),on.To(e,((e,t,n)=>(0,i.zG)(Te.Jr.Highlight.codec.decode(n),st.g_((()=>t),(n=>n.feedback?t.set(`${e}|${Te.YB.highlight}`,n.feedback):t)))))))}))),this._dismissed.set(e,(0,i.zG)(q.fromNullable(null===(a=null==t?void 0:t.itemStates)||void 0===a?void 0:a.followUps),q.fold((()=>new Set),on.To(new Set,((e,t,n)=>(0,i.zG)(Te.Jr.FollowUp.codec.decode(n),st.g_((()=>t),(n=>n.dismissed?t.add(`${e}|${Te.YB.followUp}`):t)))))),(e=>{var n;return(0,i.zG)(q.fromNullable(null===(n=null==t?void 0:t.itemStates)||void 0===n?void 0:n.keyPoints),q.fold((()=>e),on.To(e,((e,t,n)=>(0,i.zG)(Te.Jr.KeyPoint.codec.decode(n),st.g_((()=>t),(n=>n.dismissed?t.add(`${e}|${Te.YB.keyPoint}`):t)))))))}),(e=>{var n;return(0,i.zG)(q.fromNullable(null===(n=null==t?void 0:t.itemStates)||void 0===n?void 0:n.highlights),q.fold((()=>e),on.To(e,((e,t,n)=>(0,i.zG)(Te.Jr.Highlight.codec.decode(n),st.g_((()=>t),(n=>n.dismissed?t.add(`${e}|${Te.YB.highlight}`):t)))))))}))),t})))),this._subscriptions.add(t.annotations.pipe(d.U((e=>(0,i.zG)(e,o.Su(((e,t)=>(0,i.zG)(t.annotations,Je.hX(nn.isActionItem),Je.UI((e=>({id:e.id,kind:Te.YB.followUp,apiKind:e.kind,checked:!1,feedback:q.none,delta:e.delta}))),ln.nI,q.chain((t=>this._itemsNotDismissed(e,t))),q.map((t=>this._itemsWithFeedback(e,t))),q.map((t=>this._itemsWithChecks(e,t)))))),o.DZ(i.yR))))).subscribe((e=>this._followUps.set(e)))),this._subscriptions.add(t.summaries.pipe(d.U((e=>(0,i.zG)(e,o.Su(((e,t)=>(0,i.zG)(t.items,Je.UI((e=>({id:e.id,kind:Te.YB.keyPoint,apiKind:x.j.Kind.readerSummaryItem,feedback:q.none,delta:e.delta}))),ln.nI,q.chain((t=>this._itemsNotDismissed(e,t))),q.map((t=>this._itemsWithFeedback(e,t)))))),o.DZ(i.yR))))).subscribe((e=>this._keyPoints.set(e)))),this._subscriptions.add(nt.aj([t.annotations,n.view("expandedMessages").pipe(d.U(o.DZ((0,i.ls)(Re.zk,q.map(te.ei("textMap"))))))]).pipe(d.U((([e,t])=>(0,i.zG)(e,o.Su(((e,n)=>(0,i.zG)(n.annotations,Je.DZ((n=>(0,i.zG)(q.fromNullable(n.delta),q.alt((()=>(0,i.zG)(q.fromNullable(t.get(e)),q.map((e=>e.getRichText())),q.map((e=>e.slice(n.span.s,n.span.e)))))),q.map((t=>({id:n.id,docId:e,kind:Te.YB.highlight,apiKind:n.kind,feedback:q.none,span:n.span,delta:t})))))),ln.nI,q.chain((t=>this._itemsNotDismissed(e,t))),q.map((t=>this._itemsWithFeedback(e,t)))))),o.DZ(i.yR))))).subscribe((e=>this._highlights.set(e)))),this._subscriptions.add(this._handleSetItemChecked()),this._subscriptions.add(this._handleItemFeedback()),this._subscriptions.add(this._handleRemoveItem())}_itemFeedback(e,t,n){return(0,i.zG)(q.fromNullable(this._feedbacks.get(e)),q.chain((e=>q.fromNullable(e.get(`${t}|${n}`)))))}_itemsWithFeedback(e,t){return(0,i.zG)(t,ln.UI((t=>({...t,feedback:this._itemFeedback(e,t.id,t.kind)}))))}_itemCheck(e,t){return(0,i.zG)(q.fromNullable(this._checks.get(e)),q.fold((()=>!1),(e=>e.has(t))))}_itemsWithChecks(e,t){return(0,i.zG)(t,ln.UI((t=>({...t,checked:this._itemCheck(e,t.id)}))))}_itemDismissed(e,t,n){return(0,i.zG)(q.fromNullable(this._dismissed.get(e)),q.fold((()=>!1),(e=>e.has(`${t}|${n}`))))}_itemsNotDismissed(e,t){return(0,i.zG)(t,ln.hX((t=>!this._itemDismissed(e,t.id,t.kind))))}_handleSetItemChecked(){return this._actions.pipe(O.ofType(B.Kind.setItemChecked)).subscribe((({docId:e,item:t,checked:n})=>{(0,i.zG)(q.fromNullable(this._checks.get(e)),q.alt((()=>{const t=new Set;return this._checks.set(e,t),q.some(t)})),q.map((e=>n?e.add(t.id):e.delete(t.id)))),this._followUps.modify(o.Su(((e,t)=>this._itemsWithChecks(e,t)))),this._csActions.readerV1UpdateFollowUpItemState({docId:e,item:{id:t.id,kind:Te.YB.followUp,dismissed:this._itemDismissed(e,t.id,Te.YB.followUp),checked:n}})}))}_handleItemFeedback(){return this._actions.pipe(O.ofType(B.Kind.itemFeedback)).subscribe((({docId:e,item:t,feedback:n})=>{(0,i.zG)(q.fromNullable(this._feedbacks.get(e)),q.alt((()=>{const t=new Map;return this._feedbacks.set(e,t),q.some(t)})),Y.bw((e=>e.set(`${t.id}|${t.kind}`,n)))),"followUp"===t.kind?(this._followUps.modify(o.Su(((e,t)=>this._itemsWithFeedback(e,t)))),this._csActions.readerV1UpdateFollowUpItemState({docId:e,item:{id:t.id,kind:Te.YB.followUp,dismissed:this._itemDismissed(e,t.id,Te.YB.followUp),checked:this._itemCheck(e,t.id),feedback:n}})):"keyPoint"===t.kind?(this._keyPoints.modify(o.Su(((e,t)=>this._itemsWithFeedback(e,t)))),this._csActions.readerV1UpdateKeyPointItemState({docId:e,item:{id:t.id,kind:Te.YB.keyPoint,dismissed:this._itemDismissed(e,t.id,Te.YB.keyPoint),feedback:n}})):"highlight"===t.kind?(this._highlights.modify(o.Su(((e,t)=>this._itemsWithFeedback(e,t)))),this._csActions.readerV1UpdateHighlightItemState({docId:e,item:{id:t.id,kind:Te.YB.highlight,dismissed:this._itemDismissed(e,t.id,Te.YB.highlight),feedback:n}})):(0,ie.vE)(t)}))}_handleRemoveItem(){return this._actions.pipe(O.ofType(B.Kind.removeItem)).subscribe((({docId:e,item:t})=>{(0,i.zG)(q.fromNullable(this._dismissed.get(e)),q.alt((()=>{const t=new Set;return this._dismissed.set(e,t),q.some(t)})),Y.bw((e=>e.add(`${t.id}|${t.kind}`)))),"followUp"===t.kind?(this._followUps.modify((0,i.ls)(o.Su(((e,t)=>this._itemsNotDismissed(e,t))),o.DZ(i.yR))),this._csActions.readerV1UpdateFollowUpItemState({docId:e,item:{id:t.id,kind:Te.YB.followUp,dismissed:!0,checked:this._itemCheck(e,t.id),feedback:q.toUndefined(this._itemFeedback(e,t.id,Te.YB.followUp))}})):"keyPoint"===t.kind?(this._keyPoints.modify((0,i.ls)(o.Su(((e,t)=>this._itemsNotDismissed(e,t))),o.DZ(i.yR))),this._csActions.readerV1UpdateKeyPointItemState({docId:e,item:{id:t.id,kind:Te.YB.keyPoint,dismissed:!0,feedback:q.toUndefined(this._itemFeedback(e,t.id,Te.YB.keyPoint))}})):"highlight"===t.kind?(this._highlights.modify((0,i.ls)(o.Su(((e,t)=>this._itemsNotDismissed(e,t))),o.DZ(i.yR))),this._csActions.readerV1UpdateHighlightItemState({docId:e,item:{id:t.id,kind:Te.YB.highlight,dismissed:!0,feedback:q.toUndefined(this._itemFeedback(e,t.id,Te.YB.highlight))}})):(0,ie.vE)(t)}))}dispose(){this._subscriptions.unsubscribe()}}}(rn||(rn={}));const cn=()=>a.createElement("svg",{width:"90",height:"90",viewBox:"0 0 90 90",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{y:"36",width:"64",height:"45",rx:"8",fill:"#E7E9F5"}),a.createElement("rect",{x:"9",y:"27",width:"64",height:"45",rx:"8",fill:"#F9FAFF",stroke:"#0E101A",strokeMiterlimit:"10"}),a.createElement("mask",{id:"mask0_2673_4830",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"8",y:"26",width:"66",height:"47"},a.createElement("rect",{x:"9",y:"27",width:"64",height:"45",rx:"8",fill:"#F9FAFF",stroke:"#0E101A",strokeMiterlimit:"10"})),a.createElement("g",{mask:"url(#mask0_2673_4830)"},a.createElement("path",{d:"M11 70.5L31.5 49",stroke:"#0E101A",strokeMiterlimit:"10"}),a.createElement("path",{d:"M71.5 70.5L51 49",stroke:"#0E101A",strokeMiterlimit:"10"}),a.createElement("path",{d:"M10.6267 28.4514L37.4772 55.4779C39.4493 57.2534 42.4833 57.2534 44.3037 55.4779L71.1542 28.4514",stroke:"#0E101A",strokeMiterlimit:"10"})),a.createElement("circle",{r:"17.5",transform:"matrix(-1 0 0 1 72 27)",fill:"url(#paint0_linear_2673_4830)",stroke:"#0E101A"}),a.createElement("rect",{x:"67",y:"15",width:"10",height:"16",rx:"5",stroke:"#0E101A"}),a.createElement("rect",{x:"63",y:"24",width:"18",height:"14",rx:"3",fill:"#D7F7F0",stroke:"#0E101A"}),a.createElement("circle",{cx:"72",cy:"30",r:"1.5",fill:"#0E101A",stroke:"#0E101A"}),a.createElement("path",{d:"M72 31L72 34",stroke:"#0E101A",strokeWidth:"2",strokeLinecap:"round"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"paint0_linear_2673_4830",x1:"5.5",y1:"30",x2:"26.9487",y2:"-4.25821",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#15C39A"}),a.createElement("stop",{offset:"1",stopColor:"#BBD86D"}))));var dn=n(14213),un=n(27590);function hn(e){return ne.UI.Grid.make((({slots:t,notify:n})=>a.createElement(dn.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:n("overlayClose")},a.createElement(dn.u_,{...(0,F.Sh)(un.modal,e)},a.createElement(ue.Tertiary,{onClick:n("close"),name:"close-button",className:un.closeButton,compact:!0},a.createElement(se.JO.Close,{width:13})),t.header,t.content))))}const mn=({className:e,children:t})=>a.createElement("h1",{...(0,F.Sh)(un.title,e)},t),pn=({children:e})=>a.createElement("footer",{className:un.footer},e),gn=({className:e,children:t})=>a.createElement(dn.u_.Body,{name:"modal-body",className:un.body},a.createElement("main",{className:e},t));var fn,bn=n(61653);!function(e){const t=ne.UI.Node.make((()=>a.createElement("header",{className:bn.header},a.createElement(cn,null),a.createElement(mn,{className:bn.title},le.optInTryItOutModal.title)))),n=ne.UI.Node.make((({notify:e})=>a.createElement(a.Fragment,null,a.createElement(gn,null,le.optInTryItOutModal.body({onDataCollectionPolicyLinkClick:e("dataCollectionPolicyLink"),onPrivacyPolicyLinkClick:e("privacyPolicyLink"),onTermsOfServiceLinkClick:e("termsOfServiceLink")})),a.createElement(pn,null,a.createElement(ue.Tertiary,{onClick:e("notNow"),name:"not-now-button",className:un.button},le.optInTryItOutModal.notNowButton),a.createElement(ue.Primary,{onClick:e("decline"),name:"decline-button",className:un.button},le.optInTryItOutModal.declineButton),a.createElement(ue.Primary,{onClick:e("continue"),name:"continue-button",className:un.button},le.optInTryItOutModal.continueButton)))));e.UIPart=ne.UI.Knot.make(hn(),{header:t,content:n}),e.createFlow=function(e){return ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>{switch(t){case"overlayClose":case"close":e.actions.next({kind:B.Kind.optInTryItOutModalResult,result:"dismiss",docId:e.docId});break;default:(0,S.L0)(t)}}),k.of(null)),header:()=>k.of(null),content:ne.Z.fromSideEffect((t=>{switch(t){case"notNow":e.actions.next({kind:B.Kind.optInTryItOutModalResult,result:"notNow",docId:e.docId});break;case"decline":e.actions.next({kind:B.Kind.optInTryItOutModalResult,result:"decline",docId:e.docId});break;case"continue":e.actions.next({kind:B.Kind.optInTryItOutModalResult,result:"continue",docId:e.docId});break;case"dataCollectionPolicyLink":e.actions.next({kind:B.Kind.dataCollectionPolicyLinkVisited,docId:e.docId});break;case"privacyPolicyLink":e.actions.next({kind:B.Kind.privacyPolicyLinkVisited,docId:e.docId});break;case"termsOfServiceLink":e.actions.next({kind:B.Kind.termsOfServiceLinkVisited,docId:e.docId});break;default:(0,S.L0)(t)}}),k.of(null))})}}(fn||(fn={}));var kn,In=n(55418);!function(e){const t=ne.UI.Node.make((()=>a.createElement("header",{className:In.header},a.createElement(mn,null,le.optInDismissModal.title)))),n=ne.UI.Node.make((({notify:e})=>a.createElement("main",{className:In.main},a.createElement(ue.Primary,{name:"yes-button",onClick:e("yes"),className:In.button},le.optInDismissModal.yesButton),a.createElement(ue.Secondary,{name:"no-button",onClick:e("no"),className:In.button},le.optInDismissModal.noButton))));e.UIPart=ne.UI.Knot.make(hn(In.modal),{header:t,content:n}),e.createFlow=function(e){return ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>{switch(t){case"overlayClose":case"close":e.actions.next({kind:B.Kind.optInDismissModalResult,result:"dismiss",docId:e.docId});break;default:(0,S.L0)(t)}}),k.of(null)),header:()=>k.of(null),content:ne.Z.fromSideEffect((t=>{switch(t){case"no":e.actions.next({kind:B.Kind.optInDismissModalResult,result:"showLaterNo",docId:e.docId});break;case"yes":e.actions.next({kind:B.Kind.optInDismissModalResult,result:"showLaterYes",docId:e.docId});break;default:(0,S.L0)(t)}}),k.of(null))})}}(kn||(kn={}));var wn=n(19888);const yn=()=>a.createElement("svg",{width:"90",height:"90",viewBox:"0 0 90 90",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{y:"36",width:"64",height:"45",rx:"8",fill:"#E7E9F5"}),a.createElement("rect",{x:"9",y:"27",width:"64",height:"45",rx:"8",fill:"#F9FAFF",stroke:"#0E101A",strokeMiterlimit:"10"}),a.createElement("mask",{id:"mask0_2714_10208",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"9",y:"27",width:"64",height:"45"},a.createElement("rect",{x:"9",y:"27",width:"64",height:"45",rx:"8",fill:"#F9FAFF"})),a.createElement("g",{mask:"url(#mask0_2714_10208)"},a.createElement("path",{d:"M11 70.5L31.5 49",stroke:"#0E101A",strokeMiterlimit:"10"}),a.createElement("path",{d:"M71.5 70.5L51 49",stroke:"#0E101A",strokeMiterlimit:"10"}),a.createElement("path",{d:"M10.6267 28.4512L37.4772 55.4777C39.4493 57.2532 42.4833 57.2532 44.3037 55.4777L71.1542 28.4512",stroke:"#0E101A",strokeMiterlimit:"10"})),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M88.9332 26.9666C88.9332 36.8888 80.8896 44.9332 70.9666 44.9332C61.0443 44.9332 53 36.8888 53 26.9666C53 17.0436 61.0443 9 70.9666 9C80.8896 9 88.9332 17.0436 88.9332 26.9666Z",fill:"#15C39A",stroke:"#0E101A"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73.3148 30.8458C73.4211 31.434 73.9741 31.837 74.5717 31.837H76.4543L77.5456 31.6839C75.7997 34.2453 72.768 35.4241 69.4536 34.9039C66.7555 34.4805 64.4378 32.6549 63.4598 30.1052C61.2397 24.3176 65.4666 18.7917 70.9745 18.7917C73.8453 18.7917 76.3637 20.5157 77.8073 22.5452C78.1908 23.0975 78.9493 23.256 79.5024 22.8725C80.0273 22.5085 80.1804 21.8172 79.8648 21.2735C77.8682 18.1567 74.2804 16.1624 70.2457 16.4326C64.9924 16.7849 60.7414 21.0837 60.439 26.3401C60.0883 32.4565 64.9401 37.4504 70.9745 37.4504C74.1444 37.4504 76.9824 36.0701 78.9157 33.8368L78.6869 35.1179V36.2756C78.6869 36.8724 79.0892 37.4262 79.6774 37.5325C80.4499 37.6715 81.1217 37.0817 81.1217 36.3349V29.4014H74.5116C73.7648 29.4014 73.175 30.074 73.3148 30.8458Z",fill:"white"}),a.createElement("path",{d:"M82.2162 52.7185C82.5227 52.0465 83.4773 52.0465 83.7838 52.7185L85.0592 55.5145C85.1453 55.7033 85.2967 55.8547 85.4855 55.9408L88.2815 57.2162C88.9535 57.5227 88.9535 58.4773 88.2815 58.7838L85.4855 60.0592C85.2967 60.1453 85.1453 60.2967 85.0592 60.4855L83.7838 63.2815C83.4773 63.9535 82.5227 63.9535 82.2162 63.2815L80.9408 60.4855C80.8547 60.2967 80.7033 60.1453 80.5145 60.0592L77.7185 58.7838C77.0465 58.4773 77.0465 57.5227 77.7185 57.2162L80.5145 55.9408C80.7033 55.8547 80.8547 55.7033 80.9408 55.5145L82.2162 52.7185Z",fill:"#F8E485",stroke:"#0E101A"}),a.createElement("path",{d:"M42.5482 4.08671C42.9204 3.27071 44.0796 3.27071 44.4518 4.08672L46.0005 7.48188C46.105 7.71115 46.2888 7.89497 46.5181 7.99955L49.9133 9.54819C50.7293 9.92039 50.7293 11.0796 49.9133 11.4518L46.5181 13.0005C46.2888 13.105 46.105 13.2888 46.0005 13.5181L44.4518 16.9133C44.0796 17.7293 42.9204 17.7293 42.5482 16.9133L40.9995 13.5181C40.895 13.2888 40.7112 13.105 40.4819 13.0005L37.0867 11.4518C36.2707 11.0796 36.2707 9.92039 37.0867 9.54819L40.4819 7.99955C40.7112 7.89497 40.895 7.71115 40.9995 7.48188L42.5482 4.08671Z",fill:"#F8E485",stroke:"#0E101A"}));var _n;!function(e){const t=ne.UI.Node.make((()=>a.createElement("header",{className:wn.header},a.createElement(yn,null),a.createElement(mn,{className:wn.title},le.aboutRecapModal.title)))),n=ne.UI.Node.make((({notify:e,view:t})=>a.createElement(a.Fragment,null,a.createElement(gn,null,le.aboutRecapModal.body({onLearMoreLinkClick:e("learnMoreLink")})),a.createElement(pn,null,a.createElement(N.F.Fragment,null,t("canShowTour").pipe(d.U((0,Le.RN)(a.createElement(a.Fragment,null,a.createElement(ue.Tertiary,{onClick:e("close"),name:"close-button",className:un.button},le.aboutRecapModal.closeButton),a.createElement(ue.Primary,{onClick:e("takeATour"),name:"take-a-tour-button",className:un.button},le.aboutRecapModal.takeATourButton)),a.createElement(ue.Primary,{onClick:e("close"),name:"close-button",className:un.button},le.aboutRecapModal.closeButton)))))))));e.UIPart=ne.UI.Knot.make(hn(),{header:t,content:n}),e.createFlow=function(e){return ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>{switch(t){case"overlayClose":case"close":e.actions.next({kind:B.Kind.aboutRecapModalResult,result:"dismiss",docId:e.docId});break;default:(0,S.L0)(t)}}),k.of(null)),header:()=>k.of(null),content:ne.Z.fromSideEffect((t=>{switch(t){case"close":e.actions.next({kind:B.Kind.aboutRecapModalResult,result:"dismiss",docId:e.docId});break;case"takeATour":e.actions.next({kind:B.Kind.aboutRecapModalResult,result:"takeATour",docId:e.docId});break;case"learnMoreLink":e.actions.next({kind:B.Kind.learnMoreLinkVisited,source:"aboutRecapModal",docId:e.docId});break;default:(0,S.L0)(t)}}),e.canShowTour.pipe(d.U((e=>({canShowTour:e})))))})}}(_n||(_n={}));const Cn=()=>a.createElement("svg",{width:"171",height:"24",viewBox:"0 0 171 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.2797 17.687C30.9014 17.543 30.6539 17.2394 30.6539 16.8345C30.6539 16.3435 31.0611 15.9392 31.5561 15.9392C31.7017 15.9392 31.8178 15.9679 31.9197 16.0112C32.5602 16.3002 33.2438 16.4735 34.0735 16.4735C35.5868 16.4735 36.2998 15.7514 36.2998 14.3641V13.9884C35.6446 14.7689 34.9321 15.2453 33.7535 15.2453C31.9344 15.2453 30.2898 13.9305 30.2898 11.6333V11.6046C30.2898 9.29276 31.9633 7.99258 33.7535 7.99258C34.961 7.99258 35.674 8.49815 36.2704 9.14824V9.13363C36.2704 8.54145 36.7653 8.0505 37.3764 8.0505C37.9875 8.0505 38.4819 8.54145 38.4819 9.14824V14.1329C38.4819 15.5202 38.1478 16.5314 37.4925 17.1815C36.7653 17.9041 35.6446 18.2218 34.1318 18.2218C33.0983 18.2218 32.1961 18.0486 31.2797 17.687ZM36.2998 11.6333V11.6046C36.2998 10.5496 35.4701 9.81293 34.3935 9.81293C33.3169 9.81293 32.5019 10.5496 32.5019 11.6046V11.6333C32.5019 12.7023 33.3169 13.4249 34.3935 13.4249C35.4701 13.4249 36.2998 12.6882 36.2998 11.6333Z",fill:"#0E101A"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.2797 17.687C30.9014 17.543 30.6539 17.2394 30.6539 16.8345C30.6539 16.3435 31.0611 15.9392 31.5561 15.9392C31.7017 15.9392 31.8178 15.9679 31.9197 16.0112C32.5602 16.3002 33.2438 16.4735 34.0735 16.4735C35.5868 16.4735 36.2998 15.7514 36.2998 14.3641V13.9884C35.6446 14.7689 34.9321 15.2453 33.7535 15.2453C31.9344 15.2453 30.2898 13.9305 30.2898 11.6333V11.6046C30.2898 9.29276 31.9633 7.99258 33.7535 7.99258C34.961 7.99258 35.674 8.49815 36.2704 9.14824V9.13363C36.2704 8.54145 36.7653 8.0505 37.3764 8.0505C37.9875 8.0505 38.4819 8.54145 38.4819 9.14824V14.1329C38.4819 15.5202 38.1478 16.5314 37.4925 17.1815C36.7653 17.9041 35.6446 18.2218 34.1318 18.2218C33.0983 18.2218 32.1961 18.0486 31.2797 17.687ZM36.2998 11.6333V11.6046C36.2998 10.5496 35.4701 9.81293 34.3935 9.81293C33.3169 9.81293 32.5019 10.5496 32.5019 11.6046V11.6333C32.5019 12.7023 33.3169 13.4249 34.3935 13.4249C35.4701 13.4249 36.2998 12.6882 36.2998 11.6333Z",fill:"#0E101A"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.7341 9.14824C39.7341 8.54145 40.2285 8.0505 40.8401 8.0505C41.4512 8.0505 41.9456 8.54145 41.9456 9.14824V9.49467C42.2662 8.74389 42.7895 8.0505 43.4447 8.0505C44.1288 8.0505 44.5213 8.49815 44.5213 9.11902C44.5213 9.6971 44.143 10.0441 43.6922 10.1453C42.5714 10.4056 41.9456 11.2576 41.9456 12.8181V14.8696C41.9456 15.4764 41.4512 15.9679 40.8401 15.9679C40.2285 15.9679 39.7341 15.4764 39.7341 14.8696V9.14824Z",fill:"#0E101A"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M44.2597 13.6561V13.6274C44.2597 11.9369 45.5544 11.1564 47.4029 11.1564C48.1884 11.1564 48.7559 11.2863 49.3092 11.4741V11.3442C49.3092 10.4343 48.7412 9.92824 47.6356 9.92824C47.0245 9.92824 46.5296 10.0154 46.1077 10.1453C45.9768 10.1886 45.8896 10.2032 45.7877 10.2032C45.2785 10.2032 44.8708 9.81293 44.8708 9.30684C44.8708 8.91711 45.1177 8.58476 45.4677 8.45432C46.166 8.1945 46.9226 8.0505 47.9556 8.0505C49.1631 8.0505 50.0364 8.36824 50.5891 8.91711C51.1713 9.49467 51.4335 10.3477 51.4335 11.3881V14.9129C51.4335 15.5056 50.9533 15.9679 50.3564 15.9679C49.7164 15.9679 49.2945 15.5202 49.2945 15.0575V15.0428C48.7559 15.6355 48.014 16.0253 46.9368 16.0253C45.4677 16.0253 44.2597 15.1879 44.2597 13.6561ZM49.3381 13.1505V12.7602C48.9597 12.587 48.4653 12.4712 47.9262 12.4712C46.9804 12.4712 46.3987 12.8468 46.3987 13.5408V13.5695C46.3987 14.1621 46.8937 14.5086 47.6062 14.5086C48.6398 14.5086 49.3381 13.9451 49.3381 13.1505Z",fill:"#0E101A"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M52.6126 9.14824C52.6126 8.54145 53.107 8.0505 53.7187 8.0505C54.3297 8.0505 54.8247 8.54145 54.8247 9.14824V9.23537C55.3333 8.58476 56.0033 7.99258 57.1235 7.99258C58.1418 7.99258 58.9132 8.44024 59.3204 9.22076C60.0045 8.42615 60.8195 7.99258 61.8814 7.99258C63.526 7.99258 64.5154 8.97502 64.5154 10.8392V14.8696C64.5154 15.4764 64.0204 15.9679 63.4094 15.9679C62.7983 15.9679 62.3033 15.4764 62.3033 14.8696V11.5613C62.3033 10.5209 61.8378 9.98615 61.0086 9.98615C60.1789 9.98615 59.6698 10.5209 59.6698 11.5613V14.8696C59.6698 15.4764 59.1754 15.9679 58.5637 15.9679C57.9527 15.9679 57.4577 15.4764 57.4577 14.8696V11.5613C57.4577 10.5209 56.9927 9.98615 56.163 9.98615C55.3333 9.98615 54.8247 10.5209 54.8247 11.5613V14.8696C54.8247 15.4764 54.3297 15.9679 53.7187 15.9679C53.107 15.9679 52.6126 15.4764 52.6126 14.8696V9.14824Z",fill:"#0E101A"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M65.7092 9.14824C65.7092 8.54145 66.2036 8.0505 66.8153 8.0505C67.4263 8.0505 67.9213 8.54145 67.9213 9.14824V9.23537C68.4299 8.58476 69.0999 7.99258 70.2201 7.99258C71.2384 7.99258 72.0098 8.44024 72.417 9.22076C73.1011 8.42615 73.9161 7.99258 74.978 7.99258C76.6226 7.99258 77.612 8.97502 77.612 10.8392V14.8696C77.612 15.4764 77.1176 15.9679 76.506 15.9679C75.8949 15.9679 75.3999 15.4764 75.3999 14.8696V11.5613C75.3999 10.5209 74.9344 9.98615 74.1052 9.98615C73.2756 9.98615 72.7664 10.5209 72.7664 11.5613V14.8696C72.7664 15.4764 72.272 15.9679 71.6603 15.9679C71.0493 15.9679 70.5548 15.4764 70.5548 14.8696V11.5613C70.5548 10.5209 70.0893 9.98615 69.2596 9.98615C68.4299 9.98615 67.9213 10.5209 67.9213 11.5613V14.8696C67.9213 15.4764 67.4263 15.9679 66.8153 15.9679C66.2036 15.9679 65.7092 15.4764 65.7092 14.8696V9.14824Z",fill:"#0E101A"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M78.3403 13.6561V13.6274C78.3403 11.9369 79.6355 11.1564 81.4829 11.1564C82.269 11.1564 82.8365 11.2863 83.3892 11.4741V11.3442C83.3892 10.4343 82.8223 9.92824 81.7157 9.92824C81.1046 9.92824 80.6102 10.0154 80.1882 10.1453C80.0574 10.1886 79.9702 10.2032 79.8682 10.2032C79.3586 10.2032 78.9514 9.81293 78.9514 9.30684C78.9514 8.91711 79.1988 8.58476 79.5477 8.45432C80.2466 8.1945 81.0032 8.0505 82.0362 8.0505C83.2442 8.0505 84.117 8.36824 84.6697 8.91711C85.2519 9.49467 85.5136 10.3477 85.5136 11.3881V14.9129C85.5136 15.5056 85.0339 15.9679 84.4375 15.9679C83.797 15.9679 83.375 15.5202 83.375 15.0575V15.0428C82.8365 15.6355 82.094 16.0253 81.0179 16.0253C79.5477 16.0253 78.3403 15.1879 78.3403 13.6561ZM83.4187 13.1505V12.7602C83.0403 12.587 82.5454 12.4712 82.0073 12.4712C81.061 12.4712 80.4793 12.8468 80.4793 13.5408V13.5695C80.4793 14.1621 80.9738 14.5086 81.6868 14.5086C82.7198 14.5086 83.4187 13.9451 83.4187 13.1505Z",fill:"#0E101A"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M86.6927 9.14824C86.6927 8.54145 87.1876 8.0505 87.7987 8.0505C88.4103 8.0505 88.9048 8.54145 88.9048 9.14824V9.49467C89.2248 8.74389 89.7486 8.0505 90.4039 8.0505C91.0875 8.0505 91.48 8.49815 91.48 9.11902C91.48 9.6971 91.1016 10.0441 90.6508 10.1453C89.5306 10.4056 88.9048 11.2576 88.9048 12.8181V14.8696C88.9048 15.4764 88.4103 15.9679 87.7987 15.9679C87.1876 15.9679 86.6927 15.4764 86.6927 14.8696V9.14824Z",fill:"#0E101A"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M92.1499 6.34493C92.1499 5.73815 92.6443 5.24719 93.2554 5.24719C93.867 5.24719 94.362 5.73815 94.362 6.34493V14.8696C94.362 15.4764 93.867 15.9679 93.2554 15.9679C92.6443 15.9679 92.1499 15.4764 92.1499 14.8696V6.34493Z",fill:"#0E101A"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M96.1227 18.034C95.8022 17.9187 95.4239 17.6583 95.4239 17.1241C95.4239 16.5893 95.8458 16.2277 96.2972 16.2277C96.4716 16.2277 96.5736 16.2569 96.6608 16.2856C96.85 16.3435 96.9666 16.3728 97.1269 16.3728C97.5194 16.3728 97.7085 16.3002 97.9124 15.91L97.9849 15.7368L95.3225 9.6105C95.2642 9.46597 95.2058 9.24945 95.2058 9.10493C95.2058 8.48354 95.6861 8.0505 96.2972 8.0505C96.85 8.0505 97.1699 8.35363 97.3591 8.87328L99.0473 13.3816L100.677 8.88789C100.852 8.42615 101.171 8.0505 101.739 8.0505C102.307 8.0505 102.786 8.48354 102.786 9.06163C102.786 9.23537 102.729 9.48058 102.685 9.5818L99.9637 16.0691C99.309 17.6437 98.6543 18.2364 97.3302 18.2364C96.8352 18.2364 96.4863 18.1644 96.1227 18.034Z",fill:"#0E101A"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.1008 11.9995C24.1008 18.6268 18.7061 24 12.0509 24C5.39464 24 0 18.6268 0 11.9995C0 5.37208 5.39464 0 12.0509 0C18.7061 0 24.1008 5.37208 24.1008 11.9995Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.1008 11.9995C24.1008 18.6268 18.7061 24 12.0509 24C5.39464 24 0 18.6268 0 11.9995C0 5.37208 5.39464 0 12.0509 0C18.7061 0 24.1008 5.37208 24.1008 11.9995ZM14.4285 13.6262C13.9271 13.6262 13.5312 14.0746 13.6247 14.5913C13.6965 14.9833 14.0674 15.253 14.4676 15.253H15.7304L16.4624 15.1501C15.2921 16.8614 13.2582 17.6488 11.0351 17.3011C9.22527 17.0185 7.67105 15.7989 7.01521 14.0963C5.52624 10.2308 8.36169 6.53964 12.0553 6.53964C13.9804 6.53964 15.6695 7.66172 16.6375 9.01665L16.6385 9.04698C16.8952 9.41523 17.4042 9.52137 17.7751 9.26576C18.1275 9.02207 18.2243 8.56067 18.0122 8.19784H18.0177C16.6788 6.11616 14.273 4.78289 11.5669 4.96376C8.04302 5.19987 5.19234 8.07112 4.98895 11.5814C4.75403 15.6668 8.00821 19.0016 12.0553 19.0016C14.1816 19.0016 16.0849 18.0799 17.3814 16.5885L17.228 17.4441V18.2174C17.228 18.616 17.4978 18.9853 17.8926 19.0568C18.4103 19.15 18.8617 18.7557 18.8617 18.2564V13.6262H14.4285Z",fill:"#15C39A"}));var vn,En=n(94715);!function(e){const t=ne.UI.Node.make((()=>a.createElement("header",{className:En.header},a.createElement(Cn,null),a.createElement(mn,{className:En.title},le.turnOffRecapModal.title)))),n=ne.UI.Node.make((({view:e,notify:t})=>a.createElement(a.Fragment,null,a.createElement(gn,{className:En.main},le.turnOffRecapModal.body()),a.createElement(pn,null,a.createElement(N.F.Fragment,null,e("canHideRecap").pipe(d.U((0,Le.RN)(a.createElement(ue.Secondary,{onClick:t("hideRecap"),name:"hide-recap-button",className:un.button},le.turnOffRecapModal.hideRecapButton),null)))),a.createElement(ue.Primary,{onClick:t("turnOffRecap"),name:"turn-off-recap-button",className:un.button},le.turnOffRecapModal.turnOffRecapButton)))));e.UIPart=ne.UI.Knot.make(hn(En.modal),{header:t,content:n}),e.createFlow=function(e){return ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>{switch(t){case"overlayClose":case"close":e.actions.next({kind:B.Kind.turnOffRecapModalResult,result:"dismiss",docId:e.docId});break;default:(0,S.L0)(t)}}),k.of(null)),header:()=>k.of(null),content:ne.Z.fromSideEffect((t=>{switch(t){case"hideRecap":e.actions.next({kind:B.Kind.turnOffRecapModalResult,result:"hideRecap",docId:e.docId});break;case"turnOffRecap":e.actions.next({kind:B.Kind.turnOffRecapModalResult,result:"turnOffRecap",docId:e.docId});break;default:(0,S.L0)(t)}}),e.state)})}}(vn||(vn={}));var Mn,Un=n(57053),xn=n(36800);!function(e){e.UIPart=ne.UI.Node.make((({view:e,notify:t})=>a.createElement("section",null,a.createElement(Un.i,{maxRating:le.genericFeedbackModal.ratings.length,ratingLabels:le.genericFeedbackModal.ratings,className:xn.ratingContainer,ratingStarsClassName:xn.ratingStars,ratingLegendClassName:xn.ratingLegend,ratingLabelsClassName:xn.ratingLabels,onChange:e=>t({kind:"rating",score:e,label:le.genericFeedbackModal.ratings[e-1]||""})(),ariaLabel:le.genericFeedbackModal.title}),a.createElement(N.F.Fragment,null,e("showRequiredError").pipe(d.U((0,Le.RN)(a.createElement("span",{className:xn.requiredLabel},le.genericFeedbackModal.requiredLabel),null))))))),e.createFlow=function(e){return ne.Z.fromSideEffect((t=>{if("rating"===t.kind)e.set({rating:q.some({score:t.score,label:t.label}),showRequiredError:!1});else(0,S.L0)(t.kind)}),e.pipe(d.U(te.H6("showRequiredError"))))}}(Mn||(Mn={}));var Sn,Nn=n(13853),Fn=n(35515);!function(e){let t;!function(e){e.eq=an.yv}(t||(t={})),e.getUIPart=e=>ne.UI.Node.make((({state:n,notify:o})=>a.createElement("section",null,e.textBoxHeader?a.createElement("label",{htmlFor:"feedback-textbox",className:Fn.textBoxHeader},e.textBoxHeader):null,a.createElement(N.F.div,{name:"feedback-textbox",role:"textbox",...(0,F.Sh)(Fn.textbox,n.pipe(d.U((0,i.ls)(Nn.t9(t.eq)("required"),(0,Le.RN)(Fn.required,void 0))))),contentEditable:!0,"aria-placeholder":e.textBoxPlaceholder,"data-placeholder":e.textBoxPlaceholder,"aria-label":e.textBoxAriaLabel,onInput:e=>o({kind:"textChange",text:e.target instanceof HTMLElement?e.target.innerText:""})()}),a.createElement(N.F.Fragment,null,n.pipe(d.U((0,i.ls)(Nn.t9(t.eq)("required"),(0,Le.RN)(a.createElement("span",{className:Fn.requiredLabel},e.requiredLabel),null)))))))),e.createFlow=function(e){return ne.Z.fromSideEffect((n=>{if("textChange"===n.kind)e.modify((e=>({text:n.text,errors:(0,i.zG)(e.errors,Nn.Od(t.eq)("required"))})));else(0,S.L0)(n.kind)}),e.pipe(d.U(te.ei("errors"))))}}(Sn||(Sn={}));var Pn,Rn=n(15501);!function(e){const t=ne.UI.Node.make((()=>a.createElement("header",{className:Rn.header},a.createElement(Cn,null),a.createElement(mn,{className:Rn.title},le.genericFeedbackModal.title)))),n=ne.UI.Grid.make((({slots:e,notify:t})=>a.createElement(a.Fragment,null,a.createElement(gn,{className:Rn.body},e.rating,e.textBox),a.createElement(pn,null,a.createElement(ue.Tertiary,{name:"cancel-button",className:un.button,onClick:t("cancel")},le.genericFeedbackModal.cancel),a.createElement(ue.Primary,{name:"submit-button",className:un.button,onClick:t("submit")},le.genericFeedbackModal.sendFeedback))))),o=ne.UI.Knot.make(n,{rating:Mn.UIPart,textBox:Sn.getUIPart(le.genericFeedbackModal)});e.UIPart=ne.UI.Knot.make(hn(Rn.modal),{header:t,content:o}),e.createFlow=function(e){const t=Q.h.create({text:"",errors:new Set}),n=Q.h.create({rating:q.none,showRequiredError:!1});return ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>{switch(t){case"overlayClose":case"close":e.actions.next({kind:B.Kind.genericFeedbackModalResult,result:{kind:"dismiss"},docId:e.docId});break;default:(0,S.L0)(t)}}),k.of(null)),header:()=>k.of(null),content:ne.Z.composeKnot({root:ne.Z.fromSideEffect((o=>{switch(o){case"cancel":e.actions.next({kind:B.Kind.genericFeedbackModalResult,result:{kind:"dismiss"},docId:e.docId});break;case"submit":""===t.get().text.trim()&&t.lens("errors").set(new Set(["required"])),q.isNone(n.get().rating)&&n.lens("showRequiredError").set(!0),(0,i.zG)(n.get().rating,q.filter((()=>0===t.get().errors.size)),Y.bw((n=>{e.actions.next({kind:B.Kind.genericFeedbackModalResult,result:{kind:"submit",feedbackText:t.get().text,rating:n},docId:e.docId})})));break;default:(0,S.L0)(o)}}),k.of(null)),rating:Mn.createFlow(n),textBox:Sn.createFlow(t)})})}}(Pn||(Pn={}));var Kn,Ln,Tn,An,Bn,On,Gn,Vn,zn,Hn,Dn=n(46058);!function(e){const t=ne.UI.Node.make((()=>a.createElement("header",{className:Dn.header},a.createElement(Cn,null),a.createElement(mn,{className:Dn.title},le.itemFeedbackModal.title)))),n=ne.UI.Grid.make((({slots:e,notify:t})=>a.createElement(a.Fragment,null,a.createElement(gn,{className:Dn.body},a.createElement("p",{className:Dn.description},le.itemFeedbackModal.description),e.textBox),a.createElement(pn,null,a.createElement(ue.Tertiary,{name:"skip-button",className:un.button,onClick:t("skip")},le.itemFeedbackModal.skip),a.createElement(ue.Primary,{name:"submit-button",className:un.button,onClick:t("submit")},le.itemFeedbackModal.sendFeedback))))),i=ne.UI.Knot.make(n,{textBox:Sn.getUIPart(le.itemFeedbackModal)});e.UIPart=ne.UI.Knot.make(hn(Dn.modal),{header:t,content:i}),e.createFlow=function(e,t){const n=Q.h.create({text:"",errors:new Set});return ne.Z.composeKnot({root:ne.Z.fromSideEffect((n=>{switch(n){case"overlayClose":case"close":e.actions.next({kind:B.Kind.itemFeedbackModalResult,result:{kind:"dismiss"},itemFeedback:t,docId:e.docId});break;default:(0,S.L0)(n)}}),k.of(null)),header:()=>k.of(null),content:ne.Z.composeKnot({root:ne.Z.fromSideEffect((i=>{switch(i){case"skip":e.actions.next({kind:B.Kind.itemFeedbackModalResult,result:{kind:"dismiss"},itemFeedback:t,docId:e.docId});break;case"submit":""===n.get().text.trim()&&n.lens("errors").set(new Set(["required"])),0===n.get().errors.size&&e.actions.next({kind:B.Kind.itemFeedbackModalResult,result:{kind:"submit",feedbackText:n.get().text},itemFeedback:t,docId:e.docId});break;default:(0,S.L0)(i)}}),k.of(null)),textBox:Sn.createFlow(n)})})}}(Kn||(Kn={})),function(e){e.Impl=class{constructor(e,t,n,i){this.docId=e,this.actions=t,this._subscriptions=new j.w,this._subscriptions.add(this.actions.pipe(H.h(i)).subscribe((()=>n.onClose())))}dispose(){this._subscriptions.unsubscribe()}};e.Mock=class{constructor(){this.actions=new we.xQ,this.docId=z.eo.create("doc-id"),this.dispose=i.Q1}}}(Ln||(Ln={})),function(e){class t extends Ln.Impl{constructor(e,t,n,i){super(e,t,n,B.is(B.Kind.aboutRecapModalResult)),this.canShowTour=i}}e.Impl=t;class n extends Ln.Mock{constructor(){super(...arguments),this.canShowTour=Q.h.create(!0)}}e.Mock=n}(Tn||(Tn={})),function(e){class t extends Ln.Impl{constructor(e,t,n){super(e,t,n,B.is(B.Kind.genericFeedbackModalResult))}}e.Impl=t;class n extends Ln.Mock{}e.Mock=n}(An||(An={})),function(e){class t extends Ln.Impl{constructor(e,t,n){super(e,t,n,B.is(B.Kind.itemFeedbackModalResult))}}e.Impl=t;class n extends Ln.Mock{}e.Mock=n}(Bn||(Bn={})),function(e){class t extends Ln.Impl{constructor(e,t,n){super(e,t,n,B.is(B.Kind.optInDismissModalResult))}}e.Impl=t;class n extends Ln.Mock{}e.Mock=n}(On||(On={})),function(e){class t extends Ln.Impl{constructor(e,t,n){super(e,t,n,B.is(B.Kind.optInTryItOutModalResult))}}e.Impl=t;class n extends Ln.Mock{}e.Mock=n}(Gn||(Gn={})),function(e){class t extends Ln.Impl{constructor(e,t,n,o,a){super(e,t,n,B.is(B.Kind.turnOffRecapModalResult)),this._docsStateManager=o,this._itemsManager=a,this.state=Q.h.combine(this._docsStateManager.state,this._itemsManager.followUps,this._itemsManager.keyPoints,(({thread:e,docs:t},n,o)=>({canHideRecap:Array.from(t.entries()).some((([t,a])=>(0,i.zG)(X(e,a,!!n.get(t)||!!o.get(t)),Y.FX(!1))))})))}}e.Impl=t;class n extends Ln.Mock{constructor(){super(...arguments),this.state=Q.h.create({canHideRecap:!0})}}e.Mock=n}(Vn||(Vn={})),function(e){e.optInTryItOut="optInTryItOut",e.optInDismiss="optInDismiss",e.aboutRecap="aboutRecap",e.turnOffRecap="turnOffRecap",e.genericFeedback="genericFeedback",e.itemFeedback="itemFeedback"}(zn||(zn={})),function(e){e.Impl=class{constructor(e,t,n,i){this._actions=e,this._docsStateManager=t,this._itemsManager=n,this._onboardingManager=i,this._subscriptions=new j.w,this._state=Q.h.create(q.none),this.state=this._state.view(),this._modalOperations={onClose:()=>this._hide()},this._subscriptions.add(this._handleOptInTryItOut()),this._subscriptions.add(this._handleOptInDismiss()),this._subscriptions.add(this._handleRequestAboutRecap()),this._subscriptions.add(this._handleTurnOffRecap()),this._subscriptions.add(this._handleGenericFeedback()),this._subscriptions.add(this._handleItemFeedback())}dispose(){this._hide(),this._subscriptions.unsubscribe()}_show(e){this._state.modify((0,i.ls)(Y.bw((e=>e.instance.dispose())),(()=>q.some(this._load(e)))))}_hide(){this._state.modify((0,i.ls)(Y.bw((e=>e.instance.dispose())),(()=>q.none)))}_load(e){switch(e.kind){case zn.optInTryItOut:return this._loadOptInTryItOut(e);case zn.optInDismiss:return this._loadOptInDismiss(e);case zn.aboutRecap:return this._loadAboutRecap(e);case zn.turnOffRecap:return this._loadTurnOffRecap(e);case zn.genericFeedback:return this._loadGenericFeedback(e);case zn.itemFeedback:return this._loadItemFeedback(e);default:(0,S.L0)(e)}}_loadOptInTryItOut(e){const t=new Gn.Impl(e.docId,this._actions,this._modalOperations);return{instance:{kind:zn.optInTryItOut,dispose:()=>t.dispose()},component:ne.UI.mount(fn.UIPart,fn.createFlow(t))}}_loadOptInDismiss(e){const t=new On.Impl(e.docId,this._actions,this._modalOperations);return{instance:{kind:zn.optInDismiss,dispose:()=>t.dispose()},component:ne.UI.mount(kn.UIPart,kn.createFlow(t))}}_loadAboutRecap(e){const t=new Tn.Impl(e.docId,this._actions,this._modalOperations,this._onboardingManager.availableFor(Q.h.create(q.some(e.docId))));return{instance:{kind:zn.aboutRecap,dispose:()=>t.dispose()},component:ne.UI.mount(_n.UIPart,_n.createFlow(t))}}_loadTurnOffRecap(e){const t=new Vn.Impl(e.docId,this._actions,this._modalOperations,this._docsStateManager,this._itemsManager);return{instance:{kind:zn.turnOffRecap,dispose:()=>t.dispose()},component:ne.UI.mount(vn.UIPart,vn.createFlow(t))}}_loadGenericFeedback(e){const t=new An.Impl(e.docId,this._actions,this._modalOperations);return{instance:{kind:zn.genericFeedback,dispose:()=>t.dispose()},component:ne.UI.mount(Pn.UIPart,Pn.createFlow(t))}}_loadItemFeedback(e){const t=new Bn.Impl(e.docId,this._actions,this._modalOperations);return{instance:{kind:zn.itemFeedback,dispose:()=>t.dispose()},component:ne.UI.mount(Kn.UIPart,Kn.createFlow(t,e.feedbackData))}}_handleOptInTryItOut(){return this._actions.pipe(O.ofType(B.Kind.optInTryItOutModal)).subscribe((({docId:e})=>this._show({kind:zn.optInTryItOut,docId:e})))}_handleOptInDismiss(){return this._actions.pipe(O.ofType(B.Kind.optInDismissModal)).subscribe((({docId:e})=>this._show({kind:zn.optInDismiss,docId:e})))}_handleRequestAboutRecap(){return this._actions.pipe(O.ofType(B.Kind.aboutRecapModal)).subscribe((({docId:e})=>this._show({kind:zn.aboutRecap,docId:e})))}_handleTurnOffRecap(){return this._actions.pipe(O.ofType(B.Kind.turnOffRecapModal)).subscribe((({docId:e})=>this._show({kind:zn.turnOffRecap,docId:e})))}_handleGenericFeedback(){return this._actions.pipe(O.ofType(B.Kind.genericFeedbackModal)).subscribe((({docId:e})=>this._show({kind:zn.genericFeedback,docId:e})))}_handleItemFeedback(){return this._actions.pipe(O.ofType(B.Kind.itemFeedback)).subscribe((e=>this._show({kind:zn.itemFeedback,docId:e.docId,feedbackData:te.CE(e,"kind")})))}}}(Hn||(Hn={}));var Zn,jn,Yn,qn,Wn,Qn,$n,Jn,Xn=n(77843);!function(e){let t;!function(e){e.textCopiedSuccess="textCopiedSuccess",e.feedbackSubmittedSuccess="feedbackSubmittedSuccess"}(t=e.Kind||(e.Kind={}))}(Zn||(Zn={})),function(e){let t;!function(e){e.optInDismissShowLaterYes="optInDismissShowLaterYes",e.optInDismissShowLaterNo="optInDismissShowLaterNo",e.turnOffRecap="turnOffRecap"}(t=e.Kind||(e.Kind={}))}(jn||(jn={})),function(e){let t;!function(e){e.isLastingNotification=function(e){return e in jn.Kind},e.isToastNotification=function(e){return e in Zn.Kind}}(t=e.Kind||(e.Kind={})),e.create=function(e,t){return{kind:e,id:ie.iy.create(),dismissTimestamp:Date.now()+t}}}(Yn||(Yn={})),function(e){e.Impl=class{constructor(e,t,n,i){this.actions=e,this._notificationKindRefinement=t,this._notificationDurationMs=n,this._maxNotificationsCountAtOnce=i,this._subscriptions=new j.w,this._state=Q.h.create([]),this.state=this._state.view(),this._subscriptions.add(this._autoDismissNotifications()),this._subscriptions.add(this._handleShowNotifications()),this._subscriptions.add(this._handleDismissNotifications())}_autoDismissNotifications(){return Xn.F(1e3).pipe(h.M(this._state),ee.b((()=>this._state.modify(Je.hX((e=>Date.now()<e.dismissTimestamp)))))).subscribe()}_handleShowNotifications(){return this.actions.pipe(O.ofType(B.Kind.showNotification),d.U(te.ei("notificationKind")),H.h(this._notificationKindRefinement),ee.b((e=>this._state.modify((0,i.ls)(Je.QI(Yn.create(e,this._notificationDurationMs)),Je.ke(this._maxNotificationsCountAtOnce)))))).subscribe()}_handleDismissNotifications(){return this.actions.pipe(O.ofType(B.Kind.dismissNotification),ee.b((({notificationId:e})=>this._state.modify(Je.hX((t=>t.id!==e)))))).subscribe()}dispose(){this._subscriptions.unsubscribe()}}}(qn||(qn={})),function(e){class t extends qn.Impl{constructor(e){super(e,Yn.Kind.isToastNotification,6e3,3)}}e.Impl=t}(Wn||(Wn={})),function(e){class t extends qn.Impl{constructor(e){super(e,Yn.Kind.isLastingNotification,8e3,1)}}e.Impl=t}(Qn||(Qn={})),function(e){e.mock=()=>({docId:z.eo.create("message-100500"),kind:"hidden",expanded:!1,followUps:q.none,keyPoints:q.none,itemMenuVisibleFor:q.none,hasOverflow:!0,onboardingAvailable:!1})}($n||($n={})),function(e){e.empty=function(e){return{docId:e,kind:"hidden",expanded:!1,itemMenuVisibleFor:q.none,hasOverflow:!1}}}(Jn||(Jn={}));class ei{constructor(e,t,n,i,o,a,s){this.actions=e,this._docId=t,this._itemsManager=n,this._onboardingAvailable=i,this._subscriptions=new j.w,this._state=Q.h.create(Jn.empty(this._docId)),this.state=Q.h.combine(this._state,this._onboardingAvailable,this._itemsManager.followUps.view((e=>q.fromNullable(e.get(this._docId)))),this._itemsManager.keyPoints.view((e=>q.fromNullable(e.get(this._docId)))),((e,t,n,i)=>({...e,onboardingAvailable:t,followUps:n,keyPoints:i,kind:q.isSome(n)||q.isSome(i)?"hidden"===e.kind?"compact":e.kind:"hidden"}))),this._subscriptions.add(this._handleToggleReplyPanelMode()),this._subscriptions.add(this._handleToggleReplyPanelExpanded()),this._subscriptions.add(this._handleItemMenuVisibleFor()),this._subscriptions.add(this._handleToggleItemFeedbackMenu()),this._subscriptions.add(this._handleItemMenuActionClick()),this._subscriptions.add(this._handlePanelOverflow()),this._subscriptions.add(this._handleKind()),o.readerV1ReplyPanelInit(this._docId,a,s())}_handleKind(){return this.state.view("kind").pipe(H.h((e=>"full"!==e)),ee.b((()=>{this.actions.next({kind:B.Kind.onboardingAnchorUnmounted,stepNames:["checkItem","itemMenu"],docId:this._docId})}))).subscribe()}_handlePanelOverflow(){return this.actions.pipe(O.ofType(B.Kind.panelOverflow),O.ofDocId(this._docId),H.h((({source:e})=>"replyPanel"===e)),ee.b((({hasOverflow:e})=>this._state.lens("hasOverflow").set(e)))).subscribe()}_handleToggleReplyPanelMode(){return this.actions.pipe(O.ofType(B.Kind.toggleReplyPanelMode),O.ofDocId(this._docId),ee.b((({mode:e})=>this._state.lens("kind").set(e)))).subscribe()}_handleToggleReplyPanelExpanded(){return this.actions.pipe(O.ofType(B.Kind.toggleReplyPanelExpanded),O.ofDocId(this._docId),ee.b((({expanded:e})=>this._state.lens("expanded").set(e)))).subscribe()}_handleItemMenuVisibleFor(){return this.actions.pipe(O.ofType(B.Kind.setItemMenuVisibleFor),d.U((({item:e,docId:t,uiMode:n})=>(0,i.zG)(e,q.filter((()=>t===this._docId&&"replyPanel"===n))))),ee.b((e=>this._state.lens("itemMenuVisibleFor").set((0,i.zG)(e,q.map((e=>({id:e.id,kind:e.kind,feedbackMenuActive:!1})))))))).subscribe()}_handleToggleItemFeedbackMenu(){return this.actions.pipe(O.ofType(B.Kind.toggleItemFeedbackMenu),O.ofDocId(this._docId),O.ofUIMode("replyPanel"),ee.b((({menuOpen:e})=>this._state.lens("itemMenuVisibleFor").modify(q.map((t=>({...t,feedbackMenuActive:e}))))))).subscribe()}_handleItemMenuActionClick(){return this.actions.pipe(H.h((0,Le.Kg)(B.is(B.Kind.copyItem),B.is(B.Kind.replyToItem),B.is(B.Kind.removeItem),B.is(B.Kind.itemFeedback),B.is(B.Kind.setItemChecked))),O.ofDocId(this._docId),O.ofUIMode("replyPanel"),ee.b((()=>this._state.lens("itemMenuVisibleFor").set(q.none)))).subscribe()}dispose(){this._subscriptions.unsubscribe()}}var ti=n(61202),ni=n(63551),ii=n(59468),oi=n(98403),ai=n(44586),si=n(89068),ri=n(91224),li=n(52965);class ci{constructor(e,t,n=2e3){this._openReplyFieldTimeout=n,this._subscriptions=new j.w,this._expandedMessageNodes=Q.h.create(new Map),this._replyFields=Q.h.create(new Map),this._subscriptions.add(e.pipe(d.U((0,i.ls)(te.ei("messages"),o.UI(te.ei("messageNode"))))).subscribe(oi.wW(this._expandedMessageNodes))),this._subscriptions.add(t.subscribe(oi.wW(this._replyFields)))}replyToMessage(e,t){return new ai.y((t=>t.next(q.fromNullable(this._replyFields.get().get(e))))).pipe(c.w(q.fold((()=>(0,i.zG)(this._openReplyField(e),st.g_((e=>k.of(st.t$(e))),(()=>this._replyFields.pipe(d.U(o.P5(z.eo.eq)(e)),re.oA,f.q(1),d.U(st.F2),si.V(this._openReplyFieldTimeout),ri.K((()=>k.of(st.t$(new Error("Timed out opening reply field")))))))))),(e=>k.of(st.F2(e))))),d.U(st.UI((e=>(e.focus(),t?this._insertQuote(e,t):void 0)))))}_openReplyField(e){return(0,i.zG)(st.ij(new Error(`Message ${e} not expanded`))(this._expandedMessageNodes.get().get(e)),st.tS((e=>st.ij(new Error("No reply button found"))(e.querySelector(li.gj)))),st.Y$((e=>e instanceof HTMLElement),(()=>new Error("Button is not an HTMLElement"))),st.UI((e=>{e.click()})))}_insertQuote(e,t){const n=self.getSelection();if(n){const i=n.getRangeAt(0);i.collapse(!1);const o="<br>"===e.innerHTML?null:document.createElement("br"),a=document.createElement("blockquote");a.className="gmail_quote",a.style.margin="0px 0px 0px 0.8ex",a.style.borderLeft="1px solid rgb(204, 204, 204)",a.style.paddingLeft="1ex",a.innerHTML=ii.V.renderToHtml(t),i.insertNode(o||a),o&&o.insertAdjacentElement("afterend",a);const s=document.createElement("br"),r=document.createElement("br");a.insertAdjacentElement("afterend",r),a.insertAdjacentElement("afterend",s),i.setStartAfter(s),i.collapse(!0),n.removeAllRanges(),n.addRange(i)}}dispose(){this._subscriptions.unsubscribe()}}var di,ui=n(84017),hi=n(55421),mi=n(13116),pi=n(598),gi=n(93497),fi=n(2768);class bi{constructor(e){this._actions=e,this._subscription=new j.w}addEffects(...e){for(const t of e)this._subscription.add(t(this._actions).subscribe((e=>this._actions.next(e))))}dispose(){this._subscription.unsubscribe()}}function ki(e,t,n){return Q.h.combine(e.highlights,e.followUps,e.keyPoints,t.state.view("thread"),t.state.view("docs"),n,((e,t,n,a,s,r)=>(0,i.zG)(e,o.Su(((e,o)=>(0,i.zG)(q.fromNullable(r.expandedMessages.get(e)),q.chain(Re.zk),q.map((e=>({docId:e.id,textMap:e.textMap,textNode:e.bodyNode,annotations:o}))),q.filter((()=>(0,i.zG)(q.fromNullable(s.get(e)),q.fold(i.jv,(o=>function(e,t,n,o){return!(0,i.zG)(t.highlightsEnabled,Y.FX(!1))&&(0,i.zG)(J(e,t,n,o,!0),Y.FX(!0))}(a,o,t.has(e),n.has(e)))))))))),o.DZ(i.yR))))}!function(e){e.tracking=function(e,t){return(0,i.ls)(O.ofType(e),ee.b(t),pi.c(p.E))},e.logAction=function(e){return(0,i.ls)(ee.b((t=>e.trace(`[${t.kind}]`,te.CE(t,"kind")))),pi.c(p.E))},e.replyToItem=function(e){return(0,i.ls)(O.ofType(B.Kind.replyToItem),c.w((({docId:t,item:n})=>e.replyToMessage(t,n.delta))),d.U(st.g_((e=>({kind:B.Kind.replyToItemResult,result:st.t$(e)})),(()=>({kind:B.Kind.replyToItemResult,result:st.F2(void 0)})))))},e.reply=function(e){return(0,i.ls)(O.ofType(B.Kind.reply),c.w((({docId:t})=>e.replyToMessage(t))),d.U(st.g_((e=>({kind:B.Kind.replyResult,result:st.t$(e)})),(()=>({kind:B.Kind.replyResult,result:st.F2(void 0)})))))},e.copyItem=function(){return(0,i.ls)(O.ofType(B.Kind.copyItem),c.w((({item:e})=>(0,ct.v)((0,tt.l)(e.delta,"")))),d.U(st.g_((e=>({kind:B.Kind.copyItemResult,result:st.t$(e)})),(()=>({kind:B.Kind.copyItemResult,result:st.F2(void 0)})))))},e.closeRecapBarPopupOnHighlightMenuShow=function(){return(0,i.ls)(H.h(B.is(B.Kind.setHighlightMenuVisibleFor)),d.U(te.ei("item")),re.oA,d.U((e=>({kind:B.Kind.setRecapBarPopup,popupKind:q.none,docId:e.docId,source:"api"}))))},e.closeRecapBarPopupOnItemMenuShow=function(){return(0,i.ls)(O.ofType(B.Kind.setItemMenuVisibleFor),H.h((({item:e,uiMode:t})=>q.isSome(e)&&"replyPanel"===t)),d.U((({docId:e})=>({kind:B.Kind.setRecapBarPopup,popupKind:q.none,docId:e,source:"api"}))))},e.closeHighlightMenuOnExternalPopupShow=function(){return(0,i.ls)(H.h((0,Le.Kg)((0,Le.W9)(B.is(B.Kind.setRecapBarPopup),(({popupKind:e})=>q.isSome(e))),(0,Le.W9)(B.is(B.Kind.setItemMenuVisibleFor),(({item:e})=>q.isSome(e))))),d.U((({docId:e})=>({kind:B.Kind.setHighlightMenuVisibleFor,item:q.none,docId:e,source:"api"}))))},e.closeReplyPanelItemMenuOnExternalPopupShow=function(){return(0,i.ls)(O.ofType(B.Kind.setRecapBarPopup),H.h((({popupKind:e})=>q.isSome(e))),d.U((({docId:e})=>({kind:B.Kind.setItemMenuVisibleFor,item:q.none,docId:e,uiMode:"replyPanel",source:"api"}))))},e.toggleActiveHighlightMenu=function(e){return()=>(e||p.E).pipe(gi.n((e=>null===e)),l.skipBy(I.Cn.getEqById()),d.U((e=>({kind:B.Kind.setHighlightMenuVisibleFor,item:q.fromNullable(null==e?void 0:e.annotation),source:"user"}))))},e.openModalsOnMenuItemClick=function(){return(0,i.ls)(O.ofType(B.Kind.recapMenuItemClick),d.U((({item:e,docId:t})=>{switch(e){case"about":return q.some({kind:B.Kind.aboutRecapModal,docId:t,source:"settingsMenu"});case"feedback":return q.some({kind:B.Kind.genericFeedbackModal,docId:t});case"turnOff":return q.some({kind:B.Kind.turnOffRecapModal,docId:t});case"hide":case"show":return q.none;default:(0,S.L0)(e)}})),re.oA)},e.showCopyNotification=function(){return(0,i.ls)(O.ofType(B.Kind.copyItemResult),H.h((({result:e})=>st.tO(e))),d.U((()=>({kind:B.Kind.showNotification,notificationKind:Zn.Kind.textCopiedSuccess}))))},e.showItemFeedbackNotification=function(){return(0,i.ls)(O.ofType(B.Kind.itemFeedbackModalResult),H.h((({result:e})=>"submit"===e.kind)),d.U((()=>({kind:B.Kind.showNotification,notificationKind:Zn.Kind.feedbackSubmittedSuccess}))))},e.showGenericFeedbackNotification=function(){return(0,i.ls)(O.ofType(B.Kind.genericFeedbackModalResult),H.h((({result:e})=>"submit"===e.kind)),d.U((()=>({kind:B.Kind.showNotification,notificationKind:Zn.Kind.feedbackSubmittedSuccess}))))},e.showTurnoffNotification=function(){return(0,i.ls)(O.ofType(B.Kind.turnOffRecapModalResult),H.h((({result:e})=>"turnOffRecap"===e)),d.U((()=>({kind:B.Kind.showNotification,notificationKind:jn.Kind.turnOffRecap}))))},e.showOptInDismissNotification=function(){return(0,i.ls)(O.ofType(B.Kind.optInDismissModalResult),d.U(te.ei("result")),H.h((e=>"showLaterYes"===e||"showLaterNo"===e)),d.U((e=>({kind:B.Kind.showNotification,notificationKind:"showLaterYes"===e?jn.Kind.optInDismissShowLaterYes:"showLaterNo"===e?jn.Kind.optInDismissShowLaterNo:(0,S.L0)(e)}))))},e.highlightMenuUnmounted=function(e,t,n){return()=>t.pipe(fi.R(n),g.h({kind:B.Kind.onboardingAnchorUnmounted,stepNames:["highlightMenu"],docId:e}))},e.firstHighlightMounted=function(e,t,n,o){return()=>t.geometry.pipe(fi.R(o),H.h((e=>e.size>0)),d.U((e=>(0,i.zG)(Array.from(e.values()),W.Ew((({rects:e})=>e.some((e=>e.width>40)))),q.map(te.ei("rects")),q.chain(W.Ew((e=>e.width>40)))))),re.oA,f.q(1),d.U((t=>({kind:B.Kind.onboardingAnchorMounted,stepName:"firstHighlight",docId:e,anchorNode:{getBoundingClientRect:()=>{const e=(0,mi.Z)(t,n.textNode.rect.getCurrent().client,n.textNode.scroll.getCurrent());return DOMRect.fromRect({x:e.left+40,y:e.top,width:0,height:e.height})}}}))))},e.closeItemMenuOnScroll=function(){return(0,i.ls)(O.ofType(B.Kind.panelScroll),d.U((({source:e,docId:t})=>({kind:B.Kind.setItemMenuVisibleFor,item:q.none,uiMode:e,docId:t,source:"api"}))))},e.optInDismiss=function(e){return(0,i.ls)(O.ofType(B.Kind.optInDismissModalResult),ee.b((({result:t})=>{switch(t){case"dismiss":break;case"showLaterYes":e.readerV1OptOut({hoursToWaitBeforeShowingAgain:24});break;case"showLaterNo":e.readerV1OptOut({hoursToWaitBeforeShowingAgain:1440});break;default:(0,S.L0)(t)}})),pi.c(p.E))},e.optInTryItOut=function(e){return(0,i.ls)(O.ofType(B.Kind.optInTryItOutModalResult),ee.b((({result:t})=>{switch(t){case"notNow":case"dismiss":case"decline":break;case"continue":e.readerV1OptIn();break;default:(0,S.L0)(t)}})),pi.c(p.E))},e.turnOffRecap=function(e){return(0,i.ls)(O.ofType(B.Kind.turnOffRecapModalResult),ee.b((({result:t})=>{switch(t){case"dismiss":case"hideRecap":break;case"turnOffRecap":e.readerV1ToggleFeature({enabled:!1});break;default:(0,S.L0)(t)}})),pi.c(p.E))},e.showOnboardingOnTakeATour=function(){return(0,i.ls)(O.ofType(B.Kind.aboutRecapModalResult),H.h((({result:e})=>"takeATour"===e)),d.U((({docId:e})=>({kind:B.Kind.onboardingSetKind,onboardingKind:q.some("general"),docId:e}))))}}(di||(di={}));var Ii=n(77471),wi=n(13027),yi=n(68282),_i=n(5142);const Ci=({onHover:e=i.Q1,onPlacementChange:t=i.Q1,referenceElement:n,children:o,onPopperMount:s=i.Q1})=>{const r=a.useRef(null),[l,c]=a.useState(null),[d,u]=a.useState(null),h=(0,oe.sJ)();a.useEffect((()=>{l&&s(l)}),[l]);const{styles:m,attributes:p,state:g}=(0,wi.D)(n,l,{placement:"top",modifiers:[{name:"preventOverflow",options:{padding:8}},{name:"offset",options:{offset:[0,yi.u]}},{name:"arrow",options:{element:d,padding:5}},{name:"eventListeners",enabled:!1},h]}),f=(null==g?void 0:g.placement)||null;return a.useEffect((()=>{f!==r.current&&(r.current=f,t(q.fromNullable(f)))})),a.createElement("div",{ref:c,style:{...m.popper,zIndex:1},className:_i.popover,onMouseMove:()=>null==e?void 0:e(!0),onMouseLeave:()=>null==e?void 0:e(!1),...p.popper},o,a.createElement(yi.Q,{ref:u,style:m.arrow,placement:f}))};var vi;!function(e){const t=ne.UI.Grid.make((({state:e,slots:t,notify:n})=>a.createElement(N.F.Fragment,null,e.pipe(d.U((({highlightNode:e,hovered:i,docId:o})=>a.createElement(Ci,{key:"highlight-menu",referenceElement:e,onHover:e=>i!==e&&n({kind:"hovered",hovered:e})(),onPlacementChange:e=>n({kind:"placementChange",placement:e})(),onPopperMount:e=>n({kind:"mount",node:e,docId:o})()},a.createElement(lt,null,a.createElement(N.F.Fragment,null,t.menu),a.createElement(Ge.u,{title:le.highlightMenu.logoTooltip},a.createElement("div",{className:Ii.logoContainer},a.createElement(Be.K,{size:16}))))))))))),n=pt.getUIPart(le.highlightMenu.actions,ce.InlineHighlightsDisabled),o=ne.UI.Knot.make(t,{menu:n});e.UIPart=ne.UI.Union.asOption(o),e.createFlow=function(e){return ne.Z.composeUnion({None:()=>k.of(null),Some:ne.Z.composeKnot({value:ne.Z.composeKnot({root:ne.Z.fromSideEffect((t=>{switch(t.kind){case"hovered":e.actions.next({kind:B.Kind.highlightMenuHovered,hovered:t.hovered});break;case"placementChange":e.onPlacementChange(t.placement);break;case"mount":e.actions.next({kind:B.Kind.onboardingAnchorMounted,stepName:"highlightMenu",anchorNode:t.node,docId:t.docId});break;default:(0,S.L0)(t)}}),e.state.view(q.map(te.H6("highlightNode","hovered","docId"))).pipe(re.oA)),menu:ne.Z.fromSideEffect((0,i.ls)(pt.toReaderAction("highlights"),(t=>e.actions.next(t))),e.state.pipe(re.oA,d.U((e=>({item:e.item,docId:e.docId,feedback:e.feedback,feedbackMenuPlacement:e.feedbackMenuPlacement,disablePositionUpdates:!0,uiMode:"highlights"})))))})})},(()=>e.state))}}(vi||(vi={}));var Ei=n(62337);class Mi{constructor(e,t,n,o){this.actions=e,this._itemsManager=t,this._activeAnnotation=n,this._layout=o,this._state=Q.h.create(q.none),this._subscriptions=new j.w,this.state=Q.h.combine(this._state,this._itemsManager.highlights,((e,t)=>(0,i.zG)(e,q.chain((e=>(0,i.zG)(q.fromNullable(t.get(e.docId)),q.chain(Je.Ew((t=>t.id===e.item.id))),q.map((t=>({item:t,docId:e.docId,highlightNode:e.highlightNode,hovered:e.hovered,feedbackMenuPlacement:e.feedbackMenuPlacement,feedback:st.Yo((()=>e.feedbackMenuActive))(t.feedback)}))))))))).view(),this._subscriptions.add(this._handleSetHighlightMenuVisibleFor()),this._subscriptions.add(this._handleToggleHighlightFeedbackMenu()),this._subscriptions.add(this._handleHighlightMenuActionClick()),this._subscriptions.add(this._handleMenuHovered())}onPlacementChange(e){this._state.modify(q.map((t=>({...t,feedbackMenuPlacement:(0,i.zG)(e,q.map((e=>"top"===e?"top-end":"bottom"===e?"bottom-end":e)))}))))}_handleSetHighlightMenuVisibleFor(){this.actions.pipe(O.ofType(B.Kind.setHighlightMenuVisibleFor),d.U(te.ei("item")),h.M(this._activeAnnotation),ee.b((([e,t])=>(0,i.zG)(G.Y(q.option)({item:e,activeAnnotation:q.fromNullable(t)}),q.fold((()=>this._state.set(q.none)),(({item:e,activeAnnotation:t})=>this._state.modify((n=>q.some({item:e,docId:e.docId,hovered:!1,highlightNode:{getBoundingClientRect:()=>this._getTargetBoundingClientRect(t)},feedbackMenuActive:!1,feedbackMenuPlacement:(0,i.zG)(n,q.chain(te.ei("feedbackMenuPlacement")))}))))))))).subscribe()}_handleToggleHighlightFeedbackMenu(){return this.actions.pipe(O.ofType(B.Kind.toggleItemFeedbackMenu),O.ofUIMode("highlights"),ee.b((({menuOpen:e})=>this._state.modify(q.map((t=>({...t,feedbackMenuActive:e}))))))).subscribe()}_handleHighlightMenuActionClick(){return this.actions.pipe(H.h((0,Le.Kg)(B.is(B.Kind.copyItem),B.is(B.Kind.replyToItem),B.is(B.Kind.removeItem),B.is(B.Kind.itemFeedback),B.is(B.Kind.setItemChecked))),O.ofUIMode("highlights"),ee.b((()=>this._state.set(q.none)))).subscribe()}_handleMenuHovered(){return this.actions.pipe(O.ofType(B.Kind.highlightMenuHovered)).subscribe((({hovered:e})=>this._state.modify(q.map((t=>({...t,hovered:e}))))))}_getTargetBoundingClientRect(e){var t,n;const o=null!==(n=null===(t=this._layout.mouse.get().offset)||void 0===t?void 0:t.left)&&void 0!==n?n:e.activeHighlightRect.left+.5*e.activeHighlightRect.width,a=e.highlightRects.filter((e=>e.left<=o&&e.left+e.width>=o)),s=Math.min(...a.map((e=>e.top))),r=Math.max(...a.map((e=>e.top+e.height))),l=(0,mi.Z)(Ei.Wm.create({left:o,width:0,top:s,height:r-s}),this._layout.textNode.rect.getCurrent().client,this._layout.textNode.scroll.getCurrent());return DOMRect.fromRect((0,i.zG)(L(l,K(e.activeHighlightRect)),(e=>({x:e.left,y:e.top,width:e.width,height:e.height}))))}dispose(){this._subscriptions.unsubscribe()}}var Ui=n(55935);class xi{constructor(e,t,n,o){this._actions=e,this._itemsManager=t,this._layout=n,this._activeAnnotation=o,this._subscriptions=new j.w,this._highlightMenuViewModel=new Mi(this._actions,this._itemsManager,this._activeAnnotation,this._layout),this.cardHovered=this._highlightMenuViewModel.state.view(q.fold(i.jv,te.ei("hovered"))),this.cardDismissed=this._highlightMenuViewModel.state.view(q.isNone).pipe(Ui.T(1),H.h(ie.fQ)),this.view=k.of(ne.UI.mount(vi.UIPart,vi.createFlow(this._highlightMenuViewModel)))}dispose(){this._subscriptions.unsubscribe(),this._highlightMenuViewModel.dispose()}}var Si=n(18505),Ni=n(2780),Fi=n(19019);class Pi{constructor(e,t,n,o,s,l,c,u,h,m,p=r.Y.create("gmail.reader.panelInjectionV1")){this._getEnv=m,this._logger=p,this._subs=new j.w,this._recapBarInjections=new Map,this._replyFormInjections=new Map,this._subs.add(e.pipe(b.O(Fi.Of.empty()),Ke.G(),d.U((([e,t])=>({...t,updated:Ki(e.updated,e.messages,t.updated,t.messages)}))),H.h((e=>e.added.size>0||e.updated.size>0||e.removed.size>0)),ee.b((({added:e,updated:t,removed:o,messages:s})=>{t.forEach((e=>{var t;null===(t=this._recapBarInjections.get(e))||void 0===t||t.dispose(),this._recapBarInjections.delete(e),this._logger.trace("Recap bar disposed: message updated")})),o.forEach((e=>{var t;null===(t=this._recapBarInjections.get(e))||void 0===t||t.dispose(),this._recapBarInjections.delete(e),this._logger.trace("Recap bar disposed: message removed")}));for(const o of s.values())(0,i.zG)(o,q.fromPredicate((n=>e.has(n.id)||t.has(n.id))),q.chain(Ri),q.chain((e=>G.Y(q.option)({injectBefore:(0,i.zG)(q.fromNullable(e.firstElementChild),q.filter((e=>e instanceof HTMLElement))),injectionParent:q.some(e)}))),Y.bw((({injectBefore:e,injectionParent:t})=>{var i;const s=n(o.id),r=Si.VB.get({monitorAs:"reader-recap-bar"}).inject(Ni.EM.fromDocument(e.ownerDocument,"grammarly-extension"),(n=>t.insertBefore(n,e)),(()=>a.createElement(v.y,{env:this._getEnv()},a.createElement("div",{style:{margin:"4px -6px 0 0"}},a.createElement(s,null)))));null===(i=this._recapBarInjections.get(o.id))||void 0===i||i.dispose(),this._recapBarInjections.set(o.id,r),this._logger.trace("Recap bar injected")})))}))).subscribe()),this._subs.add(t.pipe(H.h((e=>e.added.size>0||e.updated.size>0||e.removed.size>0)),ee.b((({added:e,updated:t,removed:n,forms:s})=>{t.forEach((e=>{var t;null===(t=this._replyFormInjections.get(e))||void 0===t||t.dispose(),this._replyFormInjections.delete(e),this._logger.trace("Reply panel disposed: form updated")})),n.forEach((e=>{var t;null===(t=this._replyFormInjections.get(e))||void 0===t||t.dispose(),this._replyFormInjections.delete(e),this._logger.trace("Reply panel disposed: form removed")}));for(const n of s.values())(0,i.zG)(n,q.fromPredicate((({messageId:n})=>e.has(n)||t.has(n))),q.chain((({formEl:e,messageId:t})=>G.Y(q.option)({insertBefore:q.fromNullable(e.closest("table[role=presentation]")),messageId:q.some(t)}))),q.chain((({insertBefore:e,messageId:t})=>G.Y(q.option)({injectBefore:q.some(e),injectionParent:(0,i.zG)(q.fromNullable(e.parentElement),q.filter((e=>e instanceof HTMLElement))),messageId:q.some(t)}))),Y.bw((({injectBefore:t,injectionParent:n,messageId:i})=>{var s;const r=o(i,e.has(i)),l=Si.VB.get({monitorAs:"reader-reply-panel"}).inject(Ni.EM.fromDocument(t.ownerDocument,"grammarly-extension"),(e=>n.insertBefore(e,t)),(()=>a.createElement(v.y,{env:this._getEnv()},a.createElement("div",{style:{margin:"0 0 8px 48px"}},a.createElement(r,null)))));null===(s=this._replyFormInjections.get(i))||void 0===s||s.dispose(),this._replyFormInjections.set(i,l),this._logger.trace("Reply panel injected")})))}))).subscribe());const g=Si.VB.get({monitorAs:"reader-modals-and-notifications"}).inject(Ni.EM.fromDocument(document,"grammarly-extension"),Ni.zs.appendChild(document.documentElement),(()=>a.createElement(v.y,{env:this._getEnv()},a.createElement(N.F.Fragment,null,l.state.view(q.fold((()=>null),(({component:e})=>e))),a.createElement(c,null),s.state.view("ui")))));this._subs.add((()=>g.dispose())),h.next((()=>a.createElement(v.y,{env:this._getEnv()},a.createElement(u,null))))}dispose(){this._subs.unsubscribe();for(const e of this._recapBarInjections.values())e.dispose(),this._logger.trace("Recap bar disposed");for(const e of this._replyFormInjections.values())e.dispose(),this._logger.trace("Reply panel disposed")}}function Ri(e){var t;return(0,i.zG)(q.fromNullable(null===(t=e.bodyNode.node.parentElement)||void 0===t?void 0:t.parentElement),q.filter((e=>e instanceof HTMLElement)))}function Ki(e,t,n,o){const a=(0,i.zG)(e,Nn.DZ(an.w4)((e=>(0,i.zG)(q.fromNullable(t.get(e)),q.chain(Ri)))));return(0,i.zG)(n,Nn.hX((e=>(0,i.zG)(q.fromNullable(o.get(e)),q.chain(Ri),q.fold(i.jv,(e=>a.has(e)))))))}var Li=n(48424),Ti=n(97757),Ai=n(67434),Bi=n(44212),Oi=n(78146),Gi=n(85321),Vi=n(12126),zi=n(70631),Hi=n(44126);class Di{constructor(e,t,n,o=r.Y.create("gmail.reader.remoteData")){this._checkingService=e,this._threadContext=t,this._logger=o,this._subscriptions=new j.w,this._docInfo=Q.h.create(new Map),this._summaries=Q.h.create(new Map),this._annotations=Q.h.create(new Map),this._pendingUpdates=Q.h.create(new Map),this._errors=Q.h.create(new Map),this.docInfo=this._docInfo.view(),this.summaries=this._summaries.view(),this.annotations=this._annotations.view(),this.pendingUpdates=this._pendingUpdates.view(),this.errors=this._errors.view(),this._subscriptions.add(this._threadContext.view((e=>new Set(e.messageIndexToIdMap.values()))).pipe((0,Ti.Gx)(n),Ai.R(((e,t)=>new Set(Array.from(e).concat(Array.from(t)))),new Set),(0,Re.Yp)(an.yv),(0,Hi.c)(this._threadContext),Bi.u(),Oi.v(i.yR),Gi.zg((e=>e.pipe(c.w((e=>this._updateContextInfoAndGetChecks(e).pipe(ee.b((e=>this._logger.debug("Received message",e))),Ai.R(((e,t)=>[...e,t]),[]),d.U(ln.nI),re.oA,ee.b((t=>this._updateChecksState(e,t)))))))))).subscribe())}_updateChecksState(e,t){const n=t[0].updateContextInfoId,o=!!t.find(x.j.isUpdateContextInfoFinished);(0,i.zG)(t,W.Ew(x.j.Reader.isDocInfo),Y.bw((t=>this._docInfo.modify((n=>{return new Map(n).set(e,(i=t,te.CE(i,"kind")));var i})))));const a=t.filter(x.j.Reader.isDocAnnotation);(0,i.zG)(ln.nI(a),q.alt((()=>o?q.some(a):q.none)),Y.bw((t=>this._annotations.modify((i=>new Map(i).set(e,{updateContextInfoId:n,annotations:t.map(nn.fromMessage)}))))));const s=(0,i.zG)(t,W.hX(x.j.Reader.isSummaryItem),W.u4(new Map,((e,t)=>e.set(t.id,t))));(0,i.zG)(t,W.Ew(x.j.Reader.isSummaryFinished),q.map((e=>(0,i.zG)(e.summaryItems,W.UI((e=>q.fromNullable(s.get(e)))),W.oA,W.UI(sn)))),Y.bw((t=>this._summaries.modify((i=>new Map(i).set(e,{updateContextInfoId:n,items:t})))))),o&&this._pendingUpdates.modify((t=>(0,i.zG)(new Map(t),(t=>(t.delete(e),t)))))}_updateContextInfoAndGetChecks(e){return(0,i.zG)(function(e,t){return(0,i.zG)(st.ij(new Li.Pi(`message ${e} is not expanded`))(t.expandedMessages.get(e)),st.tS((t=>zi.d6(t)?st.F2(t.value):st.t$(new Li.Pi(zi.IR(t)?t.error.message:`message ${e} not extracted`)))),st.tS((e=>G.Y(st.wE)({containerType:st.F2("email"),docid:st.F2(e.id),title:t.subject,delta:st.F2(e.textMap.getRichText()),siblingIndex:st.F2(e.index),authors:(0,i.zG)(t.loggedUser,st.UI((t=>[{email:e.context.author.email,name:e.context.author.name,currentSessionUser:e.context.author.email===t.email}]))),audience:(0,i.zG)(t.loggedUser,st.UI((t=>e.context.audience.map((e=>({email:e.email,name:e.email,currentSessionUser:e.email===t.email}))))),st.tS((e=>G.Y(st.wE)({recipients:st.F2(e),channelId:t.threadId,channelName:t.subject})))),metadata:st.F2([e.context.metadata])}))))}(e,this._threadContext.get()),st.g_((t=>(this._errors.modify((n=>new Map(n).set(e,t))),this._logger.warn(`Extraction error for ${e}`,t),p.E)),(t=>(this._errors.modify((t=>(0,i.zG)(new Map(t),(t=>(t.delete(e),t))))),this._logger.info(`Getting checks for ${e}`),Vi.D(this._checkingService.get().updateContextInfo(t))))),c.w(st.g_((t=>(this._errors.modify((n=>new Map(n).set(e,t))),this._logger.warn(`updateContextInfo error for ${e}`,t),p.E)),(t=>(this._pendingUpdates.modify((n=>new Map(n).set(e,t))),this._checkingService.get().messages.pipe(H.h((0,Le.W9)((0,Le.Kg)(x.j.isReader,x.j.isUpdateContextInfoFinished),(e=>e.updateContextInfoId===t)))))))))}dispose(){this._subscriptions.unsubscribe()}}var Zi=n(84603),ji=n(29567);var Yi,qi,Wi,Qi,$i,Ji,Xi,eo;function to(e,t,n){return(0,i.zG)(G.Y(q.option)({baseFeedback:no(e.docId,t,n),subject:(0,i.zG)(q.some(e.item.apiKind),q.filter(Te.PJ.isNotDebugAnnotation))}),q.map((t=>({...t.baseFeedback,subject:t.subject,subtype:"highlights"===e.uiMode?"inline":"panel",itemDelta:e.item.delta}))))}function no(e,t,n){return(0,i.zG)(q.fromNullable(t.get().expandedMessages.get(e)),q.chain(Re.zk),q.chain((o=>G.Y(q.option)({emailSubject:q.fromEither(t.get().subject),emailDelta:q.some(o.textMap.getRichText()),emailMetadata:q.some(o.context.metadata),threadId:q.fromEither(t.get().threadId),docFilteredMetadata:q.some((0,i.zG)(q.fromNullable(n.docInfo.get().get(e)),q.chain((e=>e.filtered)),q.map((e=>({kind:"docFiltered",version:e.version,reasons:e.reasons})))))}))),q.map((t=>({docContext:{docid:e,title:t.emailSubject,delta:t.emailDelta,containerType:"email",audience:{channelId:t.threadId}},metadata:(0,i.zG)([q.some(t.emailMetadata),t.docFilteredMetadata],W.oA)}))))}function io(e,t,n){const o=(0,i.zG)(t,q.fold((()=>[]),Je.qo)),a=(0,i.zG)(n,q.fold((()=>[]),Je.qo));return(0,i.zG)(e,xe.fold({followUps:()=>o,keyPoints:()=>a,all:()=>[...o,...a]}),Je.UI((e=>({delta:e.delta,type:e.apiKind}))))}function oo(e,t,n,m,g,b,I,_,C,v,E=s.O,M=r.Y.create("gmail.reader.threadIntegrationV1")){const U=new j.w,x=ie.iy.create(),N=()=>n.view("threadId").view((0,i.ls)(q.fromEither,q.toUndefined)).get(),F=(0,ie.Vo)((()=>E().bgRpc.api)),P=new Map,R=new Map,K=new we.xQ,L=new bi(K),T=Q.h.create(!1);U.add(function(e){return e.pipe(O.ofType(B.Kind.optInTryItOutModalResult),d.U((({result:e})=>{switch(e){case"decline":case"notNow":return!0;case"continue":case"dismiss":return!1;default:(0,S.L0)(e)}})))}(K).subscribe(oi.wW(T)));const V=Q.h.combine(b.view((e=>"optedIn"===e.kind?Te.t.optedIn:"optedOut"!==e.kind||(0,ui.U7)(e)?Te.t.notOptedInYet:Te.t.optedOut)),T,((e,t)=>t?Te.t.optedOut:e)),z=new Di(e,n,V.view((e=>e===Te.t.optedIn)).pipe(H.h(ie.fQ))),D=(0,hi._)(t).pipe(l.shareReplay({bufferSize:1,refCount:!0})),Y=new ci(m,D.pipe(d.U((0,i.ls)(te.ei("forms"),o.UI((e=>e.textField)))))),$=new rn.Impl(K,z,n,I,b.get()),J=new Z.Impl(K,I,b,z,v),X=Q.h.create(null),oe=new Ue(n,J,$,b.view((e=>"optedIn"===e.kind&&e.onboarding||{})),I,K,X),se=new Hn.Impl(K,J,$,oe),le=new Wn.Impl(K),ce=g?null:new ni.u(ki($,J,n),t,((e,t,n,i,o)=>new ti.j(e,t,(e=>new y._(e,!0,X)),((e,t)=>{const i=new xi(K,$,t,e);return L.addEffects(di.highlightMenuUnmounted(n,i.cardDismissed,o)),i}),((e,t,i,a)=>(L.addEffects(di.firstHighlightMounted(n,t,e,o)),new A(e,t,i,a,E))),(e=>new w({...e,offByTextPositionChange:void 0})),!1)),((e,t)=>({highlightId:e,annotation:t,highlightColor:null,highlightDisplayFormat:null,highlightLiveliness:null}))),de=g?null:new Pi(m,D,(e=>()=>ne.UI.mount(Lt.UIPart,Lt.createFlow(((e,t,n,o,a,s)=>(0,i.zG)(q.fromNullable(P.get(e)),q.getOrElse((()=>{const i=new Ae(K,e,E().config.bundleInfo.browser,t,J,V,n.view((t=>t.messageIndexToIdMap.get(t.messageCount-1)===e)),s.availableFor(Q.h.create(q.some(e))),o,a,N);return P.set(e,i),i}))))(e,$,n,C,x,oe),oe.state.view("activeStep")))),((e,t)=>()=>ne.UI.mount(Zt.UIPart,Zt.createFlow(((e,t,n,o,a,s)=>(0,i.zG)(s?q.none:q.fromNullable(R.get(e)),q.getOrElse((()=>{const i=new ei(K,e,t,a.availableFor(Q.h.create(q.some(e))),n,o,N);return R.set(e,i),i}))))(e,$,C,x,oe,t)))),oe,se,(()=>ne.UI.mount(Wt.UIPart,Wt.createFlow(le))),(()=>{const e=a.useRef(new Qn.Impl(K));return ae.P.useEffectOnWillUnmount((()=>e.current.dispose())),ne.UI.mount(Xt.UIPart,Xt.createFlow(e.current))}),_,E);return ce&&U.add(((e,t,n,i)=>e.hoveredAnnotation.pipe(d.U((e=>e?{annotation:e,hoveredOn:Date.now()}:null)),Ke.G(),ee.b((([e,o])=>{if(e&&null===o){const o=e.annotation.annotation;t.readerV1HighlightHover(Date.now()-e.hoveredOn,o.id,o.docId,n,i())}}))))(ce,C,x,N).subscribe()),U.add(((e,t,n,o,a)=>e.pipe(d.U((({forms:e,added:t})=>Array.from(e.values()).filter((({messageId:e})=>t.has(e))))),Ie.b((e=>k.of(...e))),h.M(t),ee.b((([{initTime:e,messageId:t},a])=>{o.readerV1ReplyStart(a.messageCount,t,n,Date.now()-e,(0,i.zG)(a.threadId,q.fromEither,q.toUndefined))})),Gi.zg((([e])=>u.R(e.buttonEl,"click").pipe(h.M(k.of(e),Zi.x.getRecipientsContextEventObservable(e.formEl,null),t),H.h((([e,t,n])=>n.length>0)),Gi.zg((([e,t,n,o])=>(0,i.zG)(G.Y(q.option)({message:(0,i.zG)(q.fromNullable(o.expandedMessages.get(t.messageId)),q.chain(Re.zk)),loggedUser:q.fromEither(o.loggedUser)}),q.fold((()=>p.E),(({message:e,loggedUser:s})=>Vi.D((0,ji.j)(s.email,(0,i.zG)(n,W.UI((e=>ji.G.create(e.email))),W.oA),(e=>a.get().isGenericEmailDomain(e)))).pipe(d.U((i=>({message:e,isExternalComm:i,threadContext:o,recipients:n,data:t}))))))))),ee.b((({data:e,recipients:t,threadContext:a,message:s,isExternalComm:r})=>{o.readerV1ReplySent(a.messageCount,e.messageId,s.context.audience.length,(0,Re.Y2)(s.textMap.getPlainText()),t.length,n,Date.now()-e.startTime,(0,i.zG)(q.fromEither(r),q.flatten,q.toUndefined),(0,i.zG)(a.threadId,q.fromEither,q.toUndefined))})))))))(D,n,x,C,F).subscribe()),U.add(((e,t,n,o)=>e.pipe(d.U((e=>(0,i.zG)(q.fromNullable(e.messageIndexToIdMap.get(e.messageCount-1)),q.chain((t=>q.fromNullable(e.expandedMessages.get(t)))),q.chain(Re.zk),q.map((t=>({lastMessage:t,ctx:e})))))),re.oA,f.q(1),c.w((({lastMessage:e,ctx:n})=>Vi.D((0,ji.j)(e.context.author.email,e.context.audience.map((e=>e.email)),(e=>t.get().isGenericEmailDomain(e)))).pipe(d.U((t=>({lastMessage:e,ctx:n,isExternalComm:t})))))),ee.b((({lastMessage:e,ctx:t,isExternalComm:a})=>{o.readerV1SessionStart(e.id,e.context.audience.length,(0,Re.Y2)(e.textMap.getPlainText()),t.messageCount,n,(0,i.zG)(q.fromEither(a),q.flatten,q.toUndefined),(0,i.zG)(t.threadId,q.fromEither,q.toUndefined))}))))(n,F,x,C).subscribe()),U.add(function(e,t,n,o){return e.pipe(d.U((e=>(0,i.zG)(Array.from(e.expandedMessages.values()),Je.DZ(Re.zk),Nn.nI(Li.mq.eqByDocId)))),(0,Re.Yp)(Li.mq.eqByDocId),Ie.b((e=>k.of(...e))),Gi.zg((a=>Vi.D((0,ji.j)(a.context.author.email,a.context.audience.map((e=>e.email)),(e=>t.get().isGenericEmailDomain(e)))).pipe(d.U((t=>({msg:a,isExternalComm:(0,i.zG)(q.fromEither(t),q.flatten,q.toUndefined),threadId:(0,i.zG)(e.get().threadId,q.fromEither,q.toUndefined),messageCount:e.get().messageCount}))),ee.b((({msg:e,isExternalComm:t,threadId:i,messageCount:a})=>{o.readerV1MessageOpen(e.index===a-1,a,e.id,(0,Re.Y2)(e.textMap.getPlainText()),e.context.audience.length,n,t,i)}))))))}(n,F,x,C).subscribe()),L.addEffects(di.logAction(r.Y.create("gmail.reader.actions")),di.optInDismiss(I),di.optInTryItOut(I),di.turnOffRecap(I),di.reply(Y),di.replyToItem(Y),di.copyItem(),di.closeHighlightMenuOnExternalPopupShow(),di.closeRecapBarPopupOnItemMenuShow(),di.closeRecapBarPopupOnHighlightMenuShow(),di.closeReplyPanelItemMenuOnExternalPopupShow(),di.toggleActiveHighlightMenu((null==ce?void 0:ce.activeAnnotation)||p.E),di.openModalsOnMenuItemClick(),di.showCopyNotification(),di.showItemFeedbackNotification(),di.showGenericFeedbackNotification(),di.showTurnoffNotification(),di.showOptInDismissNotification(),di.closeItemMenuOnScroll(),di.showOnboardingOnTakeATour(),Yi.itemLooked(e,n,z),Yi.itemCopy(e,n,z),Yi.itemRemove(e,n,z),Yi.itemReply(e,n,z),Yi.itemCheck(e,n,z),Yi.itemFeedback(e,n,z),Yi.recapPanelReady(e,n,z,V),Yi.recapBarDataPopupOpened(e,n,z,$),qi.copy(C,x,N),qi.remove(C,x,N),qi.reply(C,x,N),qi.check(C,x,N),qi.feedback(C,x,N),qi.itemMenuOpen(C,x,N),qi.highlightMenuOpen(C,x,N),Wi.shown(C,x,N),Wi.dismiss(C,x,N),Wi.next(C,x,N),Wi.prev(C,x,N),Wi.setKind(C,x,N),Qi.tryItOutClicked(C,x,N),Qi.dismissClicked(C,x,N),Qi.tryItOutModalResult(C,x,N),Qi.dismissModalResult(C,x,N),$i.toggleHighlights(C,x,N),$i.reply(C,x,N),$i.showAnyway(C,x,N),$i.recapBarToggle(C,x,N),$i.menuItemClick(C,x,N),Ji.toggleExpand(C,x,N),Ji.toggleMode(C,x,N),Xi.aboutRecapResult(C,x,N),Xi.turnOffRecapResult(C,x,N),Xi.genericFeedbackResult(C,x,N),Xi.itemFeedbackResult(C,x,N),eo.learnMore(C,x,N),eo.dataCollectionPolicy(C,x,N),eo.privacyPolicy(C,x,N),eo.termsOfService(C,x,N)),M.debug(`Thread integration created for thread #${N()||"unknown"}`),()=>{C.readerV1SessionEnd(x,N()),le.dispose(),L.dispose(),z.dispose(),Array.from(P.values()).forEach((e=>e.dispose())),P.clear(),Array.from(R.values()).forEach((e=>e.dispose())),R.clear(),null==de||de.dispose(),$.dispose(),null==ce||ce.dispose(),Y.dispose(),J.dispose(),se.dispose(),oe.dispose(),U.unsubscribe(),M.debug("Thread integration disposed")}}!function(e){e.itemLooked=function(e,t,n){return di.tracking(B.Kind.setItemMenuVisibleFor,(o=>{return(0,i.zG)(G.Y(q.option)({baseFeedback:no(o.docId,t,n),itemDelta:(0,i.zG)(o.item,q.map((e=>e.delta))),subject:(0,i.zG)(o.item,q.map((e=>e.apiKind)),q.filter(Te.PJ.isNotDebugAnnotation)),subtype:q.some((a=o.uiMode,"highlights"===a?"inline":"panel"))}),Y.bw((t=>e.get().sendReaderFeedback({...t.baseFeedback,kind:x.e.readerLooked,subject:t.subject,subtype:t.subtype,itemDelta:t.itemDelta}))));var a}))},e.itemCopy=function(e,t,n){return di.tracking(B.Kind.copyItem,(o=>(0,i.zG)(to(o,t,n),Y.bw((t=>e.get().sendReaderFeedback({...t,kind:x.e.readerCopy}))))))},e.itemRemove=function(e,t,n){return di.tracking(B.Kind.removeItem,(o=>(0,i.zG)(to(o,t,n),Y.bw((t=>e.get().sendReaderFeedback({...t,kind:x.e.readerIgnore}))))))},e.itemReply=function(e,t,n){return di.tracking(B.Kind.replyToItem,(o=>(0,i.zG)(to(o,t,n),Y.bw((t=>e.get().sendReaderFeedback({...t,kind:x.e.readerReply}))))))},e.itemCheck=function(e,t,n){return di.tracking(B.Kind.setItemChecked,(o=>(0,i.zG)(to(o,t,n),Y.bw((t=>e.get().sendReaderFeedback({...t,kind:o.checked?x.e.readerCheck:x.e.readerUncheck}))))))},e.itemFeedback=function(e,t,n){return di.tracking(B.Kind.itemFeedback,(o=>(0,i.zG)(to(o,t,n),Y.bw((t=>e.get().sendReaderFeedback({...t,kind:o.feedback===Te.h2.good?x.e.readerLike:o.feedback===Te.h2.bad?x.e.readerDislike:(0,S.vE)(o.feedback)}))))))},e.recapBarDataPopupOpened=function(e,t,n,a){return di.tracking(B.Kind.setRecapBarPopup,(({docId:s,popupKind:r})=>(0,i.zG)(G.Y(q.option)({feedback:no(s,t,n),popupKind:(0,i.zG)(r,q.filter(Se.isMoreDataPopupKind)),items:q.some({followUps:(0,i.zG)(a.followUps.get(),o.P5(z.eo.eq)(s)),keyPoints:(0,i.zG)(a.keyPoints.get(),o.P5(z.eo.eq)(s))})}),Y.bw((({feedback:t,popupKind:n,items:i})=>{e.get().sendReaderFeedback({kind:x.e.readerPanelOpened,docContext:t.docContext,metadata:t.metadata,subtype:n,items:io(n,i.followUps,i.keyPoints)})})))))},e.recapPanelReady=function(e,t,n,o){return a=>nt.aj([o,n.docInfo]).pipe(d.U((([e,t])=>e===Te.t.optedIn?q.some(t):q.none)),re.oA,d.U((e=>(0,i.zG)(Array.from(e.values()),Nn.nI(tn.eqByDocId)))),(0,Re.Yp)(tn.eqByDocId),Ie.b((e=>k.of(...e))),ee.b((o=>(0,i.zG)(no(o.docId,t,n),Y.bw((t=>e.get().sendReaderFeedback({kind:x.e.readerPanelReady,docContext:t.docContext,metadata:t.metadata})))))),pi.c(p.E))}}(Yi||(Yi={})),function(e){e.check=function(e,t,n){return di.tracking(B.Kind.setItemChecked,(({checked:i,uiMode:o,docId:a,item:s})=>{e.readerV1FollowUpCheck(s.id,a,o,t,i,n())}))},e.feedback=function(e,t,n){return di.tracking(B.Kind.itemFeedback,(({feedback:i,item:o,docId:a,uiMode:s})=>{switch(o.kind){case Te.YB.followUp:"good"===i?e.readerV1FollowUpThumbsUpClick(o.id,a,s,t,n()):e.readerV1FollowUpThumbsDownClick(o.id,a,s,t,n());break;case Te.YB.keyPoint:"good"===i?e.readerV1KeyPointThumbsUpClick(o.id,a,s,t,n()):e.readerV1KeyPointThumbsDownClick(o.id,a,s,t,n());break;case Te.YB.highlight:"good"===i?e.readerV1HighlightThumbsUpClick(o.id,a,s,t,n()):e.readerV1HighlightThumbsDownClick(o.id,a,s,t,n());break;default:(0,S.L0)(o)}}))},e.reply=function(e,t,n){return di.tracking(B.Kind.replyToItem,(({item:i,docId:o,uiMode:a})=>{switch(i.kind){case Te.YB.followUp:e.readerV1FollowUpReplyItemClick(i.id,o,a,t,n());break;case Te.YB.keyPoint:e.readerV1KeyPointReplyItemClick(i.id,o,a,t,n());break;case Te.YB.highlight:e.readerV1HighlightReplyItemClick(i.id,o,a,t,n());break;default:(0,S.L0)(i)}}))},e.copy=function(e,t,n){return di.tracking(B.Kind.copyItem,(({item:i,docId:o,uiMode:a})=>{switch(i.kind){case Te.YB.followUp:e.readerV1FollowUpCopyItemClick(i.id,o,a,t,n());break;case Te.YB.keyPoint:e.readerV1KeyPointCopyItemClick(i.id,o,a,t,n());break;case Te.YB.highlight:e.readerV1HighlightCopyItemClick(i.id,o,a,t,n());break;default:(0,S.L0)(i)}}))},e.remove=function(e,t,n){return di.tracking(B.Kind.removeItem,(({item:i,docId:o,uiMode:a})=>{switch(i.kind){case Te.YB.followUp:e.readerV1FollowUpRemoveItemClick(i.id,o,a,t,n());break;case Te.YB.keyPoint:e.readerV1KeyPointRemoveItemClick(i.id,o,a,t,n());break;case Te.YB.highlight:e.readerV1HighlightRemoveItemClick(i.id,o,a,t,n());break;default:(0,S.L0)(i)}}))},e.itemMenuOpen=function(e,t,n){return di.tracking(B.Kind.setItemMenuVisibleFor,(({item:o,docId:a,uiMode:s})=>{(0,i.zG)(o,Y.bw((i=>{e.readerV1ItemMenuOpen(i.id,i.kind,a,s,t,n())})))}))},e.highlightMenuOpen=function(e,t,n){return di.tracking(B.Kind.setHighlightMenuVisibleFor,(({item:o})=>{(0,i.zG)(o,Y.bw((i=>{e.readerV1ItemMenuOpen(i.id,i.kind,i.docId,"highlights",t,n())})))}))}}(qi||(qi={})),function(e){e.shown=function(e,t,n){return di.tracking(B.Kind.onboardingShown,(({docId:i,stepName:o})=>{e.readerV1OnboardingPopupShow(i,o,t,n())}))},e.dismiss=function(e,t,n){return di.tracking(B.Kind.onboardingDismiss,(({docId:i,stepName:o})=>{e.readerV1OnboardingPopupDismiss(i,o,t,n())}))},e.next=function(e,t,n){return di.tracking(B.Kind.onboardingNext,(({docId:i,stepName:o})=>{e.readerV1OnboardingPopupNavigationButtonClick("next",i,o,t,n())}))},e.prev=function(e,t,n){return di.tracking(B.Kind.onboardingPrev,(({docId:i,stepName:o})=>{e.readerV1OnboardingPopupNavigationButtonClick("prev",i,o,t,n())}))},e.setKind=function(e,t,n){return di.tracking(B.Kind.onboardingSetKind,(({docId:o,onboardingKind:a})=>{(0,i.zG)(a,Y.bw((i=>{switch(i){case"replyPanel":e.readerV1ReplyPanelHintButtonClick(o,t,n());break;case"followUps":e.readerV1FollowUpsPanelHintButtonClick(o,t,n());break;case"keyPoints":e.readerV1KeyPointsPanelHintButtonClick(o,t,n());break;case"general":break;default:(0,S.L0)(i)}})))}))}}(Wi||(Wi={})),function(e){e.tryItOutClicked=function(e,t,n){return di.tracking(B.Kind.optInTryItOutModal,(({docId:i})=>{e.readerV1OptInHeaderTryItOutClick(i,t,n())}))},e.dismissClicked=function(e,t,n){return di.tracking(B.Kind.optInDismissModal,(({docId:i})=>{e.readerV1OptInHeaderDismissClick(i,t,n())}))},e.tryItOutModalResult=function(e,t,n){return di.tracking(B.Kind.optInTryItOutModalResult,(({docId:i,result:o})=>{switch(o){case"dismiss":e.readerV1OptInPanelDismissClick(i,t,n());break;case"notNow":e.readerV1OptInPanelNotNowClick(i,t,n());break;case"decline":e.readerV1OptInPanelDeclineClick(i,t,n());break;case"continue":e.readerV1OptInPanelContinueClick(i,t,n());break;default:(0,S.L0)(o)}}))},e.dismissModalResult=function(e,t,n){return di.tracking(B.Kind.optInDismissModalResult,(({docId:i,result:o})=>{switch(o){case"dismiss":e.readerV1OptInDismissModalDismissClick(i,t,n());break;case"showLaterYes":e.readerV1OptInDismissModalLaterYesClick(i,t,n());break;case"showLaterNo":e.readerV1OptInDismissModalLaterNoClick(i,t,n());break;default:(0,S.L0)(o)}}))}}(Qi||(Qi={})),function(e){e.toggleHighlights=function(e,t,n){return di.tracking(B.Kind.toggleInlineHighlights,(({enabled:i,docId:o})=>{e.readerV1HighlightsToggleClick(i,o,t,n())}))},e.reply=function(e,t,n){return di.tracking(B.Kind.reply,(({popupKind:i,docId:o})=>{switch(i){case"followUps":e.readerV1FollowUpsPanelReplyClick(o,t,n());break;case"keyPoints":e.readerV1KeyPointsPanelReplyClick(o,t,n());break;case"all":e.readerV1AllDataPanelReplyClick(o,t,n());break;default:(0,S.L0)(i)}}))},e.showAnyway=function(e,t,n){return di.tracking(B.Kind.showAnyway,(({docId:i})=>{e.readerV1LowQualityContentShow(i,t,n())}))},e.recapBarToggle=function(e,t,n){return di.tracking(B.Kind.toggleRecapBar,(({docId:i,isCompact:o,source:a})=>{switch(a){case"logoButton":e.readerV1RecapBarLogoToggleClick(!o,i,t,n());break;case"settingsMenu":e.readerV1RecapBarOptionsVisibilityToggleClick(!o,i,t,n());break;default:(0,S.L0)(a)}}))},e.menuItemClick=function(e,t,n){return di.tracking(B.Kind.recapMenuItemClick,(({item:i,docId:o})=>{e.readerV1RecapBarOptionsItemClick(i,o,t,n())}))}}($i||($i={})),function(e){e.toggleExpand=function(e,t,n){return di.tracking(B.Kind.toggleReplyPanelExpanded,(({expanded:i,docId:o})=>{i?e.readerV1ReplyPanelExpand(o,t,n()):e.readerV1ReplyPanelCollapse(o,t,n())}))},e.toggleMode=function(e,t,n){return di.tracking(B.Kind.toggleReplyPanelMode,(({trigger:i,mode:o,docId:a})=>{"full"===o?e.readerV1ReplyPanelShow(a,t,i,n()):e.readerV1ReplyPanelHide(a,t,n())}))}}(Ji||(Ji={})),function(e){e.aboutRecapResult=function(e,t,n){return di.tracking(B.Kind.aboutRecapModalResult,(({docId:i,result:o})=>{switch(o){case"takeATour":e.readerV1AboutPanelTakeATourClick(i,t,n());break;case"dismiss":e.readerV1AboutPanelCloseClick(i,t,n());break;default:(0,S.L0)(o)}}))},e.turnOffRecapResult=function(e,t,n){return di.tracking(B.Kind.turnOffRecapModalResult,(({docId:i,result:o})=>{switch(o){case"turnOffRecap":e.readerV1TurnOffPanelTurnOffClick(i,t,n());break;case"dismiss":e.readerV1TurnOffPanelDismissClick(i,t,n());break;case"hideRecap":e.readerV1TurnOffPanelHideRecapClick(i,t,n());break;default:(0,S.L0)(o)}}))},e.genericFeedbackResult=function(e,t,n){return di.tracking(B.Kind.genericFeedbackModalResult,(({docId:i,result:o})=>{switch(o.kind){case"dismiss":e.readerV1GenericFeedbackPanelDismissClick(i,t,n());break;case"submit":e.readerV1GenericFeedbackPanelSubmitClick(o.feedbackText,i,o.rating.label,o.rating.score,t,n());break;default:(0,S.L0)(o)}}))},e.itemFeedbackResult=function(e,t,n){return di.tracking(B.Kind.itemFeedbackModalResult,(({docId:i,result:o,itemFeedback:a})=>{switch(o.kind){case"dismiss":e.readerV1ItemFeedbackPanelDismissClick(a.feedback,a.item.id,a.item.kind,i,a.uiMode,t,n());break;case"submit":e.readerV1ItemFeedbackPanelSubmitClick(o.feedbackText,a.feedback,a.item.id,a.item.kind,i,a.uiMode,t,n());break;default:(0,S.L0)(o)}}))}}(Xi||(Xi={})),function(e){e.learnMore=function(e,t,n){return di.tracking(B.Kind.learnMoreLinkVisited,(({docId:i,source:o})=>{switch(o){case"optInRecapBar":e.readerV1OptInHeaderLearnMoreClick(i,t,n());break;case"aboutRecapModal":e.readerV1AboutPanelLearnMoreClick(i,t,n());break;default:(0,S.L0)(o)}}))},e.privacyPolicy=function(e,t,n){return di.tracking(B.Kind.privacyPolicyLinkVisited,(({docId:i})=>{e.readerV1OptInPanelPrivacyPolicyClick(i,t,n())}))},e.dataCollectionPolicy=function(e,t,n){return di.tracking(B.Kind.dataCollectionPolicyLinkVisited,(({docId:i})=>{e.readerV1OptInPanelDataCollectionPolicyClick(i,t,n())}))},e.termsOfService=function(e,t,n){return di.tracking(B.Kind.termsOfServiceLinkVisited,(({docId:i})=>{e.readerV1OptInPanelTermsOfServiceClick(i,t,n())}))}}(eo||(eo={}))},96002:(e,t,n)=>{n.d(t,{p:()=>f,y:()=>b});var i=n(27378),o=n(41263),a=n(86620),s=n(92132),r=n(87965),l=n(48189),c=n(50663),d=n(49468),u=n(33678),h=n(15073),m=n(42103),p=n(64078),g=n(76974);const f=({env:e,children:t,className:n})=>i.createElement(d.o,{className:n},i.createElement(r.p,null,i.createElement(u.a.Context.Provider,{value:new a.C(e)},i.createElement(s.Q,{remSize:g.of(16),setter:e=>h.u.setRootCssVar(document.documentElement,e)},i.createElement(m.G.DefaultProvider,null,t,i.createElement(l.p,{regular:!0,bold:!0}),i.createElement(c.G,null),i.createElement(p.X,null)))))),b=({env:e,children:t,className:n})=>i.createElement(o.L,{chunkName:"readerGmailV1ThreadIntegration"},i.createElement(f,{env:e,className:n},t))},14700:(e,t,n)=>{n.d(t,{d:()=>h});var i=n(57050),o=n(19429),a=n(28043),s=n(66310),r=n(85985),l=n(77176),c=n(76974),d=n(2844);const u={URI:"Observable",map:(e,t)=>e.pipe(l.U(t)),ap:(e,t)=>d.aj([e,t]).pipe(l.U((([e,t])=>e(t)))),of:e=>c.of(e)};function h(e,t,n){return o.VF((o=>(0,i.zG)(t(o),a.x(),s.w((t=>n.traverseWithIndex(u)(t,((t,n)=>e(n,t)(o.pipe(r.h((e=>e.key===t)),l.U((e=>e.action)))))))),a.x())))}},41627:(e,t,n)=>{n.d(t,{v:()=>a,x:()=>s});var i=n(44586),o=n(95195);function a(e,t=self){return new i.y((n=>{var i,a;(null===(a=null===(i=t.navigator)||void 0===i?void 0:i.clipboard)||void 0===a?void 0:a.writeText)?t.navigator.clipboard.writeText(e).then((()=>n.next(o.F2(void 0)))).catch((e=>n.next(o.t$(new Error(String(e)))))):n.next(o.t$(new Error("The Clipboard API is not available.")))}))}function s(e=self){var t,n;return!!(null===(n=null===(t=e.navigator)||void 0===t?void 0:t.clipboard)||void 0===n?void 0:n.writeText)}},86620:(e,t,n)=>{n.d(t,{C:()=>c,U:()=>i});var i,o=n(27378),a=n(29511),s=n(33678),r=n(88056),l=n(95574);!function(e){let t;!function(e){e.isAppleSystem="isAppleSystem"}(t=e.SidebarFlag||(e.SidebarFlag={})),e.Flag={...t,...s.a.Flag},e.Context=o.createContext(r.Y.invariantContent("Environment"))}(i||(i={}));class c{constructor(e=(0,a.O)()){this._flags=new Set,this.actions={openUrl:e=>l.vM((()=>{document.location.href=e.toString()})),openPopup:e=>l.vM((()=>{const t=self.open(e.toString(),void 0,"noreferrer");t&&(t.opener=null)}))},e.config.systemInfo.os.isMac&&this._flags.add(i.Flag.isAppleSystem),this._flags.add(i.Flag.supportsSVGDominantBaseline),this._flags.add(i.Flag.onlyTrustedEvents)}has(e){return this._flags.has(e)}}},92132:(e,t,n)=>{n.d(t,{Q:()=>l});var i=n(27378),o=n(15073),a=n(60797),s=n(95300),r=n(5114);const l=({children:e,remSize:t,setter:n})=>(c+=1,i.useEffect((()=>{const e=t.subscribe((e=>{d.next(r.some(e)),n(r.some(e))}));return()=>{e.unsubscribe(),c-=1,0===c&&(d.next(r.none),n(r.none))}}),[t]),i.createElement(o.u.Context.Provider,{value:d.pipe(a.oA)},e));let c=0;const d=new s.X(r.none)},61202:(e,t,n)=>{n.d(t,{j:()=>N});var i=n(34311),o=n(2844),a=n(77176);class s{constructor(e){this._annotationsStateService=e}getHoveredStateBehavior(e){return o.aj([this._annotationsStateService.hoveredAnnotation,this._annotationsStateService.activeAnnotation]).pipe(a.U((([t,n])=>t&&t.highlightIds.includes(e)||n&&n.highlightIds.includes(e)?i.pc.hovered:i.pc.none)))}}var r=n(74850),l=n(19751),c=n(66310),d=n(24209),u=n(40151),h=n(2834),m=n(23063),p=n(93508),g=n(76974),f=n(47849);class b extends f.LH{constructor(e,t=r.Y.create(b.name)){super(e,t),this.hoveredAnnotation=this._rawHoveredAnnotation.pipe(c.w((e=>e?d.T(this._offByUpdatedGeometry(e),this._options.offByTextPositionChange||u.E).pipe(h.b((()=>this._log.trace("Active state was overriden by text or geometry change"))),m.q(1),p.O(e)):g.of(null))),l.skipBy(f.Cn.getEqById()),l.shareReplay({bufferSize:1,refCount:!0})),this.activeAnnotation=this.hoveredAnnotation}}var k=n(93356),I=n(76331),w=n(57050),y=n(40327),_=n(10166),C=n(62337),v=n(71249),E=n(4432);class M{constructor(e=!0){this._collateLines=e}create(e,t){return{getRects:()=>{var n;const i=[];let o,a=e.start,s=!1;do{const r=t.getFragmentAtOrBeforeOffset(a);if(r&&o!==a){o=a;if(null===(n=r.node.textContent)||void 0===n?void 0:n.replace(/\s/g,"")){const n=E.M.createRange(t,a,Math.min(r.endOffset,e.end));n&&i.push(...Array.from(n.getClientRects()))}a=r.endOffset===a?r.endOffset+1:r.endOffset}else s=!0}while(a<e.end&&!s);return(0,y.pipe)(i,_.e,this._collateLines?_.y:w.yR,v.UI(C.Pf.create))}}}getClientRects(e){return e.getRects()}getIsInvalid(e){return!1}getIsConsistent(e,t,n){return!0}dispose(e){}}var U=n(98403),x=n(14601),S=n(38983);class N{constructor(e,t,n,o,a,l=(e=>new b(e)),c=!0){var d,h;this._textNode=e,this._textMap=t,this._createLayout=n,this._createCardController=o,this._createAnnotationsStateService=l,this._collateLines=c,this._subscriptions=new x.w,this._geometryProvider=new M(this._collateLines),this._layout=this._createLayout(this._textNode),this.highlightsCollection=new I.C(this._geometryProvider,this._layout.createGeometryLayout(),(()=>this._textMap),(0,k.u)(),(0,i.WF)(this._layout.textNode)),this._activeAnnotationState=S.h.create(null),this._controller=this._createCardController(this._activeAnnotationState,this._layout),this._annotationsStateService=this._controller?this._createAnnotationsStateService({textNode:this._textNode,textNodeLayout:this._layout.textNode,mouseData:this._layout.mouse,highlightGeometry:this.highlightsCollection,cardHovered:this._controller.cardHovered,cardDismissed:this._controller.cardDismissed,getCurrentCardAnnotationState:()=>this._activeAnnotationState.get(),offByTextPositionChange:(0,f.ss)(this._layout.textNode,r.Y.create(b.name))}):null,this.hoveredAnnotation=(null===(d=this._annotationsStateService)||void 0===d?void 0:d.hoveredAnnotation)||u.E,this.activeAnnotation=this._activeAnnotationState,this._annotationsStateService&&this._subscriptions.add(this._annotationsStateService.activeAnnotation.subscribe(U.wW(this._activeAnnotationState)));const m=this._annotationsStateService?new s(this._annotationsStateService):null,p=a(this._layout,this.highlightsCollection,(null===(h=this._controller)||void 0===h?void 0:h.view)||g.of(null),(e=>(null==m?void 0:m.getHoveredStateBehavior(e))||g.of(i.pc.none))),w=this._layout.render(p,{});this._subscriptions.add((()=>w.dispose()))}dispose(){var e;null===(e=this._controller)||void 0===e||e.dispose(),this._layout.dispose(),this.highlightsCollection.dispose(),this._subscriptions.unsubscribe()}}},63551:(e,t,n)=>{n.d(t,{u:()=>v});var i,o=n(57050),a=n(19723),s=n(34311),r=n(48424),l=n(74850),c=n(14601),d=n(32952),u=n(95300),h=n(24209),m=n(93508),p=n(16118),g=n(77176),f=n(85321),b=n(2834),k=n(73975),I=n(71249),w=n(43675),y=n(92843),_=n(5114),C=n(83078);!function(e){e.eq=k.Uz((e=>({annotations:e.annotations,docId:e.docId,textNode:e.textNode})))(k.MW({docId:k.yv,annotations:I.Eh(a.q.eq),textNode:k.w4}))}(i||(i={}));class v{constructor(e,t,n,k,v=l.Y.create("gmail.annotationsManager")){this._messagesRoot=t,this._logger=v,this._subscriptions=new c.w,this._currentAnnotations=new Map,this._state=new Map,this._textNodeToDocId=new WeakMap,this._annotationIdsForDocId=new Map,this._annotationToHighlightId=new Map,this._hiddenDocs=new WeakMap,this._hideActionSubject=new d.xQ,this._intersectionObserver=this._initIntersectionObserver(),this._hoveredAnnotation=new d.xQ,this._activeAnnotation=new u.X(null),this.hoveredAnnotation=this._hoveredAnnotation.asObservable(),this.activeAnnotation=this._activeAnnotation.asObservable();const E=h.T(e.pipe(m.O(new Map),p.G(),g.U((([e,t])=>(0,o.zG)(w.yi(i.eq)(e,t),y.v.reduce([],((e,{docId:t})=>e.concat({kind:"remove",docId:t})),((e,t,n)=>r.EN.eq.equals(t.textNode,n.textNode)?e.concat({kind:"update",prevAnnotations:t.annotations,...n}):e.concat({kind:"remove",docId:t.docId},{kind:"add",...n})),((e,t)=>e.concat({kind:"add",...t})))))),f.zg(o.yR)),this._hideActionSubject);this._subscriptions.add(E.subscribe((e=>{const t=this._state.get(e.docId);if(t&&"remove"===e.kind)(0,o.zG)(_.fromNullable(this._annotationIdsForDocId.get(e.docId)),C.bw((e=>{for(const t of e.values())this._currentAnnotations.delete(t),this._annotationToHighlightId.delete(t)}))),this._annotationIdsForDocId.delete(e.docId),this._textNodeToDocId.delete(t.message.textNode.node),this._state.delete(e.docId),t.disposables.forEach((e=>e.dispose())),this._logger.trace(`Annotations for ${e.docId} cleared`);else if("add"===e.kind||"update"===e.kind&&!t){const t=new d.xQ,i=n(e.textNode.node,e.textMap,e.docId,(e=>_.fromNullable(this._currentAnnotations.get(e))),t),a=i.hoveredAnnotation.pipe(b.b((e=>this._hoveredAnnotation.next(e)))).subscribe(),r=i.activeAnnotation.pipe(b.b((e=>this._activeAnnotation.next(e)))).subscribe();this._intersectionObserver.observe(e.textNode.node),this._state.set(e.docId,{message:e,wiring:i,disposables:[{dispose:()=>a.unsubscribe()},{dispose:()=>r.unsubscribe()},{dispose:()=>this._intersectionObserver.unobserve(e.textNode.node)},{dispose:()=>t.next()},i]}),this._textNodeToDocId.set(e.textNode.node,e.docId);const l=(0,o.zG)(_.fromNullable(this._annotationIdsForDocId.get(e.docId)),_.getOrElse((()=>{const t=new Set;return this._annotationIdsForDocId.set(e.docId,t),t})));e.annotations.forEach((e=>{const t=s.y$.Id.create(e.id);this._annotationToHighlightId.set(e.id,t),this._logger.trace("Adding annotation highlight",t),this._currentAnnotations.set(e.id,e),l.add(e.id),i.highlightsCollection.addHighlight(t,{start:e.span.s,end:e.span.e},k(t,e))}))}else if(t&&"update"===e.kind){const{left:n,right:i}=(0,o.zG)(w.yi(a.q.eq)(new Map(e.prevAnnotations.map((e=>[e.id,e]))),new Map(e.annotations.map((e=>[e.id,e])))),y.v.reduce({left:[],right:[]},((e,t)=>({...e,left:e.left.concat(t)})),((e,t,n)=>({left:e.left.concat(t),right:e.right.concat(n)})),((e,t)=>({...e,right:e.right.concat(t)})))),r=(0,o.zG)(_.fromNullable(this._annotationIdsForDocId.get(e.docId)),_.getOrElse((()=>{const t=new Set;return this._annotationIdsForDocId.set(e.docId,t),t})));n.forEach((e=>{r.delete(e.id),this._currentAnnotations.delete(e.id)}));const l=(0,o.zG)(n,I.DZ((e=>_.fromNullable(this._annotationToHighlightId.get(e.id)))));t.wiring.highlightsCollection.removeHighlights(l),i.forEach((e=>{const n=s.y$.Id.create(e.id);this._annotationToHighlightId.set(e.id,n),this._logger.trace("Adding annotation highlight",n),this._currentAnnotations.set(e.id,e),r.add(e.id),t.wiring.highlightsCollection.addHighlight(n,{start:e.span.s,end:e.span.e},k(n,e))}))}})))}_initIntersectionObserver(){return new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?(0,o.zG)(_.fromNullable(this._hiddenDocs.get(e.target)),C.bw((t=>{this._hiddenDocs.delete(e.target),this._hideActionSubject.next({kind:"add",...t})}))):(0,o.zG)(_.fromNullable(this._textNodeToDocId.get(e.target)),_.chain((e=>_.fromNullable(this._state.get(e)))),C.bw((({message:t})=>{const{docId:n,textNode:i}=t;this._logger.debug(`Message ${n} hidden, clearing annotations`),this._hideActionSubject.next({kind:"remove",docId:n}),this._hiddenDocs.set(e.target,t),this._intersectionObserver.observe(i.node)})))}))}),{root:this._messagesRoot})}dispose(){this._subscriptions.unsubscribe();for(const{disposables:e}of this._state.values())e.forEach((e=>e.dispose()));this._currentAnnotations.clear(),this._state.clear(),this._annotationIdsForDocId.clear(),this._intersectionObserver.disconnect()}}},80895:(e,t,n)=>{n.d(t,{C:()=>s});var i=n(27378),o=n(12187),a=n(12935);const s=({kind:e="primary",dataGrammarlyPart:t="ui-kit-badge",title:n,boldTitle:s=!1,className:r,...l})=>i.createElement("div",{"data-grammarly-part":t,...(0,o.Sh)(a.badge,r,"primary"===e?a.badgePrimary:null,"success"===e?a.badgeSuccess:null,"gold"===e?a.badgeGold:null,"error"===e?a.badgeError:null,l.rounded?a.badgeRounded:null,!l.rounded||l.size&&"small"!==l.size?null:a.badgeRoundedSmall,l.rounded&&"medium"===l.size?a.badgeRoundedMedium:null,l.rounded&&"large"===l.size?a.badgeRoundedLarge:null)},i.createElement("div",{...(0,o.Sh)(a.badgeTitle,s?a.badgeTitleBold:null)},n))},86705:(e,t,n)=>{n.d(t,{v:()=>a});var i=n(27378),o=n(80895);const a=({browser:e,className:t,title:n="BETA"})=>"safari"!==e?i.createElement(o.C,{title:n,className:t}):null},31944:(e,t,n)=>{n.d(t,{J:()=>d});var i=n(57050),o=n(27378),a=n(90845),s=n(60797),r=n(2834),l=n(12187),c=n(22536);const d=({onChange:e,labelId:t,className:n,checkboxClassName:d,labelClassName:u,checked:h,children:m,disabled:p,useDS:g,dataGrammarlyPart:f="ui-kit-checkbox",tabIndex:b=0,onMount:k=i.Q1})=>{const[I,w]=o.useState(null!=h&&h);o.useEffect((()=>{w(Boolean(h))}),[h]);const y=t=>{t.preventDefault(),t.stopPropagation(),w(!I),null==e||e(!I)},{ref:_,onMount:C}=a.P.useElWatcher();return o.useEffect((()=>{const e=_.pipe(s.oA,r.b(k)).subscribe();return()=>e.unsubscribe()}),[]),o.createElement("div",{"data-grammarly-part":f,...(0,l.Sh)(c.checkboxContainer,n)},o.createElement("div",{...(0,l.Sh)(c.checkbox,d,I?c.checkboxChecked:null,g?c.checkboxDS:null),role:"checkbox","aria-checked":I,tabIndex:b,"aria-labelledby":t,onKeyDown:e=>{" "===e.key&&y(e)},onClick:p?i.Q1:y,ref:C},I?o.createElement("div",{className:c.checkboxCheckmark}):null),o.createElement("label",{id:t,onClick:y,className:u},m))}},57053:(e,t,n)=>{n.d(t,{i:()=>s});var i=n(27378),o=n(12187),a=n(39070);const s=({maxRating:e=5,ratingLabels:t=["Not at all valuable","Slightly valuable","Somewhat valuable","Very valuable","Extremely valuable"],onChange:n,value:s,ariaLabel:r="Rating",className:l,ratingStarsClassName:c,ratingLegendClassName:d,ratingLabelsClassName:u})=>{const[h,m]=i.useState(s),[p,g]=i.useState(void 0);i.useEffect((()=>{m(s)}),[s]),i.useEffect((()=>{void 0!==h&&n(h)}),[h]);const f=[...Array(e).keys()].map((e=>e+1)),b=void 0!==p?p:h;return i.createElement("div",{"data-grammarly-part":"ui-kit-rating",role:"radiogroup","aria-label":r,...(0,o.Sh)(a.rating,l)},i.createElement("div",{...(0,o.Sh)(a.ratingStars,c),onMouseLeave:()=>g(void 0)},f.map((e=>{const t=void 0!==b&&b>=e;return i.createElement("input",{key:`rating-${e}`,id:`rating-${e}`,type:"radio",name:"rating",checked:h===e,onChange:e=>m(parseInt(e.target.value,10)),value:e,onMouseEnter:e=>{const t=e.target;g(parseInt(t.value,10))},...(0,o.Sh)(a.ratingStar,t?a.ratingStarFilled:null)})}))),i.createElement("div",{...(0,o.Sh)(a.ratingLabels,u)},f.map((e=>i.createElement("label",{key:`rating-label-${e}`,htmlFor:`rating-${e}`,...(0,o.Sh)(b===e?a.ratingLabelVisible:a.ratingLabelNotVisible)},t[e-1])))),void 0!==b?null:i.createElement("div",{...(0,o.Sh)(a.ratingLegend,d)},i.createElement("div",null,t[0]),i.createElement("div",null,t[f.length-1])))}},69338:e=>{e.exports={container:"_1C-1l",menu:"_1huyk",menuContent:"_3B1au",main:"_3mAxd",mainNoSidebar:"_3MhY9",mainHeader:"_31jzw",mainContent:"_3t1fc",mainContentNoFooter:"_31Pu4",mainFooter:"lSVP2"}},77471:e=>{e.exports={logoContainer:"_2-aAJ"}},5142:e=>{e.exports={popover:"_1zzYi"}},41538:e=>{e.exports={highlight:"aiZOA",background:"_7C5i7",showBackground:"_28ZiA",debug:"Jrxsn",hovered:"_20_UY"}},60078:e=>{e.exports={followUps:"_3o3mv",checkboxWrapper:"T_S5F",label:"_13jYA",checkbox:"_3azsp",textChecked:"_1J-aM",checkboxDoneNotification:"_2SLC3",checkboxDone:"_1eRWY",arrow:"_1NqnX"}},57192:e=>{e.exports={item:"_12n5x",itemWrapper:"_140JU",itemContent:"_1dn4H",itemMenu:"_1o0Gi"}},62171:e=>{e.exports={ellipsis:"_3QzHT",popup:"SFCVl",feedbackPopup:"TEFuf"}},70088:e=>{e.exports={keyPoints:"_28BOK",ellipsis:"_3WS6y"}},19888:e=>{e.exports={header:"_2Cj_z",title:"_1EgTJ"}},36800:e=>{e.exports={ratingContainer:"_1u7Pk",ratingStars:"_2yVKl",ratingLegend:"ypMB_",ratingLabels:"_1do8U",requiredLabel:"_11lHg"}},35515:e=>{e.exports={textBoxHeader:"_9vtn0",textbox:"_2YOqU",required:"_3IHnE",requiredLabel:"_2_T63"}},27590:e=>{e.exports={modal:"sZ7_v",closeButton:"_3nYNu",button:"_38uwR",title:"_30EUn",body:"_2xIKz",footer:"_1YAAq"}},15501:e=>{e.exports={modal:"_2ekD2",header:"_7VsI1",title:"_1GQMV",body:"_2AF-e"}},46058:e=>{e.exports={modal:"_3Y4JT",header:"Ci5rP",title:"uCMui",body:"_3J9ct",description:"_30Kg1"}},55418:e=>{e.exports={modal:"_6jJS4",header:"_390hI",main:"E3zZ6",button:"_2_4_h"}},61653:e=>{e.exports={header:"_10cZ8",title:"JKiod"}},94715:e=>{e.exports={modal:"_3JRy0",main:"_1l3vq",header:"U7As3",title:"_1QhGd"}},92781:e=>{e.exports={notification:"_1xGs1",slideIn:"_1mcJF",content:"_2aN6C",header:"kmM4l",body:"_34TMF",closeButton:"_1caA8",logo:"_3WboZ",iconCloseButton:"BPLmX"}},88204:e=>{e.exports={notificationsContainer:"_1latx"}},51382:e=>{e.exports={notification:"_2Y5XW",iconAndText:"v76B7",icon:"_23bKo",button:"_15689"}},88892:e=>{e.exports={notificationsContainer:"_3yhfx"}},77587:e=>{e.exports={onboarding:"_3Q6WT",onboardingHeader:"_3vTL8",onboardingContent:"uYjSz",onboardingClose:"_2-pCS",onboardingIcon:"k-f7J",onboardingFooter:"_51UYp",onboardingFooterCenter:"_1MO3a",onboardingFooterLeft:"_9DLAw",onboardingFooterRight:"_1CZFz"}},86826:e=>{e.exports={switch:"_2CrBc",label:"_1WOVH"}},12019:e=>{e.exports={logoIconSpinning:"_3J4uZ",spin:"_3_wJm"}},24011:e=>{e.exports={footer:"yQQat",replyButton:"YTdoH",header:"_2igHw",headerCounts:"_1ku27",contentContent:"_2y0oW",contentOverflowTop:"_2c0UI",contentOverflowBottom:"_2Lm6T",contentCounts:"_3BMRt"}},45903:e=>{e.exports={moreDataEntryPoint:"_3GJP8",moreDataEntryPointWithOnboarding:"_3zg39"}},16178:e=>{e.exports={recapPanel:"_261xg",panelBackground:"xv1fb",mainPart:"_2gO2-",asidePart:"_29g7j",contentLabel:"_19vWo",optInContent:"_1sIKL",logoAndBadge:"Jrehr",logoContainer:"_1IQmi",warningBadge:"_1ZcRU",betaBadge:"_1dc6l",ghostButton:"_1YJOd",learnMoreLink:"_1VLp1",tryItOutButton:"_1r4ja"}},77637:e=>{e.exports={compactReplyPanel:"_3Sayz",compactReplyPanelContent:"_3pgWq",compactReplyPanelLogo:"_3--Hp"}},35426:e=>{e.exports={content:"MPqB8",contentExpanded:"_2OhdK",contentOverflowTop:"_3LUA4",contentCounts:"_3Te7F"}},78545:e=>{e.exports={fullReplyPanel:"xxoCe"}},21867:e=>{e.exports={header:"_2MCQM",headerContent:"_3GJfp",headerButton:"Sdfvp"}},88890:e=>{e.exports={sidebarLogo:"_3SYll",sidebarFooter:"_2Nvu2"}},34432:e=>{e.exports={container:"_16z4R"}},86390:e=>{e.exports={button:"_3n5HL",noPadding:"_2au_-",dark:"_2V5O1",secondary:"E9gw4",tertiary:"OVG0s"}},50223:e=>{e.exports={feedbackPopup:"ZCABn",buttonText:"_3dsKR",inactiveThumbsDown:"_1vsAi",inactiveThumbsUp:"_2_rRy"}},40756:e=>{e.exports={separator:"_3-DoO"}},12935:e=>{e.exports={badge:"Mora3",badgePrimary:"_1446Q",badgeSuccess:"_2FQ9t",badgeGold:"_3t7g2",badgeError:"_154CZ",badgeRounded:"_2atD_",badgeRoundedSmall:"OxUT1",badgeRoundedMedium:"_1Rehq",badgeRoundedLarge:"_1Mmea",badgeTitle:"_1imRR",badgeTitleBold:"KO4Gs"}},22536:e=>{e.exports={checkboxContainer:"_3bj_g",checkbox:"xrB8R",checkboxDS:"_2UTyE",checkboxChecked:"Uhddy",checkboxCheckmark:"_1qI2g",spin:"_3S_a3"}},39070:e=>{e.exports={rating:"_2oJv0",ratingStars:"_3FAXT",ratingStar:"_1p53S",ratingStarFilled:"_1E3qz",ratingLabels:"jzPuo",ratingLabelVisible:"_3yF9v",ratingLabelNotVisible:"_2zNv4",ratingLegend:"_1XbY_",spin:"fu5_3"}},98499:e=>{e.exports={switchContainer:"qQhHU",switchContainerCompact:"i_xK_",switch:"_2Ag9O",switchAfter:"O4aPa",switchChecked:"_1x1OX",switchDisabled:"_3i5BY",on_off:"_17N4Q"}}}]);